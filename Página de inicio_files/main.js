!function(){(function(){var c=this,M=c._,l={},r=Array.prototype,b=Object.prototype,N=Function.prototype,_=r.push,t=r.slice,s=r.concat,i=b.toString,k=b.hasOwnProperty,v=r.forEach,x=r.map,S=r.reduce,A=r.reduceRight,w=r.filter,F=r.every,y=r.some,u=r.indexOf,P=r.lastIndexOf,I=Array.isArray,C=Object.keys,g=N.bind,e=function(t){return t instanceof e?t:this instanceof e?void(this._wrapped=t):new e(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=e),exports._=e):c._=e,e.VERSION="1.6.0";var n=e.each=e.forEach=function(t,r,a){if(null==t)return t;if(v&&t.forEach===v)t.forEach(r,a);else if(t.length===+t.length){for(var n=0,s=t.length;s>n;n++)if(r.call(a,t[n],n,t)===l)return}else for(var i=e.keys(t),n=0,s=i.length;s>n;n++)if(r.call(a,t[i[n]],i[n],t)===l)return;return t};e.map=e.collect=function(e,r,a){var t=[];return null==e?t:x&&e.map===x?e.map(r,a):(n(e,function(e,n,i){t.push(r.call(a,e,n,i))}),t)};var T="Reduce of empty array with no initial value";e.reduce=e.foldl=e.inject=function(t,r,a,s){var i=arguments.length>2;if(null==t&&(t=[]),S&&t.reduce===S)return s&&(r=e.bind(r,s)),i?t.reduce(r,a):t.reduce(r);if(n(t,function(e,t,n){i?a=r.call(s,a,e,t,n):(a=e,i=!0)}),!i)throw new TypeError(T);return a},e.reduceRight=e.foldr=function(t,r,a,o){var s=arguments.length>2;if(null==t&&(t=[]),A&&t.reduceRight===A)return o&&(r=e.bind(r,o)),s?t.reduceRight(r,a):t.reduceRight(r);var i=t.length;if(i!==+i){var l=e.keys(t);i=l.length}if(n(t,function(u,e,n){e=l?l[--i]:--i,s?a=r.call(o,a,t[e],e,n):(a=t[e],s=!0)}),!s)throw new TypeError(T);return a},e.find=e.detect=function(t,n,r){var e;return D(t,function(t,a,i){return n.call(r,t,a,i)?(e=t,!0):void 0}),e},e.filter=e.select=function(e,r,a){var t=[];return null==e?t:w&&e.filter===w?e.filter(r,a):(n(e,function(e,n,i){r.call(a,e,n,i)&&t.push(e)}),t)},e.reject=function(n,r,t){return e.filter(n,function(e,n,a){return!r.call(t,e,n,a)},t)},e.every=e.all=function(t,r,i){r||(r=e.identity);var a=!0;return null==t?a:F&&t.every===F?t.every(r,i):(n(t,function(e,t,n){return(a=a&&r.call(i,e,t,n))?void 0:l}),!!a)};var D=e.some=e.any=function(t,r,i){r||(r=e.identity);var a=!1;return null==t?a:y&&t.some===y?t.some(r,i):(n(t,function(e,t,n){return a||(a=r.call(i,e,t,n))?l:void 0}),!!a)};e.contains=e.include=function(e,t){return null==e?!1:u&&e.indexOf===u?-1!=e.indexOf(t):D(e,function(e){return e===t})},e.invoke=function(r,n){var a=t.call(arguments,2),i=e.isFunction(n);return e.map(r,function(e){return(i?n:e[n]).apply(e,a)})},e.pluck=function(t,n){return e.map(t,e.property(n))},e.where=function(t,n){return e.filter(t,e.matches(n))},e.findWhere=function(t,n){return e.find(t,e.matches(n))},e.max=function(t,r,s){if(!r&&e.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);var a=-1/0,i=-1/0;return n(t,function(e,n,o){var t=r?r.call(s,e,n,o):e;t>i&&(a=e,i=t)}),a},e.min=function(t,r,s){if(!r&&e.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);var a=1/0,i=1/0;return n(t,function(e,n,o){var t=r?r.call(s,e,n,o):e;i>t&&(a=e,i=t)}),a},e.shuffle=function(i){var r,a=0,t=[];return n(i,function(n){r=e.random(a++),t[a-1]=t[r],t[r]=n}),t},e.sample=function(t,n,r){return null==n||r?(t.length!==+t.length&&(t=e.values(t)),t[e.random(t.length-1)]):e.shuffle(t).slice(0,Math.max(0,n))};var o=function(t){return null==t?e.identity:e.isFunction(t)?t:e.property(t)};e.sortBy=function(n,t,r){return t=o(t),e.pluck(e.map(n,function(e,n,a){return{value:e,index:n,criteria:t.call(r,e,n,a)}}).sort(function(n,r){var e=n.criteria,t=r.criteria;if(e!==t){if(e>t||void 0===e)return 1;if(t>e||void 0===t)return-1}return n.index-r.index}),"value")};var p=function(e){return function(r,t,i){var a={};return t=o(t),n(r,function(n,s){var o=t.call(i,n,s,r);e(a,o,n)}),a}};e.groupBy=p(function(t,n,r){e.has(t,n)?t[n].push(r):t[n]=[r]}),e.indexBy=p(function(e,t,n){e[t]=n}),e.countBy=p(function(t,n){e.has(t,n)?t[n]++:t[n]=1}),e.sortedIndex=function(a,s,e,i){e=o(e);for(var l=e.call(i,s),t=0,n=a.length;n>t;){var r=t+n>>>1;e.call(i,a[r])<l?t=r+1:n=r}return t},e.toArray=function(n){return n?e.isArray(n)?t.call(n):n.length===+n.length?e.map(n,e.identity):e.values(n):[]},e.size=function(t){return null==t?0:t.length===+t.length?t.length:e.keys(t).length},e.first=e.head=e.take=function(e,n,r){return null==e?void 0:null==n||r?e[0]:0>n?[]:t.call(e,0,n)},e.initial=function(e,n,r){return t.call(e,0,e.length-(null==n||r?1:n))},e.last=function(e,n,r){return null==e?void 0:null==n||r?e[e.length-1]:t.call(e,Math.max(e.length-n,0))},e.rest=e.tail=e.drop=function(n,e,r){return t.call(n,null==e||r?1:e)},e.compact=function(t){return e.filter(t,e.identity)};var E=function(r,a,t){return a&&e.every(r,e.isArray)?s.apply(t,r):(n(r,function(n){e.isArray(n)||e.isArguments(n)?a?_.apply(t,n):E(n,a,t):t.push(n)}),t)};e.flatten=function(e,t){return E(e,t,[])},e.without=function(n){return e.difference(n,t.call(arguments,1))},e.partition=function(a,e,i){e=o(e);var t=[],r=[];return n(a,function(n){(e.call(i,n)?t:r).push(n)}),[t,r]},e.uniq=e.unique=function(i,t,r,s){e.isFunction(t)&&(s=r,r=t,t=!1);var l=r?e.map(i,r,s):i,o=[],a=[];return n(l,function(n,r){(t?r&&a[a.length-1]===n:e.contains(a,n))||(a.push(n),o.push(i[r]))}),o},e.union=function(){return e.uniq(e.flatten(arguments,!0))},e.intersection=function(n){var r=t.call(arguments,1);return e.filter(e.uniq(n),function(t){return e.every(r,function(n){return e.contains(n,t)})})},e.difference=function(n){var a=s.apply(r,t.call(arguments,1));return e.filter(n,function(t){return!e.contains(a,t)})},e.zip=function(){for(var n=e.max(e.pluck(arguments,"length").concat(0)),r=new Array(n),t=0;n>t;t++)r[t]=e.pluck(arguments,""+t);return r},e.object=function(t,r){if(null==t)return{};for(var n={},e=0,a=t.length;a>e;e++)r?n[t[e]]=r[e]:n[t[e][0]]=t[e][1];return n},e.indexOf=function(n,a,r){if(null==n)return-1;var t=0,i=n.length;if(r){if("number"!=typeof r)return t=e.sortedIndex(n,a),n[t]===a?t:-1;t=0>r?Math.max(0,i+r):r}if(u&&n.indexOf===u)return n.indexOf(a,r);for(;i>t;t++)if(n[t]===a)return t;return-1},e.lastIndexOf=function(e,t,n){if(null==e)return-1;var a=null!=n;if(P&&e.lastIndexOf===P)return a?e.lastIndexOf(t,n):e.lastIndexOf(t);for(var r=a?n:e.length;r--;)if(e[r]===t)return r;return-1},e.range=function(e,n,t){arguments.length<=1&&(n=e||0,e=0),t=arguments[2]||1;for(var r=Math.max(Math.ceil((n-e)/t),0),a=0,i=new Array(r);r>a;)i[a++]=e,e+=t;return i};var m=function(){};e.bind=function(n,i){var r,a;if(g&&n.bind===g)return g.apply(n,t.call(arguments,1));if(!e.isFunction(n))throw new TypeError;return r=t.call(arguments,2),a=function(){if(!(this instanceof a))return n.apply(i,r.concat(t.call(arguments)));m.prototype=n.prototype;var s=new m;m.prototype=null;var e=n.apply(s,r.concat(t.call(arguments)));return Object(e)===e?e:s}},e.partial=function(n){var r=t.call(arguments,1);return function(){for(var i=0,t=r.slice(),a=0,s=t.length;s>a;a++)t[a]===e&&(t[a]=arguments[i++]);for(;i<arguments.length;)t.push(arguments[i++]);return n.apply(this,t)}},e.bindAll=function(r){var a=t.call(arguments,1);if(0===a.length)throw new Error("bindAll must be passed function names");return n(a,function(t){r[t]=e.bind(r[t],r)}),r},e.memoize=function(r,t){var n={};return t||(t=e.identity),function(){var a=t.apply(this,arguments);return e.has(n,a)?n[a]:n[a]=r.apply(this,arguments)}},e.delay=function(e,n){var r=t.call(arguments,2);return setTimeout(function(){return e.apply(null,r)},n)},e.defer=function(n){return e.delay.apply(e,[n,1].concat(t.call(arguments,1)))},e.throttle=function(o,l,t){var n,r,s,a=null,i=0;t||(t={});var u=function(){i=t.leading===!1?0:e.now(),a=null,s=o.apply(n,r),n=r=null};return function(){var c=e.now();i||t.leading!==!1||(i=c);var p=l-(c-i);return n=this,r=arguments,0>=p?(clearTimeout(a),a=null,i=c,s=o.apply(n,r),n=r=null):a||t.trailing===!1||(a=setTimeout(u,p)),s}},e.debounce=function(s,a,o){var t,n,r,l,i,u=function(){var c=e.now()-l;a>c?t=setTimeout(u,a-c):(t=null,o||(i=s.apply(r,n),r=n=null))};return function(){r=this,n=arguments,l=e.now();var c=o&&!t;return t||(t=setTimeout(u,a)),c&&(i=s.apply(r,n),r=n=null),i}},e.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},e.wrap=function(t,n){return e.partial(n,t)},e.compose=function(){var e=arguments;return function(){for(var t=arguments,n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},e.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},e.keys=function(t){if(!e.isObject(t))return[];if(C)return C(t);var n=[];for(var r in t)e.has(t,r)&&n.push(r);return n},e.values=function(n){for(var r=e.keys(n),a=r.length,i=new Array(a),t=0;a>t;t++)i[t]=n[r[t]];return i},e.pairs=function(r){for(var n=e.keys(r),a=n.length,i=new Array(a),t=0;a>t;t++)i[t]=[n[t],r[n[t]]];return i},e.invert=function(r){for(var a={},n=e.keys(r),t=0,i=n.length;i>t;t++)a[r[n[t]]]=n[t];return a},e.functions=e.methods=function(t){var n=[];for(var r in t)e.isFunction(t[r])&&n.push(r);return n.sort()},e.extend=function(e){return n(t.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},e.pick=function(e){var a={},i=s.apply(r,t.call(arguments,1));return n(i,function(t){t in e&&(a[t]=e[t])}),a},e.omit=function(a){var i={},o=s.apply(r,t.call(arguments,1));for(var n in a)e.contains(o,n)||(i[n]=a[n]);return i},e.defaults=function(e){return n(t.call(arguments,1),function(t){if(t)for(var n in t)void 0===e[n]&&(e[n]=t[n])}),e},e.clone=function(t){return e.isObject(t)?e.isArray(t)?t.slice():e.extend({},t):t},e.tap=function(e,t){return t(e),e};var h=function(t,n,o,l){if(t===n)return 0!==t||1/t==1/n;if(null==t||null==n)return t===n;t instanceof e&&(t=t._wrapped),n instanceof e&&(n=n._wrapped);var p=i.call(t);if(p!=i.call(n))return!1;switch(p){case"[object String]":return t==String(n);case"[object Number]":return t!=+t?n!=+n:0==t?1/t==1/n:t==+n;case"[object Date]":case"[object Boolean]":return+t==+n;case"[object RegExp]":return t.source==n.source&&t.global==n.global&&t.multiline==n.multiline&&t.ignoreCase==n.ignoreCase}if("object"!=typeof t||"object"!=typeof n)return!1;for(var d=o.length;d--;)if(o[d]==t)return l[d]==n;var u=t.constructor,c=n.constructor;if(u!==c&&!(e.isFunction(u)&&u instanceof u&&e.isFunction(c)&&c instanceof c)&&"constructor"in t&&"constructor"in n)return!1;o.push(t),l.push(n);var r=0,a=!0;if("[object Array]"==p){if(r=t.length,a=r==n.length)for(;r--&&(a=h(t[r],n[r],o,l)););}else{for(var s in t)if(e.has(t,s)&&(r++,!(a=e.has(n,s)&&h(t[s],n[s],o,l))))break;if(a){for(s in n)if(e.has(n,s)&&!r--)break;a=!r}}return o.pop(),l.pop(),a};e.isEqual=function(e,t){return h(e,t,[],[])},e.isEmpty=function(t){if(null==t)return!0;if(e.isArray(t)||e.isString(t))return 0===t.length;for(var n in t)if(e.has(t,n))return!1;return!0},e.isElement=function(e){return!(!e||1!==e.nodeType)},e.isArray=I||function(e){return"[object Array]"==i.call(e)},e.isObject=function(e){return e===Object(e)},n(["Arguments","Function","String","Number","Date","RegExp"],function(t){e["is"+t]=function(e){return i.call(e)=="[object "+t+"]"}}),e.isArguments(arguments)||(e.isArguments=function(t){return!(!t||!e.has(t,"callee"))}),"function"!=typeof/./&&(e.isFunction=function(e){return"function"==typeof e}),e.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},e.isNaN=function(t){return e.isNumber(t)&&t!=+t},e.isBoolean=function(e){return e===!0||e===!1||"[object Boolean]"==i.call(e)},e.isNull=function(e){return null===e},e.isUndefined=function(e){return void 0===e},e.has=function(e,t){return k.call(e,t)},e.noConflict=function(){return c._=M,this},e.identity=function(e){return e},e.constant=function(e){return function(){return e}},e.property=function(e){return function(t){return t[e]}},e.matches=function(e){return function(t){if(t===e)return!0;for(var n in e)if(e[n]!==t[n])return!1;return!0}},e.times=function(t,r,a){for(var n=Array(Math.max(0,t)),e=0;t>e;e++)n[e]=r.call(a,e);return n},e.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},e.now=Date.now||function(){return(new Date).getTime()};var a={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};a.unescape=e.invert(a.escape);var B={escape:new RegExp("["+e.keys(a.escape).join("")+"]","g"),unescape:new RegExp("("+e.keys(a.unescape).join("|")+")","g")};e.each(["escape","unescape"],function(t){e[t]=function(e){return null==e?"":(""+e).replace(B[t],function(e){return a[t][e]})}}),e.result=function(t,r){if(null==t)return void 0;var n=t[r];return e.isFunction(n)?n.call(t):n},e.mixin=function(t){n(e.functions(t),function(n){var r=e[n]=t[n];e.prototype[n]=function(){var t=[this._wrapped];return _.apply(t,arguments),f.call(this,r.apply(e,t))}})};var O=0;e.uniqueId=function(e){var t=++O+"";return e?e+t:t},e.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var d=/(.)^/,L={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;e.template=function(a,i,n){var r;n=e.defaults({},n,e.templateSettings);var u=new RegExp([(n.escape||d).source,(n.interpolate||d).source,(n.evaluate||d).source].join("|")+"|$","g"),s=0,t="__p+='";a.replace(u,function(e,n,r,i,o){return t+=a.slice(s,o).replace(R,function(e){return"\\"+L[e]}),n&&(t+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(t+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(t+="';\n"+i+"\n__p+='"),s=o+e.length,e}),t+="';\n",n.variable||(t="with(obj||{}){\n"+t+"}\n"),t="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+t+"return __p;\n";try{r=new Function(n.variable||"obj","_",t)}catch(o){throw o.source=t,o}if(i)return r(i,e);var l=function(t){return r.call(this,t,e)};return l.source="function("+(n.variable||"obj")+"){\n"+t+"}",l},e.chain=function(t){return e(t).chain()};var f=function(t){return this._chain?e(t).chain():t};e.mixin(e),n(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var n=r[t];e.prototype[t]=function(){var e=this._wrapped;return n.apply(e,arguments),"shift"!=t&&"splice"!=t||0!==e.length||delete e[0],f.call(this,e)}}),n(["concat","join","slice"],function(t){var n=r[t];e.prototype[t]=function(){return f.call(this,n.apply(this._wrapped,arguments))}}),e.extend(e.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return e})}).call(this),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(r,Jt){function W(t){var n=t.length,r=e.type(t);return"function"===r||e.isWindow(t)?!1:1===t.nodeType&&n?!0:"array"===r||0===n||"number"==typeof n&&n>0&&n-1 in t}function K(n,t,r){if(e.isFunction(t))return e.grep(n,function(e,n){return!!t.call(e,n,e)!==r});if(t.nodeType)return e.grep(n,function(e){return e===t!==r});if("string"==typeof t){if(gn.test(t))return e.filter(t,n,r);t=e.filter(t,n)}return e.grep(n,function(e){return B.call(t,e)>=0!==r})}function Q(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function fn(t){var n=Et[t]={};return e.each(t.match(u)||[],function(t,e){n[e]=!0}),n}function R(){n.removeEventListener("DOMContentLoaded",R,!1),r.removeEventListener("load",R,!1),e.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=e.expando+Math.random()}function bt(n,r,t){var a;if(void 0===t&&1===n.nodeType)if(a="data-"+r.replace(Qt,"-$1").toLowerCase(),t=n.getAttribute(a),"string"==typeof t){try{t="true"===t?!0:"false"===t?!1:"null"===t?null:+t+""===t?+t:Rn.test(t)?e.parseJSON(t):t}catch(s){}i.set(n,r,t)}else t=void 0;return t}function M(){return!0}function v(){return!1}function yt(){try{return n.activeElement}catch(e){}}function Lt(t,n){return e.nodeName(t,"table")&&e.nodeName(11!==n.nodeType?n:n.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function Xt(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function dn(e){var t=kn.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function H(n,r){for(var e=0,a=n.length;a>e;e++)t.set(n[e],"globalEval",!r||t.get(r[e],"globalEval"))}function jt(n,r){var a,c,s,l,u,p,d,o;if(1===r.nodeType){if(t.hasData(n)&&(l=t.access(n),u=t.set(r,l),o=l.events)){delete u.handle,u.events={};for(s in o)for(a=0,c=o[s].length;c>a;a++)e.event.add(r,s,o[s][a])}i.hasData(n)&&(p=i.access(n),d=e.extend({},p),i.set(r,d))}}function o(t,n){var r=t.getElementsByTagName?t.getElementsByTagName(n||"*"):t.querySelectorAll?t.querySelectorAll(n||"*"):[];return void 0===n||n&&e.nodeName(t,n)?e.merge([t],r):r}function ln(e,t){var n=t.nodeName.toLowerCase();"input"===n&&rt.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function St(i,n){var a,t=e(n.createElement(i)).appendTo(n.body),s=r.getDefaultComputedStyle&&(a=r.getDefaultComputedStyle(t[0]))?a.display:e.css(t[0],"display");return t.detach(),s}function U(a){var r=n,t=dt[a];return t||(t=St(a,r),"none"!==t&&t||(F=(F||e("<iframe frameborder='0' width='0' height='0'/>")).appendTo(r.documentElement),r=F[0].contentDocument,r.write(),r.close(),t=St(a,r),F.detach()),dt[a]=t),t}function _(a,i,r){var s,o,l,t,n=a.style;return r=r||E(a),r&&(t=r.getPropertyValue(i)||r[i]),r&&(""!==t||e.contains(a.ownerDocument,a)||(t=e.style(a,i)),Z.test(t)&&ft.test(i)&&(s=n.width,o=n.minWidth,l=n.maxWidth,n.minWidth=n.maxWidth=n.width=t,t=r.width,n.width=s,n.minWidth=o,n.maxWidth=l)),void 0!==t?t+"":t}function tt(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function nt(t,e){if(e in t)return e;for(var r=e[0].toUpperCase()+e.slice(1),a=e,n=vt.length;n--;)if(e=vt[n]+r,e in t)return e;return a}function ct(r,t,n){var e=zt.exec(t);return e?Math.max(0,e[1]-(n||0))+(e[2]||"px"):t}function pt(a,o,n,s,i){for(var t=n===(s?"border":"content")?4:"width"===o?1:0,r=0;4>t;t+=2)"margin"===n&&(r+=e.css(a,n+f[t],!0,i)),s?("content"===n&&(r-=e.css(a,"padding"+f[t],!0,i)),"margin"!==n&&(r-=e.css(a,"border"+f[t]+"Width",!0,i))):(r+=e.css(a,"padding"+f[t],!0,i),"padding"!==n&&(r+=e.css(a,"border"+f[t]+"Width",!0,i)));return r}function ht(n,r,l){var s=!0,t="width"===r?n.offsetWidth:n.offsetHeight,i=E(n),o="border-box"===e.css(n,"boxSizing",!1,i);if(0>=t||null==t){if(t=_(n,r,i),(0>t||null==t)&&(t=n.style[r]),Z.test(t))return t;s=o&&(a.boxSizingReliable()||t===n.style[r]),t=parseFloat(t)||0}return t+pt(n,r,l||(o?"border":"content"),s,i)+"px"}function gt(a,o){for(var i,n,l,s=[],r=0,u=a.length;u>r;r++)n=a[r],n.style&&(s[r]=t.get(n,"olddisplay"),i=n.style.display,o?(s[r]||"none"!==i||(n.style.display=""),""===n.style.display&&C(n)&&(s[r]=t.access(n,"olddisplay",U(n.nodeName)))):(l=C(n),"none"===i&&l||t.set(n,"olddisplay",l?i:e.css(n,"display"))));for(r=0;u>r;r++)n=a[r],n.style&&(o&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=o?s[r]||"":"none"));return a}function s(e,t,n,r,a){return new s.prototype.init(e,t,n,r,a)}function wt(){return setTimeout(function(){y=void 0}),y=e.now()}function x(n,t){var r,a=0,e={height:n};for(t=t?1:0;4>a;a+=2-t)r=f[a],e["margin"+r]=e["padding"+r]=n;return t&&(e.opacity=e.width=n),e}function xt(a,t,i){for(var n,r=(A[t]||[]).concat(A["*"]),e=0,s=r.length;s>e;e++)if(n=r[e].call(i,t,a))return n}function Wt(n,d,u){var r,p,g,h,s,v,o,m,c=this,f={},i=n.style,l=n.nodeType&&C(n),a=t.get(n,"fxshow");u.queue||(s=e._queueHooks(n,"fx"),null==s.unqueued&&(s.unqueued=0,v=s.empty.fire,s.empty.fire=function(){s.unqueued||v()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,e.queue(n,"fx").length||s.empty.fire()})})),1===n.nodeType&&("height"in d||"width"in d)&&(u.overflow=[i.overflow,i.overflowX,i.overflowY],o=e.css(n,"display"),m="none"===o?t.get(n,"olddisplay")||U(n.nodeName):o,"inline"===m&&"none"===e.css(n,"float")&&(i.display="inline-block")),u.overflow&&(i.overflow="hidden",c.always(function(){i.overflow=u.overflow[0],i.overflowX=u.overflow[1],i.overflowY=u.overflow[2]}));for(r in d)if(p=d[r],Zt.exec(p)){if(delete d[r],g=g||"toggle"===p,p===(l?"hide":"show")){if("show"!==p||!a||void 0===a[r])continue;l=!0}f[r]=a&&a[r]||e.style(n,r)}else o=void 0;if(e.isEmptyObject(f))"inline"===("none"===o?U(n.nodeName):o)&&(i.display=o);else{a?"hidden"in a&&(l=a.hidden):a=t.access(n,"fxshow",{}),g&&(a.hidden=!l),l?e(n).show():c.done(function(){e(n).hide()}),c.done(function(){var r;t.remove(n,"fxshow");for(r in f)e.style(n,r,f[r])});for(r in f)h=xt(l?a[r]:0,r,c),r in a||(a[r]=h.start,l&&(h.end=h.start,h.start="width"===r||"height"===r?1:0))}}function Kt(r,o){var t,a,i,n,s;for(t in r)if(a=e.camelCase(t),i=o[a],n=r[t],e.isArray(n)&&(i=n[1],n=r[t]=n[0]),t!==a&&(r[a]=n,delete r[t]),s=e.cssHooks[a],s&&"expand"in s){n=s.expand(n),delete r[a];for(t in n)t in r||(r[t]=n[t],o[t]=i)}else o[a]=i}function Ft(n,l,s){var c,i,o=0,p=I.length,r=e.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var l=y||wt(),e=Math.max(0,t.startTime+t.duration-l),u=e/t.duration||0,a=1-u,s=0,o=t.tweens.length;o>s;s++)t.tweens[s].run(a);return r.notifyWith(n,[t,a,e]),1>a&&o?e:(r.resolveWith(n,[t]),!1)},t=r.promise({elem:n,props:e.extend({},l),opts:e.extend(!0,{specialEasing:{}},s),originalProperties:l,originalOptions:s,startTime:y||wt(),duration:s.duration,tweens:[],createTween:function(r,i){var a=e.Tween(n,t.opts,r,i,t.opts.specialEasing[r]||t.opts.easing);return t.tweens.push(a),a},stop:function(e){var a=0,s=e?t.tweens.length:0;if(i)return this;for(i=!0;s>a;a++)t.tweens[a].run(1);return e?r.resolveWith(n,[t,e]):r.rejectWith(n,[t,e]),this}}),a=t.props;for(Kt(a,t.opts.specialEasing);p>o;o++)if(c=I[o].call(t,n,a,t.opts))return c;return e.map(a,xt,t),e.isFunction(t.opts.start)&&t.opts.start.call(n,t),e.fx.timer(e.extend(u,{elem:n,anim:t,queue:t.opts.queue})),t.progress(t.opts.progress).done(t.opts.done,t.opts.complete).fail(t.opts.fail).always(t.opts.always)}function Nt(t){return function(r,a){"string"!=typeof r&&(a=r,r="*");var n,i=0,s=r.toLowerCase().match(u)||[];if(e.isFunction(a))for(;n=s[i++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(a)):(t[n]=t[n]||[]).push(a)}}function Mt(a,t,s,o){function n(l){var u;return r[l]=!0,e.each(a[l]||[],function(l,a){var e=a(t,s,o);return"string"!=typeof e||i||r[e]?i?!(u=e):void 0:(t.dataTypes.unshift(e),n(e),!1)}),u}var r={},i=a===X;return n(t.dataTypes[0])||!r["*"]&&n("*")}function j(r,a){var t,n,i=e.ajaxSettings.flatOptions||{};for(t in a)void 0!==a[t]&&((i[t]?r:n||(n={}))[t]=a[t]);return n&&e.extend(!0,r,n),r}function _n(r,l,i){for(var a,t,n,s,o=r.contents,e=r.dataTypes;"*"===e[0];)e.shift(),void 0===a&&(a=r.mimeType||l.getResponseHeader("Content-Type"));if(a)for(t in o)if(o[t]&&o[t].test(a)){e.unshift(t);break}if(e[0]in i)n=e[0];else{for(t in i){if(!e[0]||r.converters[t+" "+e[0]]){n=t;break}s||(s=t)}n=n||s}return n?(n!==e[0]&&e.unshift(n),i[n]):void 0}function Ut(n,r,c,u){var o,e,t,s,a,i={},l=n.dataTypes.slice();if(l[1])for(t in n.converters)i[t.toLowerCase()]=n.converters[t];for(e=l.shift();e;)if(n.responseFields[e]&&(c[n.responseFields[e]]=r),!a&&u&&n.dataFilter&&(r=n.dataFilter(r,n.dataType)),a=e,e=l.shift())if("*"===e)e=a;else if("*"!==a&&a!==e){if(t=i[a+" "+e]||i["* "+e],!t)for(o in i)if(s=o.split(" "),s[1]===e&&(t=i[a+" "+s[0]]||i["* "+s[0]])){t===!0?t=i[o]:i[o]!==!0&&(e=s[0],l.unshift(s[1]));break}if(t!==!0)if(t&&n["throws"])r=t(r);else try{r=t(r)}catch(p){return{state:"parsererror",error:t?p:"No conversion from "+a+" to "+e}}}return{state:"success",data:r}}function $(n,t,r,a){var i;if(e.isArray(t))e.each(t,function(t,e){r||Dn.test(n)?a(n,e):$(n+"["+("object"==typeof e?t:"")+"]",e,r,a)});else if(r||"object"!==e.type(t))a(n,t);else for(i in t)$(n+"["+i+"]",t[i],r,a)}function et(t){return e.isWindow(t)?t:9===t.nodeType&&t.defaultView}var b=[],p=b.slice,at=b.concat,q=b.push,B=b.indexOf,O={},Ln=O.toString,J=O.hasOwnProperty,a={},n=r.document,Ct="2.1.1",e=function(t,n){return new e.fn.init(t,n)},tn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,nn=/^-ms-/,an=/-([\da-z])/gi,sn=function(t,e){return e.toUpperCase()};e.fn=e.prototype={jquery:Ct,constructor:e,selector:"",length:0,toArray:function(){return p.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:p.call(this)},pushStack:function(n){var t=e.merge(this.constructor(),n);return t.prevObject=this,t.context=this.context,t},each:function(t,n){return e.each(this,t,n)},map:function(t){return this.pushStack(e.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(p.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var n=this.length,e=+t+(0>t?n:0);return this.pushStack(e>=0&&n>e?[this[e]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:q,sort:b.sort,splice:b.splice},e.extend=e.fn.extend=function(){var s,i,r,n,o,l,t=arguments[0]||{},a=1,c=arguments.length,u=!1;for("boolean"==typeof t&&(u=t,t=arguments[a]||{},a++),"object"==typeof t||e.isFunction(t)||(t={}),a===c&&(t=this,a--);c>a;a++)if(null!=(s=arguments[a]))for(i in s)r=t[i],n=s[i],t!==n&&(u&&n&&(e.isPlainObject(n)||(o=e.isArray(n)))?(o?(o=!1,l=r&&e.isArray(r)?r:[]):l=r&&e.isPlainObject(r)?r:{},t[i]=e.extend(u,l,n)):void 0!==n&&(t[i]=n));return t},e.extend({expando:"jQuery"+(Ct+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(t){return"function"===e.type(t)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(t){return!e.isArray(t)&&t-parseFloat(t)>=0},isPlainObject:function(t){return"object"!==e.type(t)||t.nodeType||e.isWindow(t)?!1:t.constructor&&!J.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?O[Ln.call(e)]||"object":typeof e},globalEval:function(t){var r,a=eval;t=e.trim(t),t&&(1===t.indexOf("use strict")?(r=n.createElement("script"),r.text=t,n.head.appendChild(r).parentNode.removeChild(r)):a(t))},camelCase:function(e){return e.replace(nn,"ms-").replace(an,sn)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(t,r,a){var n,e=0,i=t.length,s=W(t);if(a){if(s)for(;i>e&&(n=r.apply(t[e],a),n!==!1);e++);else for(e in t)if(n=r.apply(t[e],a),n===!1)break}else if(s)for(;i>e&&(n=r.call(t[e],e,t[e]),n!==!1);e++);else for(e in t)if(n=r.call(t[e],e,t[e]),n===!1)break;return t},trim:function(e){return null==e?"":(e+"").replace(tn,"")},makeArray:function(t,r){var n=r||[];return null!=t&&(W(Object(t))?e.merge(n,"string"==typeof t?[t]:t):q.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:B.call(e,t,n)},merge:function(e,n){for(var a=+n.length,t=0,r=e.length;a>t;t++)e[r++]=n[t];return e.length=r,e},grep:function(t,a,i){for(var n,r=[],e=0,s=t.length,o=!i;s>e;e++)n=!a(t[e],e),n!==o&&r.push(t[e]);return r},map:function(n,a,i){var t,e=0,s=n.length,o=W(n),r=[];if(o)for(;s>e;e++)t=a(n[e],e,i),null!=t&&r.push(t);else for(e in n)t=a(n[e],e,i),null!=t&&r.push(t);return at.apply([],r)},guid:1,proxy:function(t,n){var a,i,r;return"string"==typeof n&&(a=t[n],n=t,t=a),e.isFunction(t)?(i=p.call(arguments,2),r=function(){return t.apply(n||this,i.concat(p.call(arguments)))},r.guid=t.guid=t.guid||e.guid++,r):void 0},now:Date.now,support:a}),e.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){O["[object "+e+"]"]=e.toLowerCase()});var m=function(U){function n(n,e,t,C){var v,o,u,h,g,d,y,p,_,b;if((e?e.ownerDocument||e:l)!==i&&m(e),e=e||i,t=t||[],!n||"string"!=typeof n)return t;if(1!==(h=e.nodeType)&&9!==h)return[];if(c&&!C){if(v=yt.exec(n))if(u=v[1]){if(9===h){if(o=e.getElementById(u),!o||!o.parentNode)return t;if(o.id===u)return t.push(o),t}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(u))&&D(e,o)&&o.id===u)return t.push(o),t}else{if(v[2])return f.apply(t,e.getElementsByTagName(n)),t;if((u=v[3])&&r.getElementsByClassName&&e.getElementsByClassName)return f.apply(t,e.getElementsByClassName(u)),t}if(r.qsa&&(!s||!s.test(n))){if(p=y=a,_=e,b=9===h&&n,1===h&&"object"!==e.nodeName.toLowerCase()){for(d=x(n),(y=e.getAttribute("id"))?p=y.replace(_t,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",g=d.length;g--;)d[g]=p+P(d[g]);_=M.test(n)&&H(e.parentNode)||e,b=d.join(",")}if(b)try{return f.apply(t,_.querySelectorAll(b)),t}catch(w){}finally{y||e.removeAttribute("id")}}}return et(n.replace(N,"$1"),e,t,C)}function G(){function t(r,a){return n.push(r+" ")>e.cacheLength&&delete t[n.shift()],t[r+" "]=a}var n=[];return t}function u(e){return e[a]=!0,e}function o(t){var e=i.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function R(t,r){for(var a=t.split("|"),n=t.length;n--;)e.attrHandle[a[n]]=r}function X(t,n){var e=n&&t,r=e&&1===t.nodeType&&1===n.nodeType&&(~n.sourceIndex||at)-(~t.sourceIndex||at);if(r)return r;if(e)for(;e=e.nextSibling;)if(e===n)return-1;return t?1:-1}function Ct(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function bt(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function b(e){return u(function(t){return t=+t,u(function(n,s){for(var r,a=e([],n.length,t),i=a.length;i--;)n[r=a[i]]&&(n[r]=!(s[r]=n[r]))})})}function H(e){return e&&typeof e.getElementsByTagName!==A&&e}function it(){}function P(t){for(var e=0,r=t.length,n="";r>e;e++)n+=t[e].value;return n}function z(t,r,s){var e=r.dir,n=s&&"parentNode"===e,i=ot++;return r.first?function(r,a,i){for(;r=r[e];)if(1===r.nodeType||n)return t(r,a,i)}:function(r,c,o){var s,l,u=[d,i];if(o){for(;r=r[e];)if((1===r.nodeType||n)&&t(r,c,o))return!0}else for(;r=r[e];)if(1===r.nodeType||n){if(l=r[a]||(r[a]={}),(s=l[e])&&s[0]===d&&s[1]===i)return u[2]=s[2];if(l[e]=u,u[2]=t(r,c,o))return!0}}}function Y(e){return e.length>1?function(n,r,a){for(var t=e.length;t--;)if(!e[t](n,r,a))return!1;return!0}:e[0]}function ht(a,t,r){for(var e=0,i=t.length;i>e;e++)n(a,t[e],r);return r}function k(n,r,a,s,o){for(var t,i=[],e=0,l=n.length,u=null!=r;l>e;e++)(t=n[e])&&(!a||a(t,s,o))&&(i.push(t),u&&r.push(e));return i}function j(n,i,r,t,e,s){return t&&!t[a]&&(t=j(t)),e&&!e[a]&&(e=j(e,s)),u(function(p,c,u,d){var o,s,l,m=[],g=[],v=c.length,y=p||ht(i||"*",u.nodeType?[u]:u,[]),h=!n||!p&&i?y:k(y,m,n,u,d),a=r?e||(p?n:v||t)?[]:c:h;if(r&&r(h,a,u,d),t)for(o=k(a,g),t(o,[],u,d),s=o.length;s--;)(l=o[s])&&(a[g[s]]=!(h[g[s]]=l));if(p){if(e||n){if(e){for(o=[],s=a.length;s--;)(l=a[s])&&o.push(h[s]=l);e(null,a=[],o,d)}for(s=a.length;s--;)(l=a[s])&&(o=e?C.call(p,l):m[s])>-1&&(p[o]=!(c[o]=l))}}else a=k(a===c?a.splice(v,a.length):a),e?e(null,c,a,d):f.apply(c,a)})}function q(t){for(var l,i,r,o=t.length,u=e.relative[t[0].type],c=u||e.relative[" "],n=u?1:0,p=z(function(e){return e===l},c,!0),d=z(function(e){return C.call(l,e)>-1},c,!0),s=[function(n,e,t){return!u&&(t||e!==O)||((l=e).nodeType?p(n,e,t):d(n,e,t))}];o>n;n++)if(i=e.relative[t[n].type])s=[z(Y(s),i)];else{if(i=e.filter[t[n].type].apply(null,t[n].matches),i[a]){for(r=++n;o>r&&!e.relative[t[r].type];r++);return j(n>1&&Y(s),n>1&&P(t.slice(0,n-1).concat({value:" "===t[n-2].type?"*":""})).replace(N,"$1"),i,r>n&&q(t.slice(n,r)),o>r&&q(t=t.slice(r)),o>r&&P(t))}s.push(i)}return Y(s)}function lt(a,t){var r=t.length>0,s=a.length>0,o=function(h,v,_,y,p){var u,m,g,c=0,o="0",b=h&&[],l=[],C=O,w=h||s&&e.find.TAG("*",p),A=d+=null==C?1:Math.random()||.1,S=w.length;for(p&&(O=v!==i&&v);o!==S&&null!=(u=w[o]);o++){if(s&&u){for(m=0;g=a[m++];)if(g(u,v,_)){y.push(u);break}p&&(d=A)}r&&((u=!g&&u)&&c--,h&&b.push(u))}if(c+=o,r&&o!==c){for(m=0;g=t[m++];)g(b,l,v,_);if(h){if(c>0)for(;o--;)b[o]||l[o]||(l[o]=ut.call(y));l=k(l)}f.apply(y,l),p&&!h&&l.length>0&&c+t.length>1&&n.uniqueSort(y)}return p&&(d=A,O=C),b};return r?u(o):o
}var S,r,e,B,rt,x,L,et,O,y,T,m,i,p,c,s,_,I,D,a="sizzle"+-new Date,l=U.document,d=0,ot=0,Q=G(),Z=G(),tt=G(),V=function(e,t){return e===t&&(T=!0),0},A="undefined",at=1<<31,wt={}.hasOwnProperty,h=[],ut=h.pop,vt=h.push,f=h.push,J=h.slice,C=h.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},$="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",t="[\\x20\\t\\r\\n\\f]",w="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",K=w.replace("w","w#"),nt="\\["+t+"*("+w+")(?:"+t+"*([*^$|!~]?=)"+t+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+K+"))|)"+t+"*\\]",W=":("+w+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+nt+")*)|.*)\\)|)",N=new RegExp("^"+t+"+|((?:^|[^\\\\])(?:\\\\.)*)"+t+"+$","g"),st=new RegExp("^"+t+"*,"+t+"*"),ct=new RegExp("^"+t+"*([>+~]|"+t+")"+t+"*"),pt=new RegExp("="+t+"*([^\\]'\"]*?)"+t+"*\\]","g"),dt=new RegExp(W),ft=new RegExp("^"+K+"$"),E={ID:new RegExp("^#("+w+")"),CLASS:new RegExp("^\\.("+w+")"),TAG:new RegExp("^("+w.replace("w","w*")+")"),ATTR:new RegExp("^"+nt),PSEUDO:new RegExp("^"+W),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+t+"*(even|odd|(([+-]|)(\\d*)n|)"+t+"*(?:([+-]|)"+t+"*(\\d+)|))"+t+"*\\)|)","i"),bool:new RegExp("^(?:"+$+")$","i"),needsContext:new RegExp("^"+t+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+t+"*((?:-\\d)?\\d*)"+t+"*\\)|)(?=[^-]|$)","i")},gt=/^(?:input|select|textarea|button)$/i,mt=/^h\d$/i,F=/^[^{]+\{\s*\[native \w/,yt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,M=/[+~]/,_t=/'|\\/g,v=new RegExp("\\\\([\\da-f]{1,6}"+t+"?|("+t+")|.)","ig"),g=function(r,t,n){var e="0x"+t-65536;return e!==e||n?t:0>e?String.fromCharCode(e+65536):String.fromCharCode(e>>10|55296,1023&e|56320)};try{f.apply(h=J.call(l.childNodes),l.childNodes),h[l.childNodes.length].nodeType}catch(At){f={apply:h.length?function(e,t){vt.apply(e,J.call(t))}:function(e,n){for(var t=e.length,r=0;e[t++]=n[r++];);e.length=t-1}}}r=n.support={},rt=n.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},m=n.setDocument=function(d){var f,n=d?d.ownerDocument||d:l,u=n.defaultView;return n!==i&&9===n.nodeType&&n.documentElement?(i=n,p=n.documentElement,c=!rt(n),u&&u!==u.top&&(u.addEventListener?u.addEventListener("unload",function(){m()},!1):u.attachEvent&&u.attachEvent("onunload",function(){m()})),r.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),r.getElementsByTagName=o(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),r.getElementsByClassName=F.test(n.getElementsByClassName)&&o(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),r.getById=o(function(e){return p.appendChild(e).id=a,!n.getElementsByName||!n.getElementsByName(a).length}),r.getById?(e.find.ID=function(n,t){if(typeof t.getElementById!==A&&c){var e=t.getElementById(n);return e&&e.parentNode?[e]:[]}},e.filter.ID=function(e){var t=e.replace(v,g);return function(e){return e.getAttribute("id")===t}}):(delete e.find.ID,e.filter.ID=function(e){var t=e.replace(v,g);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),e.find.TAG=r.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==A?e.getElementsByTagName(t):void 0}:function(t,a){var e,n=[],i=0,r=a.getElementsByTagName(t);if("*"===t){for(;e=r[i++];)1===e.nodeType&&n.push(e);return n}return r},e.find.CLASS=r.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==A&&c?e.getElementsByClassName(t):void 0},_=[],s=[],(r.qsa=F.test(n.querySelectorAll))&&(o(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&s.push("[*^$]="+t+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||s.push("\\["+t+"*(?:value|"+$+")"),e.querySelectorAll(":checked").length||s.push(":checked")}),o(function(e){var r=n.createElement("input");r.setAttribute("type","hidden"),e.appendChild(r).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&s.push("name"+t+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||s.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),s.push(",.*:")})),(r.matchesSelector=F.test(I=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&o(function(e){r.disconnectedMatch=I.call(e,"div"),I.call(e,"[s!='']:x"),_.push("!=",W)}),s=s.length&&new RegExp(s.join("|")),_=_.length&&new RegExp(_.join("|")),f=F.test(p.compareDocumentPosition),D=f||F.test(p.contains)?function(e,n){var r=9===e.nodeType?e.documentElement:e,t=n&&n.parentNode;return e===t||!(!t||1!==t.nodeType||!(r.contains?r.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=f?function(e,t){if(e===t)return T=!0,0;var a=!e.compareDocumentPosition-!t.compareDocumentPosition;return a?a:(a=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&a||!r.sortDetached&&t.compareDocumentPosition(e)===a?e===n||e.ownerDocument===l&&D(l,e)?-1:t===n||t.ownerDocument===l&&D(l,t)?1:y?C.call(y,e)-C.call(y,t):0:4&a?-1:1)}:function(r,a){if(r===a)return T=!0,0;var e,t=0,o=r.parentNode,u=a.parentNode,i=[r],s=[a];if(!o||!u)return r===n?-1:a===n?1:o?-1:u?1:y?C.call(y,r)-C.call(y,a):0;if(o===u)return X(r,a);for(e=r;e=e.parentNode;)i.unshift(e);for(e=a;e=e.parentNode;)s.unshift(e);for(;i[t]===s[t];)t++;return t?X(i[t],s[t]):i[t]===l?-1:s[t]===l?1:0},n):i},n.matches=function(e,t){return n(e,null,null,t)},n.matchesSelector=function(e,t){if((e.ownerDocument||e)!==i&&m(e),t=t.replace(pt,"='$1']"),!(!r.matchesSelector||!c||_&&_.test(t)||s&&s.test(t)))try{var a=I.call(e,t);if(a||r.disconnectedMatch||e.document&&11!==e.document.nodeType)return a}catch(o){}return n(t,i,null,[e]).length>0},n.contains=function(e,t){return(e.ownerDocument||e)!==i&&m(e),D(e,t)},n.attr=function(t,n){(t.ownerDocument||t)!==i&&m(t);var s=e.attrHandle[n.toLowerCase()],a=s&&wt.call(e.attrHandle,n.toLowerCase())?s(t,n,!c):void 0;return void 0!==a?a:r.attributes||!c?t.getAttribute(n):(a=t.getAttributeNode(n))&&a.specified?a.value:null},n.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},n.uniqueSort=function(e){var a,i=[],t=0,n=0;if(T=!r.detectDuplicates,y=!r.sortStable&&e.slice(0),e.sort(V),T){for(;a=e[n++];)a===e[n]&&(t=i.push(n));for(;t--;)e.splice(i[t],1)}return y=null,e},B=n.getText=function(e){var r,n="",a=0,t=e.nodeType;if(t){if(1===t||9===t||11===t){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=B(e)}else if(3===t||4===t)return e.nodeValue}else for(;r=e[a++];)n+=B(r);return n},e=n.selectors={cacheLength:50,createPseudo:u,match:E,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(v,g),e[3]=(e[3]||e[4]||e[5]||"").replace(v,g),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||n.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&n.error(e[0]),e},PSEUDO:function(e){var n,t=!e[6]&&e[2];return E.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":t&&dt.test(t)&&(n=x(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(e[0]=e[0].slice(0,n),e[2]=t.slice(0,n)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(v,g).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var n=Q[e+" "];return n||(n=new RegExp("(^|"+t+")"+e+"("+t+"|$)"))&&Q(e,function(e){return n.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(r,t,e){return function(i){var a=n.attr(i,r);return null==a?"!="===t:t?(a+="","="===t?a===e:"!="===t?a!==e:"^="===t?e&&0===a.indexOf(e):"*="===t?e&&a.indexOf(e)>-1:"$="===t?e&&a.slice(-e.length)===e:"~="===t?(" "+a+" ").indexOf(e)>-1:"|="===t?a===e||a.slice(0,e.length+1)===e+"-":!1):!0}},CHILD:function(e,o,l,t,i){var s="nth"!==e.slice(0,3),r="last"!==e.slice(-4),n="of-type"===o;return 1===t&&0===i?function(e){return!!e.parentNode}:function(p,_,b){var c,m,o,l,u,h,g=s!==r?"nextSibling":"previousSibling",f=p.parentNode,y=n&&p.nodeName.toLowerCase(),v=!b&&!n;if(f){if(s){for(;g;){for(o=p;o=o[g];)if(n?o.nodeName.toLowerCase()===y:1===o.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[r?f.firstChild:f.lastChild],r&&v){for(m=f[a]||(f[a]={}),c=m[e]||[],u=c[0]===d&&c[1],l=c[0]===d&&c[2],o=u&&f.childNodes[u];o=++u&&o&&o[g]||(l=u=0)||h.pop();)if(1===o.nodeType&&++l&&o===p){m[e]=[d,u,l];break}}else if(v&&(c=(p[a]||(p[a]={}))[e])&&c[0]===d)l=c[1];else for(;(o=++u&&o&&o[g]||(l=u=0)||h.pop())&&((n?o.nodeName.toLowerCase()!==y:1!==o.nodeType)||!++l||(v&&((o[a]||(o[a]={}))[e]=[d,l]),o!==p)););return l-=i,l===t||l%t===0&&l/t>=0}}},PSEUDO:function(t,i){var s,r=e.pseudos[t]||e.setFilters[t.toLowerCase()]||n.error("unsupported pseudo: "+t);return r[a]?r(i):r.length>1?(s=[t,t,"",i],e.setFilters.hasOwnProperty(t.toLowerCase())?u(function(e,s){for(var t,n=r(e,i),a=n.length;a--;)t=C.call(e,n[a]),e[t]=!(s[t]=n[a])}):function(e){return r(e,0,s)}):r}},pseudos:{not:u(function(r){var t=[],n=[],e=L(r.replace(N,"$1"));return e[a]?u(function(n,a,o,i){for(var r,s=e(n,null,i,[]),t=n.length;t--;)(r=s[t])&&(n[t]=!(a[t]=r))}):function(r,i,a){return t[0]=r,e(t,null,a,n),!n.pop()}}),has:u(function(e){return function(t){return n(e,t).length>0}}),contains:u(function(e){return function(t){return(t.textContent||t.innerText||B(t)).indexOf(e)>-1}}),lang:u(function(e){return ft.test(e||"")||n.error("unsupported lang: "+e),e=e.replace(v,g).toLowerCase(),function(t){var n;do if(n=c?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=U.location&&U.location.hash;return e&&e.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===i.activeElement&&(!i.hasFocus||i.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(e){return mt.test(e.nodeName)},input:function(e){return gt.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:b(function(){return[0]}),last:b(function(t,e){return[e-1]}),eq:b(function(n,t,e){return[0>e?e+t:e]}),even:b(function(t,n){for(var e=0;n>e;e+=2)t.push(e);return t}),odd:b(function(t,n){for(var e=1;n>e;e+=2)t.push(e);return t}),lt:b(function(t,r,e){for(var n=0>e?e+r:e;--n>=0;)t.push(n);return t}),gt:b(function(t,n,e){for(var r=0>e?e+n:e;++r<n;)t.push(r);return t})}},e.pseudos.nth=e.pseudos.eq;for(S in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[S]=Ct(S);for(S in{submit:!0,reset:!0})e.pseudos[S]=bt(S);return it.prototype=e.filters=e.pseudos,e.setFilters=new it,x=n.tokenize=function(s,c){var a,r,o,i,t,l,u,p=Z[s+" "];if(p)return c?0:p.slice(0);for(t=s,l=[],u=e.preFilter;t;){(!a||(r=st.exec(t)))&&(r&&(t=t.slice(r[0].length)||t),l.push(o=[])),a=!1,(r=ct.exec(t))&&(a=r.shift(),o.push({value:a,type:r[0].replace(N," ")}),t=t.slice(a.length));for(i in e.filter)!(r=E[i].exec(t))||u[i]&&!(r=u[i](r))||(a=r.shift(),o.push({value:a,type:i,matches:r}),t=t.slice(a.length));if(!a)break}return c?t.length:t?n.error(s):Z(s,l).slice(0)},L=n.compile=function(t,n){var r,i=[],s=[],e=tt[t+" "];if(!e){for(n||(n=x(t)),r=n.length;r--;)e=q(n[r]),e[a]?i.push(e):s.push(e);e=tt(t,lt(s,i)),e.selector=t}return e},et=n.select=function(t,n,i,s){var l,a,o,d,h,p="function"==typeof t&&t,u=!s&&x(t=p.selector||t);if(i=i||[],1===u.length){if(a=u[0]=u[0].slice(0),a.length>2&&"ID"===(o=a[0]).type&&r.getById&&9===n.nodeType&&c&&e.relative[a[1].type]){if(n=(e.find.ID(o.matches[0].replace(v,g),n)||[])[0],!n)return i;p&&(n=n.parentNode),t=t.slice(a.shift().value.length)}for(l=E.needsContext.test(t)?0:a.length;l--&&(o=a[l],!e.relative[d=o.type]);)if((h=e.find[d])&&(s=h(o.matches[0].replace(v,g),M.test(a[0].type)&&H(n.parentNode)||n))){if(a.splice(l,1),t=s.length&&P(a),!t)return f.apply(i,s),i;break}}return(p||L(t,u))(s,n,!c,i,M.test(t)&&H(n.parentNode)||n),i},r.sortStable=a.split("").sort(V).join("")===a,r.detectDuplicates=!!T,m(),r.sortDetached=o(function(e){return 1&e.compareDocumentPosition(i.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||R("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),r.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||R("value",function(e,n,t){return t||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||R($,function(n,e,r){var t;return r?void 0:n[e]===!0?e.toLowerCase():(t=n.getAttributeNode(e))&&t.specified?t.value:null}),n}(r);e.find=m,e.expr=m.selectors,e.expr[":"]=e.expr.pseudos,e.unique=m.uniqueSort,e.text=m.getText,e.isXMLDoc=m.isXML,e.contains=m.contains;var Tt=e.expr.match.needsContext,Dt=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,gn=/^.[^:#\[\.,]*$/;e.filter=function(t,n,a){var r=n[0];return a&&(t=":not("+t+")"),1===n.length&&1===r.nodeType?e.find.matchesSelector(r,t)?[r]:[]:e.find.matches(t,e.grep(n,function(e){return 1===e.nodeType}))},e.fn.extend({find:function(r){var t,a=this.length,n=[],i=this;if("string"!=typeof r)return this.pushStack(e(r).filter(function(){for(t=0;a>t;t++)if(e.contains(i[t],this))return!0}));for(t=0;a>t;t++)e.find(r,i[t],n);return n=this.pushStack(a>1?e.unique(n):n),n.selector=this.selector?this.selector+" "+r:r,n},filter:function(e){return this.pushStack(K(this,e||[],!1))},not:function(e){return this.pushStack(K(this,e||[],!0))},is:function(t){return!!K(this,"string"==typeof t&&Tt.test(t)?e(t):t||[],!1).length}});var P,xn=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,Bn=e.fn.init=function(t,r){var a,i;if(!t)return this;if("string"==typeof t){if(a="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:xn.exec(t),!a||!a[1]&&r)return!r||r.jquery?(r||P).find(t):this.constructor(r).find(t);if(a[1]){if(r=r instanceof e?r[0]:r,e.merge(this,e.parseHTML(a[1],r&&r.nodeType?r.ownerDocument||r:n,!0)),Dt.test(a[1])&&e.isPlainObject(r))for(a in r)e.isFunction(this[a])?this[a](r[a]):this.attr(a,r[a]);return this}return i=n.getElementById(a[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=n,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):e.isFunction(t)?"undefined"!=typeof P.ready?P.ready(t):t(e):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),e.makeArray(t,this))};Bn.prototype=e.fn,P=e(n);var On=/^(?:parents|prev(?:Until|All))/,Mn={children:!0,contents:!0,next:!0,prev:!0};e.extend({dir:function(t,a,n){for(var r=[],i=void 0!==n;(t=t[a])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&e(t).is(n))break;r.push(t)}return r},sibling:function(e,n){for(var t=[];e;e=e.nextSibling)1===e.nodeType&&e!==n&&t.push(e);return t}}),e.fn.extend({has:function(n){var t=e(n,this),r=t.length;return this.filter(function(){for(var n=0;r>n;n++)if(e.contains(this,t[n]))return!0})},closest:function(n,i){for(var t,a=0,o=this.length,r=[],s=Tt.test(n)||"string"!=typeof n?e(n,i||this.context):0;o>a;a++)for(t=this[a];t&&t!==i;t=t.parentNode)if(t.nodeType<11&&(s?s.index(t)>-1:1===t.nodeType&&e.find.matchesSelector(t,n))){r.push(t);break}return this.pushStack(r.length>1?e.unique(r):r)},index:function(t){return t?"string"==typeof t?B.call(e(t),this[0]):B.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,n){return this.pushStack(e.unique(e.merge(this.get(),e(t,n))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),e.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return e.dir(t,"parentNode")},parentsUntil:function(t,r,n){return e.dir(t,"parentNode",n)},next:function(e){return Q(e,"nextSibling")},prev:function(e){return Q(e,"previousSibling")},nextAll:function(t){return e.dir(t,"nextSibling")},prevAll:function(t){return e.dir(t,"previousSibling")},nextUntil:function(t,r,n){return e.dir(t,"nextSibling",n)},prevUntil:function(t,r,n){return e.dir(t,"previousSibling",n)},siblings:function(t){return e.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return e.sibling(t.firstChild)},contents:function(t){return t.contentDocument||e.merge([],t.childNodes)}},function(t,n){e.fn[t]=function(i,a){var r=e.map(this,n,i);return"Until"!==t.slice(-5)&&(a=i),a&&"string"==typeof a&&(r=e.filter(a,r)),this.length>1&&(Mn[t]||e.unique(r),On.test(t)&&r.reverse()),this.pushStack(r)}});var u=/\S+/g,Et={};e.Callbacks=function(n){n="string"==typeof n?Et[n]||fn(n):e.extend({},n);var a,c,o,u,s,i,t=[],r=!n.once&&[],p=function(e){for(a=n.memory&&e,c=!0,i=u||0,u=0,s=t.length,o=!0;t&&s>i;i++)if(t[i].apply(e[0],e[1])===!1&&n.stopOnFalse){a=!1;break}o=!1,t&&(r?r.length&&p(r.shift()):a?t=[]:l.disable())},l={add:function(){if(t){var r=t.length;!function i(r){e.each(r,function(s,r){var a=e.type(r);"function"===a?n.unique&&l.has(r)||t.push(r):r&&r.length&&"string"!==a&&i(r)})}(arguments),o?s=t.length:a&&(u=r,p(a))}return this},remove:function(){return t&&e.each(arguments,function(a,r){for(var n;(n=e.inArray(r,t,n))>-1;)t.splice(n,1),o&&(s>=n&&s--,i>=n&&i--)}),this},has:function(n){return n?e.inArray(n,t)>-1:!(!t||!t.length)},empty:function(){return t=[],s=0,this},disable:function(){return t=r=a=void 0,this},disabled:function(){return!t},lock:function(){return r=void 0,a||l.disable(),this},locked:function(){return!r},fireWith:function(n,e){return!t||c&&!r||(e=e||[],e=[n,e.slice?e.slice():e],o?r.push(e):p(e)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},e.extend({Deferred:function(a){var r=[["resolve","done",e.Callbacks("once memory"),"resolved"],["reject","fail",e.Callbacks("once memory"),"rejected"],["notify","progress",e.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return t.done(arguments).fail(arguments),this},then:function(){var a=arguments;return e.Deferred(function(i){e.each(r,function(s,o){var r=e.isFunction(a[s])&&a[s];t[o[1]](function(){var t=r&&r.apply(this,arguments);t&&e.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,r?[t]:arguments)})}),a=null}).promise()},promise:function(t){return null!=t?e.extend(t,n):n}},t={};return n.pipe=n.then,e.each(r,function(o,e){var a=e[2],s=e[3];n[e[1]]=a.add,s&&a.add(function(){i=s},r[1^o][2].disable,r[2][2].lock),t[e[0]]=function(){return t[e[0]+"With"](this===t?n:this,arguments),this},t[e[0]+"With"]=a.fireWith}),n.promise(t),a&&a.call(t,t),t},when:function(s){var o,u,l,t=0,r=p.call(arguments),n=r.length,i=1!==n||s&&e.isFunction(s.promise)?n:0,a=1===i?s:e.Deferred(),c=function(n,t,e){return function(r){t[n]=this,e[n]=arguments.length>1?p.call(arguments):r,e===o?a.notifyWith(t,e):--i||a.resolveWith(t,e)}};if(n>1)for(o=new Array(n),u=new Array(n),l=new Array(n);n>t;t++)r[t]&&e.isFunction(r[t].promise)?r[t].promise().done(c(t,l,r)).fail(a.reject).progress(c(t,u,o)):--i;return i||a.resolveWith(l,r),a.promise()}});var N;e.fn.ready=function(t){return e.ready.promise().done(t),this},e.extend({isReady:!1,readyWait:1,holdReady:function(t){t?e.readyWait++:e.ready(!0)},ready:function(t){(t===!0?--e.readyWait:e.isReady)||(e.isReady=!0,t!==!0&&--e.readyWait>0||(N.resolveWith(n,[e]),e.fn.triggerHandler&&(e(n).triggerHandler("ready"),e(n).off("ready"))))}}),e.ready.promise=function(t){return N||(N=e.Deferred(),"complete"===n.readyState?setTimeout(e.ready):(n.addEventListener("DOMContentLoaded",R,!1),r.addEventListener("load",R,!1))),N.promise(t)},e.ready.promise();var d=e.access=function(n,t,a,i,l,u,s){var r=0,c=n.length,o=null==a;if("object"===e.type(a)){l=!0;for(r in a)e.access(n,t,r,a[r],!0,u,s)}else if(void 0!==i&&(l=!0,e.isFunction(i)||(s=!0),o&&(s?(t.call(n,i),t=null):(o=t,t=function(t,r,n){return o.call(e(t),n)})),t))for(;c>r;r++)t(n[r],a,s?i:i.call(n[r],r,t(n[r],a)));return l?n:o?t.call(n):c?t(n[0],a):u};e.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},h.uid=1,h.accepts=e.acceptData,h.prototype={key:function(n){if(!h.accepts(n))return 0;var r={},t=n[this.expando];if(!t){t=h.uid++;try{r[this.expando]={value:t},Object.defineProperties(n,r)}catch(a){r[this.expando]=t,e.extend(n,r)}}return this.cache[t]||(this.cache[t]={}),t},set:function(i,t,s){var r,a=this.key(i),n=this.cache[a];if("string"==typeof t)n[t]=s;else if(e.isEmptyObject(n))e.extend(this.cache[a],t);else for(r in t)n[r]=t[r];return n},get:function(n,e){var t=this.cache[this.key(n)];return void 0===e?t:t[e]},access:function(r,t,n){var a;return void 0===t||t&&"string"==typeof t&&void 0===n?(a=this.get(r,t),void 0!==a?a:this.get(r,e.camelCase(t))):(this.set(r,t,n),void 0!==n?n:t)},remove:function(o,n){var r,t,a,s=this.key(o),i=this.cache[s];if(void 0===n)this.cache[s]={};else{e.isArray(n)?t=n.concat(n.map(e.camelCase)):(a=e.camelCase(n),n in i?t=[n,a]:(t=a,t=t in i?[t]:t.match(u)||[])),r=t.length;for(;r--;)delete i[t[r]]}},hasData:function(t){return!e.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var t=new h,i=new h,Rn=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Qt=/([A-Z])/g;e.extend({hasData:function(e){return i.hasData(e)||t.hasData(e)},data:function(e,t,n){return i.access(e,t,n)},removeData:function(e,t){i.remove(e,t)},_data:function(e,n,r){return t.access(e,n,r)},_removeData:function(e,n){t.remove(e,n)}}),e.fn.extend({data:function(r,u){var s,a,o,n=this[0],l=n&&n.attributes;if(void 0===r){if(this.length&&(o=i.get(n),1===n.nodeType&&!t.get(n,"hasDataAttrs"))){for(s=l.length;s--;)l[s]&&(a=l[s].name,0===a.indexOf("data-")&&(a=e.camelCase(a.slice(5)),bt(n,a,o[a])));t.set(n,"hasDataAttrs",!0)}return o}return"object"==typeof r?this.each(function(){i.set(this,r)}):d(this,function(s){var t,a=e.camelCase(r);if(n&&void 0===s){if(t=i.get(n,r),void 0!==t)return t;if(t=i.get(n,a),void 0!==t)return t;if(t=bt(n,a,void 0),void 0!==t)return t}else this.each(function(){var e=i.get(this,a);i.set(this,a,s),-1!==r.indexOf("-")&&void 0!==e&&i.set(this,r,s)})},null,u,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){i.remove(this,e)})}}),e.extend({queue:function(i,r,a){var n;return i?(r=(r||"fx")+"queue",n=t.get(i,r),a&&(!n||e.isArray(a)?n=t.access(i,r,e.makeArray(a)):n.push(a)),n||[]):void 0},dequeue:function(n,t){t=t||"fx";var r=e.queue(n,t),s=r.length,a=r.shift(),i=e._queueHooks(n,t),o=function(){e.dequeue(n,t)};"inprogress"===a&&(a=r.shift(),s--),a&&("fx"===t&&r.unshift("inprogress"),delete i.stop,a.call(n,o,i)),!s&&i&&i.empty.fire()},_queueHooks:function(n,a){var r=a+"queueHooks";return t.get(n,r)||t.access(n,r,{empty:e.Callbacks("once memory").add(function(){t.remove(n,[a+"queue",r])})})}}),e.fn.extend({queue:function(t,n){var r=2;return"string"!=typeof t&&(n=t,t="fx",r--),arguments.length<r?e.queue(this[0],t):void 0===n?this:this.each(function(){var r=e.queue(this,t,n);e._queueHooks(this,t),"fx"===t&&"inprogress"!==r[0]&&e.dequeue(this,t)})},dequeue:function(t){return this.each(function(){e.dequeue(this,t)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(n,i){var r,s=1,o=e.Deferred(),a=this,l=this.length,u=function(){--s||o.resolveWith(a,[a])};for("string"!=typeof n&&(i=n,n=void 0),n=n||"fx";l--;)r=t.get(a[l],n+"queueHooks"),r&&r.empty&&(s++,r.empty.add(u));return u(),o.promise(i)}});var D=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,f=["Top","Right","Bottom","Left"],C=function(t,n){return t=n||t,"none"===e.css(t,"display")||!e.contains(t.ownerDocument,t)},rt=/^(?:checkbox|radio)$/i;!function(){var r=n.createDocumentFragment(),e=r.appendChild(n.createElement("div")),t=n.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),a.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",a.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var w="undefined";a.focusinBubbles="onfocusin"in r;var cn=/^key/,pn=/^(?:mouse|pointer|contextmenu)|click/,it=/^(?:focusinfocus|focusoutblur)$/,st=/^([^.]*)(?:\.(.+)|)$/;e.event={global:{},add:function(i,p,r,y,s){var f,d,m,h,g,l,a,o,n,v,b,c=t.get(i);if(c)for(r.handler&&(f=r,r=f.handler,s=f.selector),r.guid||(r.guid=e.guid++),(h=c.events)||(h=c.events={}),(d=c.handle)||(d=c.handle=function(t){return typeof e!==w&&e.event.triggered!==t.type?e.event.dispatch.apply(i,arguments):void 0}),p=(p||"").match(u)||[""],g=p.length;g--;)m=st.exec(p[g])||[],n=b=m[1],v=(m[2]||"").split(".").sort(),n&&(a=e.event.special[n]||{},n=(s?a.delegateType:a.bindType)||n,a=e.event.special[n]||{},l=e.extend({type:n,origType:b,data:y,handler:r,guid:r.guid,selector:s,needsContext:s&&e.expr.match.needsContext.test(s),namespace:v.join(".")},f),(o=h[n])||(o=h[n]=[],o.delegateCount=0,a.setup&&a.setup.call(i,y,v,d)!==!1||i.addEventListener&&i.addEventListener(n,d,!1)),a.add&&(a.add.call(i,l),l.handler.guid||(l.handler.guid=r.guid)),s?o.splice(o.delegateCount++,0,l):o.push(l),e.event.global[n]=!0)},remove:function(a,p,g,c,b){var h,v,s,d,f,r,i,o,n,m,y,l=t.hasData(a)&&t.get(a);if(l&&(d=l.events)){for(p=(p||"").match(u)||[""],f=p.length;f--;)if(s=st.exec(p[f])||[],n=y=s[1],m=(s[2]||"").split(".").sort(),n){for(i=e.event.special[n]||{},n=(c?i.delegateType:i.bindType)||n,o=d[n]||[],s=s[2]&&new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"),v=h=o.length;h--;)r=o[h],!b&&y!==r.origType||g&&g.guid!==r.guid||s&&!s.test(r.namespace)||c&&c!==r.selector&&("**"!==c||!r.selector)||(o.splice(h,1),r.selector&&o.delegateCount--,i.remove&&i.remove.call(a,r));v&&!o.length&&(i.teardown&&i.teardown.call(a,m,l.handle)!==!1||e.removeEvent(a,n,l.handle),delete d[n])}else for(n in d)e.event.remove(a,n+p[f],g,c,!0);e.isEmptyObject(d)&&(delete l.handle,t.remove(a,"events"))}},trigger:function(a,c,i,g){var m,o,l,v,p,d,u,h=[i||n],s=J.call(a,"type")?a.type:a,f=J.call(a,"namespace")?a.namespace.split("."):[];if(o=l=i=i||n,3!==i.nodeType&&8!==i.nodeType&&!it.test(s+e.event.triggered)&&(s.indexOf(".")>=0&&(f=s.split("."),s=f.shift(),f.sort()),p=s.indexOf(":")<0&&"on"+s,a=a[e.expando]?a:new e.Event(s,"object"==typeof a&&a),a.isTrigger=g?2:3,a.namespace=f.join("."),a.namespace_re=a.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,a.result=void 0,a.target||(a.target=i),c=null==c?[a]:e.makeArray(c,[a]),u=e.event.special[s]||{},g||!u.trigger||u.trigger.apply(i,c)!==!1)){if(!g&&!u.noBubble&&!e.isWindow(i)){for(v=u.delegateType||s,it.test(v+s)||(o=o.parentNode);o;o=o.parentNode)h.push(o),l=o;l===(i.ownerDocument||n)&&h.push(l.defaultView||l.parentWindow||r)}for(m=0;(o=h[m++])&&!a.isPropagationStopped();)a.type=m>1?v:u.bindType||s,d=(t.get(o,"events")||{})[a.type]&&t.get(o,"handle"),d&&d.apply(o,c),d=p&&o[p],d&&d.apply&&e.acceptData(o)&&(a.result=d.apply(o,c),a.result===!1&&a.preventDefault());return a.type=s,g||a.isDefaultPrevented()||u._default&&u._default.apply(h.pop(),c)!==!1||!e.acceptData(i)||p&&e.isFunction(i[s])&&!e.isWindow(i)&&(l=i[p],l&&(i[p]=null),e.event.triggered=s,i[s](),e.event.triggered=void 0,l&&(i[p]=l)),a.result}},dispatch:function(n){n=e.event.fix(n);var o,l,s,a,r,u=[],c=p.call(arguments),d=(t.get(this,"events")||{})[n.type]||[],i=e.event.special[n.type]||{};if(c[0]=n,n.delegateTarget=this,!i.preDispatch||i.preDispatch.call(this,n)!==!1){for(u=e.event.handlers.call(this,n,d),o=0;(a=u[o++])&&!n.isPropagationStopped();)for(n.currentTarget=a.elem,l=0;(r=a.handlers[l++])&&!n.isImmediatePropagationStopped();)(!n.namespace_re||n.namespace_re.test(r.namespace))&&(n.handleObj=r,n.data=r.data,s=((e.event.special[r.origType]||{}).handle||r.handler).apply(a.elem,c),void 0!==s&&(n.result=s)===!1&&(n.preventDefault(),n.stopPropagation()));return i.postDispatch&&i.postDispatch.call(this,n),n.result}},handlers:function(a,i){var s,n,r,o,u=[],l=i.delegateCount,t=a.target;if(l&&t.nodeType&&(!a.button||"click"!==a.type))for(;t!==this;t=t.parentNode||this)if(t.disabled!==!0||"click"!==a.type){for(n=[],s=0;l>s;s++)o=i[s],r=o.selector+" ",void 0===n[r]&&(n[r]=o.needsContext?e(r,this).index(t)>=0:e.find(r,this,null,[t]).length),n[r]&&n.push(o);n.length&&u.push({elem:t,handlers:n})}return l<i.length&&u.push({elem:this,handlers:i.slice(l)}),u},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(r,a){var s,e,t,i=a.button;return null==r.pageX&&null!=a.clientX&&(s=r.target.ownerDocument||n,e=s.documentElement,t=s.body,r.pageX=a.clientX+(e&&e.scrollLeft||t&&t.scrollLeft||0)-(e&&e.clientLeft||t&&t.clientLeft||0),r.pageY=a.clientY+(e&&e.scrollTop||t&&t.scrollTop||0)-(e&&e.clientTop||t&&t.clientTop||0)),r.which||void 0===i||(r.which=1&i?1:2&i?3:4&i?2:0),r}},fix:function(t){if(t[e.expando])return t;var i,s,o,a=t.type,l=t,r=this.fixHooks[a];for(r||(this.fixHooks[a]=r=pn.test(a)?this.mouseHooks:cn.test(a)?this.keyHooks:{}),o=r.props?this.props.concat(r.props):this.props,t=new e.Event(l),i=o.length;i--;)s=o[i],t[s]=l[s];return t.target||(t.target=n),3===t.target.nodeType&&(t.target=t.target.parentNode),r.filter?r.filter(t,l):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==yt()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===yt()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&e.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return e.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(a,n,r,i){var t=e.extend(new e.Event,r,{type:a,isSimulated:!0,originalEvent:{}});i?e.event.trigger(t,null,n):e.event.dispatch.call(n,t),t.isDefaultPrevented()&&r.preventDefault()}},e.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},e.Event=function(t,n){return this instanceof e.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?M:v):this.type=t,n&&e.extend(this,n),this.timeStamp=t&&t.timeStamp||e.now(),void(this[e.expando]=!0)):new e.Event(t,n)},e.Event.prototype={isDefaultPrevented:v,isPropagationStopped:v,isImmediatePropagationStopped:v,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=M,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=M,e&&e.stopPropagation&&e.stopPropagation()
},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=M,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},e.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,t){e.event.special[n]={delegateType:t,bindType:t,handle:function(n){var a,i=this,r=n.relatedTarget,s=n.handleObj;return(!r||r!==i&&!e.contains(i,r))&&(n.type=s.origType,a=s.handler.apply(this,arguments),n.type=t),a}}}),a.focusinBubbles||e.each({focus:"focusin",blur:"focusout"},function(r,n){var a=function(t){e.event.simulate(n,t.target,e.event.fix(t),!0)};e.event.special[n]={setup:function(){var e=this.ownerDocument||this,i=t.access(e,n);i||e.addEventListener(r,a,!0),t.access(e,n,(i||0)+1)},teardown:function(){var e=this.ownerDocument||this,i=t.access(e,n)-1;i?t.access(e,n,i):(e.removeEventListener(r,a,!0),t.remove(e,n))}}}),e.fn.extend({on:function(a,n,r,t,o){var i,s;if("object"==typeof a){"string"!=typeof n&&(r=r||n,n=void 0);for(s in a)this.on(s,n,r,a[s],o);return this}if(null==r&&null==t?(t=n,r=n=void 0):null==t&&("string"==typeof n?(t=r,r=void 0):(t=r,r=n,n=void 0)),t===!1)t=v;else if(!t)return this;return 1===o&&(i=t,t=function(t){return e().off(t),i.apply(this,arguments)},t.guid=i.guid||(i.guid=e.guid++)),this.each(function(){e.event.add(this,a,t,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(t,r,a){var n,i;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,e(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(i in t)this.off(i,r,t[i]);return this}return(r===!1||"function"==typeof r)&&(a=r,r=void 0),a===!1&&(a=v),this.each(function(){e.event.remove(this,t,a,r)})},trigger:function(t,n){return this.each(function(){e.event.trigger(t,n,this)})},triggerHandler:function(n,r){var t=this[0];return t?e.event.trigger(n,r,t,!0):void 0}});var ot=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,lt=/<([\w:]+)/,Cn=/<|&#?\w+;/,wn=/<(?:script|style|link)/i,An=/checked\s*(?:[^=]|=\s*.checked.)/i,ut=/^$|\/(?:java|ecma)script/i,kn=/^true\/(.*)/,Nn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,l={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};l.optgroup=l.option,l.tbody=l.tfoot=l.colgroup=l.caption=l.thead,l.th=l.td,e.extend({clone:function(t,u,c){var n,l,i,r,s=t.cloneNode(!0),p=e.contains(t.ownerDocument,t);if(!(a.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||e.isXMLDoc(t)))for(r=o(s),i=o(t),n=0,l=i.length;l>n;n++)ln(i[n],r[n]);if(u)if(c)for(i=i||o(t),r=r||o(s),n=0,l=i.length;l>n;n++)jt(i[n],r[n]);else jt(t,s);return r=o(s,"script"),r.length>0&&H(r,!p&&o(t,"script")),s},buildFragment:function(d,c,f,g){for(var t,n,h,i,p,s,r=c.createDocumentFragment(),u=[],a=0,m=d.length;m>a;a++)if(t=d[a],t||0===t)if("object"===e.type(t))e.merge(u,t.nodeType?[t]:t);else if(Cn.test(t)){for(n=n||r.appendChild(c.createElement("div")),h=(lt.exec(t)||["",""])[1].toLowerCase(),i=l[h]||l._default,n.innerHTML=i[1]+t.replace(ot,"<$1></$2>")+i[2],s=i[0];s--;)n=n.lastChild;e.merge(u,n.childNodes),n=r.firstChild,n.textContent=""}else u.push(c.createTextNode(t));for(r.textContent="",a=0;t=u[a++];)if((!g||-1===e.inArray(t,g))&&(p=e.contains(t.ownerDocument,t),n=o(r.appendChild(t),"script"),p&&H(n),f))for(s=0;t=n[s++];)ut.test(t.type||"")&&f.push(t);return r},cleanData:function(l){for(var a,n,s,r,u=e.event.special,o=0;void 0!==(n=l[o]);o++){if(e.acceptData(n)&&(r=n[t.expando],r&&(a=t.cache[r]))){if(a.events)for(s in a.events)u[s]?e.event.remove(n,s):e.removeEvent(n,s,a.handle);t.cache[r]&&delete t.cache[r]}delete i.cache[n[i.expando]]}}}),e.fn.extend({text:function(t){return d(this,function(t){return void 0===t?e.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Lt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(n,r){for(var t,i=n?e.filter(n,this):this,a=0;null!=(t=i[a]);a++)r||1!==t.nodeType||e.cleanData(o(t)),t.parentNode&&(r&&e.contains(t.ownerDocument,t)&&H(o(t,"script")),t.parentNode.removeChild(t));return this},empty:function(){for(var t,n=0;null!=(t=this[n]);n++)1===t.nodeType&&(e.cleanData(o(t,!1)),t.textContent="");return this},clone:function(t,n){return t=null==t?!1:t,n=null==n?t:n,this.map(function(){return e.clone(this,t,n)})},html:function(t){return d(this,function(t){var n=this[0]||{},r=0,a=this.length;if(void 0===t&&1===n.nodeType)return n.innerHTML;if("string"==typeof t&&!wn.test(t)&&!l[(lt.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(ot,"<$1></$2>");try{for(;a>r;r++)n=this[r]||{},1===n.nodeType&&(e.cleanData(o(n,!1)),n.innerHTML=t);n=0}catch(i){}}n&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(n){t=this.parentNode,e.cleanData(o(this)),t&&t.replaceChild(n,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(s,f){s=at.apply([],s);var l,d,i,u,n,g,r=0,c=this.length,v=this,m=c-1,p=s[0],h=e.isFunction(p);if(h||c>1&&"string"==typeof p&&!a.checkClone&&An.test(p))return this.each(function(e){var t=v.eq(e);h&&(s[0]=p.call(this,e,t.html())),t.domManip(s,f)});if(c&&(l=e.buildFragment(s,this[0].ownerDocument,!1,this),d=l.firstChild,1===l.childNodes.length&&(l=d),d)){for(i=e.map(o(l,"script"),Xt),u=i.length;c>r;r++)n=l,r!==m&&(n=e.clone(n,!0,!0),u&&e.merge(i,o(n,"script"))),f.call(this[r],n,r);if(u)for(g=i[i.length-1].ownerDocument,e.map(i,dn),r=0;u>r;r++)n=i[r],ut.test(n.type||"")&&!t.access(n,"globalEval")&&e.contains(g,n)&&(n.src?e._evalUrl&&e._evalUrl(n.src):e.globalEval(n.textContent.replace(Nn,"")))}return this}}),e.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,n){e.fn[t]=function(o){for(var r,a=[],i=e(o),s=i.length-1,t=0;s>=t;t++)r=t===s?this:this.clone(!0),e(i[t])[n](r),q.apply(a,r.get());return this.pushStack(a)}});var F,dt={},ft=/^margin/,Z=new RegExp("^("+D+")(?!px)[a-z%]+$","i"),E=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function l(){t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",t.innerHTML="",s.appendChild(i);var e=r.getComputedStyle(t,null);u="1%"!==e.top,o="4px"===e.width,s.removeChild(i)}var u,o,s=n.documentElement,i=n.createElement("div"),t=n.createElement("div");t.style&&(t.style.backgroundClip="content-box",t.cloneNode(!0).style.backgroundClip="",a.clearCloneStyle="content-box"===t.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(t),r.getComputedStyle&&e.extend(a,{pixelPosition:function(){return l(),u},boxSizingReliable:function(){return null==o&&l(),o},reliableMarginRight:function(){var a,e=t.appendChild(n.createElement("div"));return e.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",t.style.width="1px",s.appendChild(i),a=!parseFloat(r.getComputedStyle(e,null).marginRight),s.removeChild(i),a}}))}(),e.swap=function(t,n,i,s){var r,e,a={};for(e in n)a[e]=t.style[e],t.style[e]=n[e];r=i.apply(t,s||[]);for(e in n)t.style[e]=a[e];return r};var Gt=/^(none|table(?!-c[ea]).+)/,zt=new RegExp("^("+D+")(.*)$","i"),Vt=new RegExp("^([+-])=("+D+")","i"),Yt={position:"absolute",visibility:"hidden",display:"block"},mt={letterSpacing:"0",fontWeight:"400"},vt=["Webkit","O","Moz","ms"];e.extend({cssHooks:{opacity:{get:function(t,n){if(n){var e=_(t,"opacity");return""===e?"1":e}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(n,r,t,c){if(n&&3!==n.nodeType&&8!==n.nodeType&&n.style){var s,l,i,o=e.camelCase(r),u=n.style;return r=e.cssProps[o]||(e.cssProps[o]=nt(u,o)),i=e.cssHooks[r]||e.cssHooks[o],void 0===t?i&&"get"in i&&void 0!==(s=i.get(n,!1,c))?s:u[r]:(l=typeof t,"string"===l&&(s=Vt.exec(t))&&(t=(s[1]+1)*s[2]+parseFloat(e.css(n,r)),l="number"),null!=t&&t===t&&("number"!==l||e.cssNumber[o]||(t+="px"),a.clearCloneStyle||""!==t||0!==r.indexOf("background")||(u[r]="inherit"),i&&"set"in i&&void 0===(t=i.set(n,t,c))||(u[r]=t)),void 0)}},css:function(s,n,r,l){var t,o,a,i=e.camelCase(n);return n=e.cssProps[i]||(e.cssProps[i]=nt(s.style,i)),a=e.cssHooks[n]||e.cssHooks[i],a&&"get"in a&&(t=a.get(s,!0,r)),void 0===t&&(t=_(s,n,l)),"normal"===t&&n in mt&&(t=mt[n]),""===r||r?(o=parseFloat(t),r===!0||e.isNumeric(o)?o||0:t):t}}),e.each(["height","width"],function(n,t){e.cssHooks[t]={get:function(n,a,r){return a?Gt.test(e.css(n,"display"))&&0===n.offsetWidth?e.swap(n,Yt,function(){return ht(n,t,r)}):ht(n,t,r):void 0},set:function(n,i,r){var a=r&&E(n);return ct(n,i,r?pt(n,t,r,"border-box"===e.css(n,"boxSizing",!1,a),a):0)}}}),e.cssHooks.marginRight=tt(a.reliableMarginRight,function(t,n){return n?e.swap(t,{display:"inline-block"},_,[t,"marginRight"]):void 0}),e.each({margin:"",padding:"",border:"Width"},function(t,n){e.cssHooks[t+n]={expand:function(r){for(var e=0,i={},a="string"==typeof r?r.split(" "):[r];4>e;e++)i[t+f[e]+n]=a[e]||a[e-2]||a[0];return i}},ft.test(t)||(e.cssHooks[t+n].set=ct)}),e.fn.extend({css:function(t,n){return d(this,function(n,t,a){var i,s,o={},r=0;if(e.isArray(t)){for(i=E(n),s=t.length;s>r;r++)o[t[r]]=e.css(n,t[r],!1,i);return o}return void 0!==a?e.style(n,t,a):e.css(n,t)},t,n,arguments.length>1)},show:function(){return gt(this,!0)},hide:function(){return gt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){C(this)?e(this).show():e(this).hide()})}}),e.Tween=s,s.prototype={constructor:s,init:function(n,r,t,a,i,s){this.elem=n,this.prop=t,this.easing=i||"swing",this.options=r,this.start=this.now=this.cur(),this.end=a,this.unit=s||(e.cssNumber[t]?"":"px")},cur:function(){var e=s.propHooks[this.prop];return e&&e.get?e.get(this):s.propHooks._default.get(this)},run:function(t){var r,n=s.propHooks[this.prop];return this.pos=r=this.options.duration?e.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*r+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):s.propHooks._default.set(this),this}},s.prototype.init.prototype=s.prototype,s.propHooks={_default:{get:function(t){var n;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(n=e.css(t.elem,t.prop,""),n&&"auto"!==n?n:0):t.elem[t.prop]},set:function(t){e.fx.step[t.prop]?e.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[e.cssProps[t.prop]]||e.cssHooks[t.prop])?e.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},s.propHooks.scrollTop=s.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},e.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},e.fx=s.prototype.init,e.fx.step={};var y,k,Zt=/^(?:toggle|show|hide)$/,_t=new RegExp("^(?:([+-])=|)("+D+")([a-z%]*)$","i"),en=/queueHooks$/,I=[Wt],A={"*":[function(s,l){var r=this.createTween(s,l),o=r.cur(),t=_t.exec(l),a=t&&t[3]||(e.cssNumber[s]?"":"px"),n=(e.cssNumber[s]||"px"!==a&&+o)&&_t.exec(e.css(r.elem,s)),i=1,u=20;if(n&&n[3]!==a){a=a||n[3],t=t||[],n=+o||1;do i=i||".5",n/=i,e.style(r.elem,s,n+a);while(i!==(i=r.cur()/o)&&1!==i&&--u)}return t&&(n=r.start=+n||+o||0,r.unit=a,r.end=t[1]?n+(t[1]+1)*t[2]:+t[2]),r}]};e.Animation=e.extend(Ft,{tweener:function(t,a){e.isFunction(t)?(a=t,t=["*"]):t=t.split(" ");for(var n,r=0,i=t.length;i>r;r++)n=t[r],A[n]=A[n]||[],A[n].unshift(a)},prefilter:function(e,t){t?I.unshift(e):I.push(e)}}),e.speed=function(n,r,a){var t=n&&"object"==typeof n?e.extend({},n):{complete:a||!a&&r||e.isFunction(n)&&n,duration:n,easing:a&&r||r&&!e.isFunction(r)&&r};return t.duration=e.fx.off?0:"number"==typeof t.duration?t.duration:t.duration in e.fx.speeds?e.fx.speeds[t.duration]:e.fx.speeds._default,(null==t.queue||t.queue===!0)&&(t.queue="fx"),t.old=t.complete,t.complete=function(){e.isFunction(t.old)&&t.old.call(this),t.queue&&e.dequeue(this,t.queue)},t},e.fn.extend({fadeTo:function(e,t,n,r){return this.filter(C).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(a,s,o,l){var i=e.isEmptyObject(a),r=e.speed(s,o,l),n=function(){var n=Ft(this,e.extend({},a),r);(i||t.get(this,"finish"))&&n.stop(!0)};return n.finish=n,i||r.queue===!1?this.each(n):this.queue(r.queue,n)},stop:function(n,a,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof n&&(r=a,a=n,n=void 0),a&&n!==!1&&this.queue(n||"fx",[]),this.each(function(){var l=!0,a=null!=n&&n+"queueHooks",o=e.timers,s=t.get(this);if(a)s[a]&&s[a].stop&&i(s[a]);else for(a in s)s[a]&&s[a].stop&&en.test(a)&&i(s[a]);for(a=o.length;a--;)o[a].elem!==this||null!=n&&o[a].queue!==n||(o[a].anim.stop(r),l=!1,o.splice(a,1));(l||!r)&&e.dequeue(this,n)})},finish:function(n){return n!==!1&&(n=n||"fx"),this.each(function(){var r,s=t.get(this),a=s[n+"queue"],o=s[n+"queueHooks"],i=e.timers,l=a?a.length:0;for(s.finish=!0,e.queue(this,n,[]),o&&o.stop&&o.stop.call(this,!0),r=i.length;r--;)i[r].elem===this&&i[r].queue===n&&(i[r].anim.stop(!0),i.splice(r,1));for(r=0;l>r;r++)a[r]&&a[r].finish&&a[r].finish.call(this);delete s.finish})}}),e.each(["toggle","show","hide"],function(r,t){var n=e.fn[t];e.fn[t]=function(e,r,a){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(x(t,!0),e,r,a)}}),e.each({slideDown:x("show"),slideUp:x("hide"),slideToggle:x("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,n){e.fn[t]=function(e,t,r){return this.animate(n,e,t,r)}}),e.timers=[],e.fx.tick=function(){var r,t=0,n=e.timers;for(y=e.now();t<n.length;t++)r=n[t],r()||n[t]!==r||n.splice(t--,1);n.length||e.fx.stop(),y=void 0},e.fx.timer=function(t){e.timers.push(t),t()?e.fx.start():e.timers.pop()},e.fx.interval=13,e.fx.start=function(){k||(k=setInterval(e.fx.tick,e.fx.interval))},e.fx.stop=function(){clearInterval(k),k=null},e.fx.speeds={slow:600,fast:200,_default:400},e.fn.delay=function(t,n){return t=e.fx?e.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(e,n){var r=setTimeout(e,t);n.stop=function(){clearTimeout(r)}})},function(){var e=n.createElement("input"),t=n.createElement("select"),r=t.appendChild(n.createElement("option"));e.type="checkbox",a.checkOn=""!==e.value,a.optSelected=r.selected,t.disabled=!0,a.optDisabled=!r.disabled,e=n.createElement("input"),e.value="t",e.type="radio",a.radioValue="t"===e.value}();var rn,At,S=e.expr.attrHandle;e.fn.extend({attr:function(t,n){return d(this,e.attr,t,n,arguments.length>1)},removeAttr:function(t){return this.each(function(){e.removeAttr(this,t)})}}),e.extend({attr:function(t,n,i){var r,a,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return typeof t.getAttribute===w?e.prop(t,n,i):(1===s&&e.isXMLDoc(t)||(n=n.toLowerCase(),r=e.attrHooks[n]||(e.expr.match.bool.test(n)?At:rn)),void 0===i?r&&"get"in r&&null!==(a=r.get(t,n))?a:(a=e.find.attr(t,n),null==a?void 0:a):null!==i?r&&"set"in r&&void 0!==(a=r.set(t,i,n))?a:(t.setAttribute(n,i+""),i):void e.removeAttr(t,n))},removeAttr:function(n,r){var t,a,s=0,i=r&&r.match(u);if(i&&1===n.nodeType)for(;t=i[s++];)a=e.propFix[t]||t,e.expr.match.bool.test(t)&&(n[a]=!1),n.removeAttribute(t)},attrHooks:{type:{set:function(t,n){if(!a.radioValue&&"radio"===n&&e.nodeName(t,"input")){var r=t.value;return t.setAttribute("type",n),r&&(t.value=r),n}}}}}),At={set:function(n,r,t){return r===!1?e.removeAttr(n,t):n.setAttribute(t,t),t}},e.each(e.expr.match.bool.source.match(/\w+/g),function(r,t){var n=S[t]||e.find.attr;S[t]=function(i,e,r){var t,a;return r||(a=S[e],S[e]=t,t=null!=n(i,e,r)?e.toLowerCase():null,S[e]=a),t}});var on=/^(?:input|select|textarea|button)$/i;e.fn.extend({prop:function(t,n){return d(this,e.prop,t,n,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[e.propFix[t]||t]})}}),e.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(n,t,s){var a,r,o,i=n.nodeType;if(n&&3!==i&&8!==i&&2!==i)return o=1!==i||!e.isXMLDoc(n),o&&(t=e.propFix[t]||t,r=e.propHooks[t]),void 0!==s?r&&"set"in r&&void 0!==(a=r.set(n,s,t))?a:n[t]=s:r&&"get"in r&&null!==(a=r.get(n,t))?a:n[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||on.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),a.optSelected||(e.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),e.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){e.propFix[this.toLowerCase()]=this});var z=/[\t\r\n\f]/g;e.fn.extend({addClass:function(n){var o,t,r,a,l,i,c="string"==typeof n&&n,s=0,p=this.length;if(e.isFunction(n))return this.each(function(t){e(this).addClass(n.call(this,t,this.className))});if(c)for(o=(n||"").match(u)||[];p>s;s++)if(t=this[s],r=1===t.nodeType&&(t.className?(" "+t.className+" ").replace(z," "):" ")){for(l=0;a=o[l++];)r.indexOf(" "+a+" ")<0&&(r+=a+" ");i=e.trim(r),t.className!==i&&(t.className=i)}return this},removeClass:function(t){var o,n,r,a,l,i,c=0===arguments.length||"string"==typeof t&&t,s=0,p=this.length;if(e.isFunction(t))return this.each(function(n){e(this).removeClass(t.call(this,n,this.className))});if(c)for(o=(t||"").match(u)||[];p>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(z," "):"")){for(l=0;a=o[l++];)for(;r.indexOf(" "+a+" ")>=0;)r=r.replace(" "+a+" "," ");i=t?e.trim(r):"",n.className!==i&&(n.className=i)}return this},toggleClass:function(n,r){var a=typeof n;return"boolean"==typeof r&&"string"===a?r?this.addClass(n):this.removeClass(n):this.each(e.isFunction(n)?function(t){e(this).toggleClass(n.call(this,t,this.className,r),r)}:function(){if("string"===a)for(var r,s=0,i=e(this),o=n.match(u)||[];r=o[s++];)i.hasClass(r)?i.removeClass(r):i.addClass(r);else(a===w||"boolean"===a)&&(this.className&&t.set(this,"__className__",this.className),this.className=this.className||n===!1?"":t.get(this,"__className__")||"")})},hasClass:function(t){for(var n=" "+t+" ",e=0,r=this.length;r>e;e++)if(1===this[e].nodeType&&(" "+this[e].className+" ").replace(z," ").indexOf(n)>=0)return!0;return!1}});var un=/\r/g;e.fn.extend({val:function(a){var t,n,i,r=this[0];{if(arguments.length)return i=e.isFunction(a),this.each(function(r){var n;1===this.nodeType&&(n=i?a.call(this,r,e(this).val()):a,null==n?n="":"number"==typeof n?n+="":e.isArray(n)&&(n=e.map(n,function(e){return null==e?"":e+""})),t=e.valHooks[this.type]||e.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))});if(r)return t=e.valHooks[r.type]||e.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(un,""):null==n?"":n)}}}),e.extend({valHooks:{option:{get:function(t){var n=e.find.attr(t,"value");return null!=n?n:e.trim(e.text(t))}},select:{get:function(s){for(var o,t,l=s.options,n=s.selectedIndex,r="select-one"===s.type||0>n,u=r?null:[],c=r?n+1:l.length,i=0>n?c:r?n:0;c>i;i++)if(t=l[i],!(!t.selected&&i!==n||(a.optDisabled?t.disabled:null!==t.getAttribute("disabled"))||t.parentNode.disabled&&e.nodeName(t.parentNode,"optgroup"))){if(o=e(t).val(),r)return o;u.push(o)}return u},set:function(n,o){for(var r,t,a=n.options,i=e.makeArray(o),s=a.length;s--;)t=a[s],(t.selected=e.inArray(t.value,i)>=0)&&(r=!0);return r||(n.selectedIndex=-1),i}}}}),e.each(["radio","checkbox"],function(){e.valHooks[this]={set:function(t,n){return e.isArray(n)?t.checked=e.inArray(e(t).val(),n)>=0:void 0}},a.checkOn||(e.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),e.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(n,t){e.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),e.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var V=e.now(),Y=/\?/;e.parseJSON=function(e){return JSON.parse(e+"")},e.parseXML=function(n){var t,r;if(!n||"string"!=typeof n)return null;try{r=new DOMParser,t=r.parseFromString(n,"text/xml")}catch(a){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+n),t};var g,c,hn=/#.*$/,Pt=/([?&])_=[^&]*/,mn=/^(.*?):[ \t]*([^\r\n]*)$/gm,vn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,yn=/^(?:GET|HEAD)$/,bn=/^\/\//,kt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,It={},X={},Bt="*/".concat("*");try{c=location.href}catch(jn){c=n.createElement("a"),c.href="",c=c.href}g=kt.exec(c.toLowerCase())||[],e.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:c,type:"GET",isLocal:vn.test(g[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":e.parseJSON,"text xml":e.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,n){return n?j(j(t,e.ajaxSettings),n):j(e.ajaxSettings,t)},ajaxPrefilter:Nt(It),ajaxTransport:Nt(X),ajax:function(h,i){function f(i,g,m,A){var l,h,f,u,c,o=g;2!==a&&(a=2,_&&clearTimeout(_),p=void 0,C=A||"",n.readyState=i>0?4:0,l=i>=200&&300>i||304===i,m&&(u=_n(t,n,m)),u=Ut(t,u,n,l),l?(t.ifModified&&(c=n.getResponseHeader("Last-Modified"),c&&(e.lastModified[r]=c),c=n.getResponseHeader("etag"),c&&(e.etag[r]=c)),204===i||"HEAD"===t.type?o="nocontent":304===i?o="notmodified":(o=u.state,h=u.data,f=u.error,l=!f)):(f=o,(i||!o)&&(o="error",0>i&&(i=0))),n.status=i,n.statusText=(g||o)+"",l?y.resolveWith(s,[h,o,n]):y.rejectWith(s,[n,o,f]),n.statusCode(v),v=void 0,d&&b.trigger(l?"ajaxSuccess":"ajaxError",[n,t,l?h:f]),w.fireWith(s,[n,o]),d&&(b.trigger("ajaxComplete",[n,t]),--e.active||e.event.trigger("ajaxStop")))}"object"==typeof h&&(i=h,h=void 0),i=i||{};var p,r,C,m,_,o,d,l,t=e.ajaxSetup({},i),s=t.context||t,b=t.context&&(s.nodeType||s.jquery)?e(s):e.event,y=e.Deferred(),w=e.Callbacks("once memory"),v=t.statusCode||{},A={},S={},a=0,T="canceled",n={readyState:0,getResponseHeader:function(t){var e;if(2===a){if(!m)for(m={};e=mn.exec(C);)m[e[1].toLowerCase()]=e[2];e=m[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===a?C:null},setRequestHeader:function(e,n){var t=e.toLowerCase();return a||(e=S[t]=S[t]||e,A[e]=n),this},overrideMimeType:function(e){return a||(t.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>a)for(t in e)v[t]=[v[t],e[t]];else n.always(e[n.status]);return this},abort:function(t){var e=t||T;return p&&p.abort(e),f(0,e),this}};if(y.promise(n).complete=w.add,n.success=n.done,n.error=n.fail,t.url=((h||t.url||c)+"").replace(hn,"").replace(bn,g[1]+"//"),t.type=i.method||i.type||t.method||t.type,t.dataTypes=e.trim(t.dataType||"*").toLowerCase().match(u)||[""],null==t.crossDomain&&(o=kt.exec(t.url.toLowerCase()),t.crossDomain=!(!o||o[1]===g[1]&&o[2]===g[2]&&(o[3]||("http:"===o[1]?"80":"443"))===(g[3]||("http:"===g[1]?"80":"443")))),t.data&&t.processData&&"string"!=typeof t.data&&(t.data=e.param(t.data,t.traditional)),Mt(It,t,i,n),2===a)return n;d=t.global,d&&0===e.active++&&e.event.trigger("ajaxStart"),t.type=t.type.toUpperCase(),t.hasContent=!yn.test(t.type),r=t.url,t.hasContent||(t.data&&(r=t.url+=(Y.test(r)?"&":"?")+t.data,delete t.data),t.cache===!1&&(t.url=Pt.test(r)?r.replace(Pt,"$1_="+V++):r+(Y.test(r)?"&":"?")+"_="+V++)),t.ifModified&&(e.lastModified[r]&&n.setRequestHeader("If-Modified-Since",e.lastModified[r]),e.etag[r]&&n.setRequestHeader("If-None-Match",e.etag[r])),(t.data&&t.hasContent&&t.contentType!==!1||i.contentType)&&n.setRequestHeader("Content-Type",t.contentType),n.setRequestHeader("Accept",t.dataTypes[0]&&t.accepts[t.dataTypes[0]]?t.accepts[t.dataTypes[0]]+("*"!==t.dataTypes[0]?", "+Bt+"; q=0.01":""):t.accepts["*"]);for(l in t.headers)n.setRequestHeader(l,t.headers[l]);if(t.beforeSend&&(t.beforeSend.call(s,n,t)===!1||2===a))return n.abort();T="abort";for(l in{success:1,error:1,complete:1})n[l](t[l]);if(p=Mt(X,t,i,n)){n.readyState=1,d&&b.trigger("ajaxSend",[n,t]),t.async&&t.timeout>0&&(_=setTimeout(function(){n.abort("timeout")},t.timeout));try{a=1,p.send(A,f)}catch(D){if(!(2>a))throw D;f(-1,D)}}else f(-1,"No Transport");return n},getJSON:function(t,n,r){return e.get(t,n,r,"json")},getScript:function(t,n){return e.get(t,void 0,n,"script")}}),e.each(["get","post"],function(n,t){e[t]=function(i,n,r,a){return e.isFunction(n)&&(a=a||r,r=n,n=void 0),e.ajax({url:i,type:t,dataType:a,data:n,success:r})}}),e.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,t){e.fn[t]=function(e){return this.on(t,e)}}),e._evalUrl=function(t){return e.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},e.fn.extend({wrapAll:function(t){var n;return e.isFunction(t)?this.each(function(n){e(this).wrapAll(t.call(this,n))}):(this[0]&&(n=e(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&n.insertBefore(this[0]),n.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(t){return this.each(e.isFunction(t)?function(n){e(this).wrapInner(t.call(this,n))}:function(){var n=e(this),r=n.contents();r.length?r.wrapAll(t):n.append(t)})},wrap:function(t){var n=e.isFunction(t);return this.each(function(r){e(this).wrapAll(n?t.call(this,r):t)})},unwrap:function(){return this.parent().each(function(){e.nodeName(this,"body")||e(this).replaceWith(this.childNodes)}).end()}}),e.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},e.expr.filters.visible=function(t){return!e.expr.filters.hidden(t)};var Tn=/%20/g,Dn=/\[\]$/,Ot=/\r?\n/g,Fn=/^(?:submit|button|image|reset|file)$/i,En=/^(?:input|select|textarea|keygen)/i;e.param=function(t,n){var r,a=[],i=function(n,t){t=e.isFunction(t)?t():null==t?"":t,a[a.length]=encodeURIComponent(n)+"="+encodeURIComponent(t)};if(void 0===n&&(n=e.ajaxSettings&&e.ajaxSettings.traditional),e.isArray(t)||t.jquery&&!e.isPlainObject(t))e.each(t,function(){i(this.name,this.value)});else for(r in t)$(r,t[r],n,i);return a.join("&").replace(Tn,"+")},e.fn.extend({serialize:function(){return e.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=e.prop(this,"elements");return t?e.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!e(this).is(":disabled")&&En.test(this.nodeName)&&!Fn.test(t)&&(this.checked||!rt.test(t))}).map(function(r,n){var t=e(this).val();return null==t?null:e.isArray(t)?e.map(t,function(e){return{name:n.name,value:e.replace(Ot,"\r\n")}}):{name:n.name,value:t.replace(Ot,"\r\n")}}).get()}}),e.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Pn=0,L={},In={0:200,1223:204},T=e.ajaxSettings.xhr();r.ActiveXObject&&e(r).on("unload",function(){for(var e in L)L[e]()}),a.cors=!!T&&"withCredentials"in T,a.ajax=T=!!T,e.ajaxTransport(function(e){var t;return a.cors||T&&!e.crossDomain?{send:function(a,i){var r,n=e.xhr(),s=++Pn;if(n.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(r in e.xhrFields)n[r]=e.xhrFields[r];e.mimeType&&n.overrideMimeType&&n.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");for(r in a)n.setRequestHeader(r,a[r]);t=function(e){return function(){t&&(delete L[s],t=n.onload=n.onerror=null,"abort"===e?n.abort():"error"===e?i(n.status,n.statusText):i(In[n.status]||n.status,n.statusText,"string"==typeof n.responseText?{text:n.responseText}:void 0,n.getAllResponseHeaders()))}},n.onload=t(),n.onerror=t("error"),t=L[s]=t("abort");try{n.send(e.hasContent&&e.data||null)}catch(o){if(t)throw o}},abort:function(){t&&t()}}:void 0}),e.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return e.globalEval(t),t}}}),e.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),e.ajaxTransport("script",function(r){if(r.crossDomain){var a,t;return{send:function(s,i){a=e("<script>").prop({async:!0,charset:r.scriptCharset,src:r.url}).on("load error",t=function(e){a.remove(),t=null,e&&i("error"===e.type?404:200,e.type)}),n.head.appendChild(a[0])},abort:function(){t&&t()}}}});var Rt=[],G=/(=)\?(?=&|$)|\?\?/;e.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Rt.pop()||e.expando+"_"+V++;return this[t]=!0,t}}),e.ajaxPrefilter("json jsonp",function(t,o,l){var n,i,a,s=t.jsonp!==!1&&(G.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&G.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(n=t.jsonpCallback=e.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(G,"$1"+n):t.jsonp!==!1&&(t.url+=(Y.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return a||e.error(n+" was not called"),a[0]},t.dataTypes[0]="json",i=r[n],r[n]=function(){a=arguments},l.always(function(){r[n]=i,t[n]&&(t.jsonpCallback=o.jsonpCallback,Rt.push(n)),a&&e.isFunction(i)&&i(a[0]),a=i=void 0}),"script"):void 0}),e.parseHTML=function(r,t,s){if(!r||"string"!=typeof r)return null;"boolean"==typeof t&&(s=t,t=!1),t=t||n;var a=Dt.exec(r),i=!s&&[];return a?[t.createElement(a[1])]:(a=e.buildFragment([r],t,i),i&&i.length&&e(i).remove(),e.merge([],a.childNodes))};var qt=e.fn.load;e.fn.load=function(t,n,r){if("string"!=typeof t&&qt)return qt.apply(this,arguments);var a,o,l,i=this,s=t.indexOf(" ");return s>=0&&(a=e.trim(t.slice(s)),t=t.slice(0,s)),e.isFunction(n)?(r=n,n=void 0):n&&"object"==typeof n&&(o="POST"),i.length>0&&e.ajax({url:t,type:o,dataType:"html",data:n}).done(function(t){l=arguments,i.html(a?e("<div>").append(e.parseHTML(t)).find(a):t)}).complete(r&&function(e,t){i.each(r,l||[e.responseText,t,e])}),this},e.expr.filters.animated=function(t){return e.grep(e.timers,function(e){return t===e.elem}).length};var Ht=r.document.documentElement;e.offset={setOffset:function(n,t,f){var o,i,s,p,r,l,d,u=e.css(n,"position"),c=e(n),a={};"static"===u&&(n.style.position="relative"),r=c.offset(),s=e.css(n,"top"),l=e.css(n,"left"),d=("absolute"===u||"fixed"===u)&&(s+l).indexOf("auto")>-1,d?(o=c.position(),p=o.top,i=o.left):(p=parseFloat(s)||0,i=parseFloat(l)||0),e.isFunction(t)&&(t=t.call(n,f,r)),null!=t.top&&(a.top=t.top-r.top+p),null!=t.left&&(a.left=t.left-r.left+i),"using"in t?t.using.call(n,a):c.css(a)
}},e.fn.extend({offset:function(s){if(arguments.length)return void 0===s?this:this.each(function(t){e.offset.setOffset(this,s,t)});var n,a,t=this[0],r={top:0,left:0},i=t&&t.ownerDocument;if(i)return n=i.documentElement,e.contains(n,t)?(typeof t.getBoundingClientRect!==w&&(r=t.getBoundingClientRect()),a=et(i),{top:r.top+a.pageYOffset-n.clientTop,left:r.left+a.pageXOffset-n.clientLeft}):r},position:function(){if(this[0]){var t,r,a=this[0],n={top:0,left:0};return"fixed"===e.css(a,"position")?r=a.getBoundingClientRect():(t=this.offsetParent(),r=this.offset(),e.nodeName(t[0],"html")||(n=t.offset()),n.top+=e.css(t[0],"borderTopWidth",!0),n.left+=e.css(t[0],"borderLeftWidth",!0)),{top:r.top-n.top-e.css(a,"marginTop",!0),left:r.left-n.left-e.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Ht;t&&!e.nodeName(t,"html")&&"static"===e.css(t,"position");)t=t.offsetParent;return t||Ht})}}),e.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var a="pageYOffset"===n;e.fn[t]=function(e){return d(this,function(i,s,e){var t=et(i);return void 0===e?t?t[n]:i[s]:void(t?t.scrollTo(a?r.pageXOffset:e,a?e:r.pageYOffset):i[s]=e)},t,e,arguments.length,null)}}),e.each(["top","left"],function(n,t){e.cssHooks[t]=tt(a.pixelPosition,function(r,n){return n?(n=_(r,t),Z.test(n)?e(r).position()[t]+"px":n):void 0})}),e.each({Height:"height",Width:"width"},function(t,n){e.each({padding:"inner"+t,content:n,"":"outer"+t},function(r,a){e.fn[a]=function(a,o){var i=arguments.length&&(r||"boolean"!=typeof a),s=r||(a===!0||o===!0?"margin":"border");return d(this,function(n,a,i){var r;return e.isWindow(n)?n.document.documentElement["client"+t]:9===n.nodeType?(r=n.documentElement,Math.max(n.body["scroll"+t],r["scroll"+t],n.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?e.css(n,a,s):e.style(n,a,i,s)},n,i?a:void 0,i,null)}})}),e.fn.size=function(){return this.length},e.fn.andSelf=e.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return e});var Sn=r.jQuery,$t=r.$;return e.noConflict=function(t){return r.$===e&&(r.$=$t),t&&r.jQuery===e&&(r.jQuery=Sn),e},typeof Jt===w&&(r.jQuery=r.$=e),e}),jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,n,r,a){return jQuery.easing[jQuery.easing.def](e,t,n,r,a)},easeInQuad:function(a,e,t,n,r){return n*(e/=r)*e+t},easeOutQuad:function(a,e,t,n,r){return-n*(e/=r)*(e-2)+t},easeInOutQuad:function(a,e,t,n,r){return(e/=r/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t},easeInCubic:function(a,e,t,n,r){return n*(e/=r)*e*e+t},easeOutCubic:function(a,e,t,n,r){return n*((e=e/r-1)*e*e+1)+t},easeInOutCubic:function(a,e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t},easeInQuart:function(a,e,t,n,r){return n*(e/=r)*e*e*e+t},easeOutQuart:function(a,e,t,n,r){return-n*((e=e/r-1)*e*e*e-1)+t},easeInOutQuart:function(a,e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e+t:-n/2*((e-=2)*e*e*e-2)+t},easeInQuint:function(a,e,t,n,r){return n*(e/=r)*e*e*e*e+t},easeOutQuint:function(a,e,t,n,r){return n*((e=e/r-1)*e*e*e*e+1)+t},easeInOutQuint:function(a,e,t,n,r){return(e/=r/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t},easeInSine:function(a,t,n,e,r){return-e*Math.cos(t/r*(Math.PI/2))+e+n},easeOutSine:function(a,e,t,n,r){return n*Math.sin(e/r*(Math.PI/2))+t},easeInOutSine:function(a,e,t,n,r){return-n/2*(Math.cos(Math.PI*e/r)-1)+t},easeInExpo:function(a,e,t,n,r){return 0==e?t:n*Math.pow(2,10*(e/r-1))+t},easeOutExpo:function(a,e,t,n,r){return e==r?t+n:n*(-Math.pow(2,-10*e/r)+1)+t},easeInOutExpo:function(a,e,t,n,r){return 0==e?t:e==r?t+n:(e/=r/2)<1?n/2*Math.pow(2,10*(e-1))+t:n/2*(-Math.pow(2,-10*--e)+2)+t},easeInCirc:function(a,e,t,n,r){return-n*(Math.sqrt(1-(e/=r)*e)-1)+t},easeOutCirc:function(a,e,t,n,r){return n*Math.sqrt(1-(e=e/r-1)*e)+t},easeInOutCirc:function(a,e,t,n,r){return(e/=r/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+t:n/2*(Math.sqrt(1-(e-=2)*e)+1)+t},easeInElastic:function(o,n,a,e,i){var s=1.70158,t=0,r=e;if(0==n)return a;if(1==(n/=i))return a+e;if(t||(t=.3*i),r<Math.abs(e)){r=e;var s=t/4}else var s=t/(2*Math.PI)*Math.asin(e/r);return-(r*Math.pow(2,10*(n-=1))*Math.sin(2*(n*i-s)*Math.PI/t))+a},easeOutElastic:function(o,n,a,e,i){var s=1.70158,t=0,r=e;if(0==n)return a;if(1==(n/=i))return a+e;if(t||(t=.3*i),r<Math.abs(e)){r=e;var s=t/4}else var s=t/(2*Math.PI)*Math.asin(e/r);return r*Math.pow(2,-10*n)*Math.sin(2*(n*i-s)*Math.PI/t)+e+a},easeInOutElastic:function(o,e,a,t,i){var s=1.70158,n=0,r=t;if(0==e)return a;if(2==(e/=i/2))return a+t;if(n||(n=.3*i*1.5),r<Math.abs(t)){r=t;var s=n/4}else var s=n/(2*Math.PI)*Math.asin(t/r);return 1>e?-.5*r*Math.pow(2,10*(e-=1))*Math.sin(2*(e*i-s)*Math.PI/n)+a:r*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*i-s)*Math.PI/n)*.5+t+a},easeInBack:function(i,t,n,r,a,e){return void 0==e&&(e=1.70158),r*(t/=a)*t*((e+1)*t-e)+n},easeOutBack:function(i,e,n,r,a,t){return void 0==t&&(t=1.70158),r*((e=e/a-1)*e*((t+1)*e+t)+1)+n},easeInOutBack:function(i,e,n,r,a,t){return void 0==t&&(t=1.70158),(e/=a/2)<1?r/2*e*e*(((t*=1.525)+1)*e-t)+n:r/2*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)+n},easeInBounce:function(n,r,a,e,t){return e-jQuery.easing.easeOutBounce(n,t-r,0,e,t)+a},easeOutBounce:function(a,e,t,n,r){return(e/=r)<1/2.75?7.5625*n*e*e+t:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t},easeInOutBounce:function(r,t,a,n,e){return e/2>t?.5*jQuery.easing.easeInBounce(r,2*t,0,n,e)+a:.5*jQuery.easing.easeOutBounce(r,2*t-e,0,n,e)+.5*n+a}}),define("libs/jquery.easing",["jquery"],function(){}),function(e,t){if("function"==typeof define&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,a){e.Backbone=t(e,a,n,r)});else if("undefined"!=typeof exports){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(g,t,e,M){{var P=g.Backbone,u=[],s=(u.push,u.slice);u.splice}t.VERSION="1.1.2",t.$=M,t.noConflict=function(){return g.Backbone=P,this},t.emulateHTTP=!1,t.emulateJSON=!1;var n=t.Events={on:function(e,t,n){if(!o(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(n,t,a){if(!o(this,"once",n,[t,a])||!t)return this;var i=this,r=e.once(function(){i.off(n,r),t.apply(this,arguments)});return r._callback=t,this.on(n,r,a)},off:function(t,n,r){var c,a,u,l,i,p,s,d;if(!this._events||!o(this,"off",t,[n,r]))return this;if(!t&&!n&&!r)return this._events=void 0,this;for(l=t?[t]:e.keys(this._events),i=0,p=l.length;p>i;i++)if(t=l[i],u=this._events[t]){if(this._events[t]=c=[],n||r)for(s=0,d=u.length;d>s;s++)a=u[s],(n&&n!==a.callback&&n!==a.callback._callback||r&&r!==a.context)&&c.push(a);c.length||delete this._events[t]}return this},trigger:function(e){if(!this._events)return this;var t=s.call(arguments,1);if(!o(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&c(n,t),r&&c(r,arguments),this},stopListening:function(t,a,n){var r=this._listeningTo;if(!r)return this;var s=!a&&!n;n||"object"!=typeof a||(n=this),t&&((r={})[t._listenId]=t);for(var i in r)t=r[i],t.off(a,n,this),(s||e.isEmpty(t._events))&&delete this._listeningTo[i];return this}},h=/\s+/,o=function(t,r,e,a){if(!e)return!0;if("object"==typeof e){for(var i in e)t[r].apply(t,[i,e[i]].concat(a));return!1}if(h.test(e)){for(var s=e.split(h),n=0,o=s.length;o>n;n++)t[r].apply(t,[s[n]].concat(a));return!1}return!0},c=function(n,r){var e,t=-1,a=n.length,i=r[0],s=r[1],o=r[2];switch(r.length){case 0:for(;++t<a;)(e=n[t]).callback.call(e.ctx);return;case 1:for(;++t<a;)(e=n[t]).callback.call(e.ctx,i);return;case 2:for(;++t<a;)(e=n[t]).callback.call(e.ctx,i,s);return;case 3:for(;++t<a;)(e=n[t]).callback.call(e.ctx,i,s,o);return;default:for(;++t<a;)(e=n[t]).callback.apply(e.ctx,r);return}},E={listenTo:"on",listenToOnce:"once"};e.each(E,function(t,r){n[r]=function(n,a,r){var i=this._listeningTo||(this._listeningTo={}),s=n._listenId||(n._listenId=e.uniqueId("l"));return i[s]=n,r||"object"!=typeof a||(r=this),n[t](a,r,this),this}}),n.bind=n.on,n.unbind=n.off,e.extend(t,n);var a=t.Model=function(r,t){var n=r||{};t||(t={}),this.cid=e.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(n=this.parse(n,t)||{}),n=e.defaults({},n,e.result(this,"defaults")),this.set(n,t),this.changed={},this.initialize.apply(this,arguments)};e.extend(a.prototype,n,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return e.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(t){return e.escape(this.get(t))},has:function(e){return null!=this.get(e)},set:function(o,a,t){var n,r,d,i,c,u,p,s;if(null==o)return this;if("object"==typeof o?(r=o,t=a):(r={})[o]=a,t||(t={}),!this._validate(r,t))return!1;d=t.unset,c=t.silent,i=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=e.clone(this.attributes),this.changed={}),s=this.attributes,p=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(n in r)a=r[n],e.isEqual(s[n],a)||i.push(n),e.isEqual(p[n],a)?delete this.changed[n]:this.changed[n]=a,d?delete s[n]:s[n]=a;if(!c){i.length&&(this._pending=t);for(var l=0,f=i.length;f>l;l++)this.trigger("change:"+i[l],this,s[i[l]],t)}if(u)return this;if(!c)for(;this._pending;)t=this._pending,this._pending=!1,this.trigger("change",this,t);return this._pending=!1,this._changing=!1,this},unset:function(t,n){return this.set(t,void 0,e.extend({},n,{unset:!0}))},clear:function(n){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,e.extend({},n,{unset:!0}))},hasChanged:function(t){return null==t?!e.isEmpty(this.changed):e.has(this.changed,t)},changedAttributes:function(t){if(!t)return this.hasChanged()?e.clone(this.changed):!1;var a,n=!1,i=this._changing?this._previousAttributes:this.attributes;for(var r in t)e.isEqual(i[r],a=t[r])||((n||(n={}))[r]=a);return n},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return e.clone(this._previousAttributes)},fetch:function(t){t=t?e.clone(t):{},void 0===t.parse&&(t.parse=!0);var n=this,r=t.success;return t.success=function(e){return n.set(n.parse(e,t),t)?(r&&r(n,e,t),void n.trigger("sync",n,e,t)):!1},i(this,t),this.sync("read",this,t)},save:function(a,l,t){var n,s,u,o=this.attributes;if(null==a||"object"==typeof a?(n=a,t=l):(n={})[a]=l,t=e.extend({validate:!0},t),n&&!t.wait){if(!this.set(n,t))return!1}else if(!this._validate(n,t))return!1;n&&t.wait&&(this.attributes=e.extend({},o,n)),void 0===t.parse&&(t.parse=!0);var r=this,c=t.success;return t.success=function(i){r.attributes=o;var a=r.parse(i,t);return t.wait&&(a=e.extend(n||{},a)),e.isObject(a)&&!r.set(a,t)?!1:(c&&c(r,i,t),void r.trigger("sync",r,i,t))},i(this,t),s=this.isNew()?"create":t.patch?"patch":"update","patch"===s&&(t.attrs=n),u=this.sync(s,this,t),n&&t.wait&&(this.attributes=o),u},destroy:function(t){t=t?e.clone(t):{};var n=this,r=t.success,a=function(){n.trigger("destroy",n,n.collection,t)};if(t.success=function(e){(t.wait||n.isNew())&&a(),r&&r(n,e,t),n.isNew()||n.trigger("sync",n,e,t)},this.isNew())return t.success(),!1;i(this,t);var s=this.sync("delete",this,t);return t.wait||a(),s},url:function(){var t=e.result(this,"urlRoot")||e.result(this.collection,"url")||p();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},e.extend(t||{},{validate:!0}))},_validate:function(t,n){if(!n.validate||!this.validate)return!0;t=e.extend({},this.attributes,t);var r=this.validationError=this.validate(t,n)||null;return r?(this.trigger("invalid",this,r,e.extend(n,{validationError:r})),!1):!0}});var S=["keys","values","pairs","invert","pick","omit"];e.each(S,function(t){a.prototype[t]=function(){var n=s.call(arguments);return n.unshift(this.attributes),e[t].apply(e,n)}});var l=t.Collection=function(n,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),n&&this.reset(n,e.extend({silent:!0},t))},b={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};e.extend(l.prototype,n,{model:a,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(t,n){return this.set(t,e.extend({merge:!1},n,v))},remove:function(t,r){var s=!e.isArray(t);t=s?[t]:e.clone(t),r||(r={});var a,o,i,n;for(a=0,o=t.length;o>a;a++)n=t[a]=this.get(t[a]),n&&(delete this._byId[n.id],delete this._byId[n.cid],i=this.indexOf(n),this.models.splice(i,1),this.length--,r.silent||(r.index=i,n.trigger("remove",n,this,r)),this._removeReference(n,r));return s?t[0]:t},set:function(i,n){n=e.defaults({},n,b),n.parse&&(i=this.parse(i,n));var y=!e.isArray(i);i=y?i?[i]:[]:e.clone(i);var t,o,C,r,s,c,p,m=n.at,S=this.model,f=this.comparator&&null==m&&n.sort!==!1,A=e.isString(this.comparator)?this.comparator:null,u=[],h=[],d={},_=n.add,w=n.merge,g=n.remove,l=!f&&_&&g?[]:!1;for(t=0,o=i.length;o>t;t++){if(s=i[t]||{},C=s instanceof a?r=s:s[S.prototype.idAttribute||"id"],c=this.get(C))g&&(d[c.cid]=!0),w&&(s=s===r?r.attributes:s,n.parse&&(s=c.parse(s,n)),c.set(s,n),f&&!p&&c.hasChanged(A)&&(p=!0)),i[t]=c;else if(_){if(r=i[t]=this._prepareModel(s,n),!r)continue;u.push(r),this._addReference(r,n)}r=c||r,!l||!r.isNew()&&d[r.id]||l.push(r),d[r.id]=!0}if(g){for(t=0,o=this.length;o>t;++t)d[(r=this.models[t]).cid]||h.push(r);h.length&&this.remove(h,n)}if(u.length||l&&l.length)if(f&&(p=!0),this.length+=u.length,null!=m)for(t=0,o=u.length;o>t;t++)this.models.splice(m+t,0,u[t]);else{l&&(this.models.length=0);var v=l||u;for(t=0,o=v.length;o>t;t++)this.models.push(v[t])}if(p&&this.sort({silent:!0}),!n.silent){for(t=0,o=u.length;o>t;t++)(r=u[t]).trigger("add",r,this,n);(p||l&&l.length)&&this.trigger("sort",this,n)}return y?i[0]:i},reset:function(n,t){t||(t={});for(var r=0,a=this.models.length;a>r;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),n=this.add(n,e.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),n},push:function(t,n){return this.add(t,e.extend({at:this.length},n))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,n){return this.add(t,e.extend({at:0},n))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(t,n){return e.isEmpty(t)?n?void 0:[]:this[n?"find":"filter"](function(n){for(var e in t)if(t[e]!==n.get(e))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return e.invoke(this.models,"get",t)},fetch:function(t){t=t?e.clone(t):{},void 0===t.parse&&(t.parse=!0);var r=t.success,n=this;return t.success=function(e){var a=t.reset?"reset":"set";n[a](e,t),r&&r(n,e,t),n.trigger("sync",n,e,t)},i(this,t),this.sync("read",this,t)},create:function(n,t){if(t=t?e.clone(t):{},!(n=this._prepareModel(n,t)))return!1;t.wait||this.add(n,t);var a=this,r=t.success;return t.success=function(e,n){t.wait&&a.add(e,t),r&&r(e,n,t)},n.save(null,t),n},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(n,t){if(n instanceof a)return n;t=t?e.clone(t):{},t.collection=this;var r=new this.model(n,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e){this._byId[e.cid]=e,null!=e.id&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var x=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];e.each(x,function(t){l.prototype[t]=function(){var n=s.call(arguments);return n.unshift(this.models),e[t].apply(e,n)}});var y=["groupBy","countBy","sortBy","indexBy"];e.each(y,function(t){l.prototype[t]=function(n,r){var a=e.isFunction(n)?n:function(e){return e.get(n)};return e[t](this.models,a,r)}});var m=t.View=function(t){this.cid=e.uniqueId("view"),t||(t={}),e.extend(this,e.pick(t,C)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,C=["model","collection","el","id","attributes","className","tagName","events"];e.extend(m.prototype,n,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(n){if(!n&&!(n=e.result(this,"events")))return this;this.undelegateEvents();for(var r in n){var t=n[r];if(e.isFunction(t)||(t=this[n[r]]),t){var i=r.match(_),a=i[1],s=i[2];t=e.bind(t,this),a+=".delegateEvents"+this.cid,""===s?this.$el.on(a,t):this.$el.on(a,s,t)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"),!1);else{var n=e.extend({},e.result(this,"attributes"));this.id&&(n.id=e.result(this,"id")),this.className&&(n["class"]=e.result(this,"className"));var r=t.$("<"+e.result(this,"tagName")+">").attr(n);this.setElement(r,!1)}}}),t.sync=function(s,i,n){var a=A[s];e.defaults(n||(n={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var r={type:a,dataType:"json"};if(n.url||(r.url=e.result(i,"url")||p()),null!=n.data||!i||"create"!==s&&"update"!==s&&"patch"!==s||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||i.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),n.emulateHTTP&&("PUT"===a||"DELETE"===a||"PATCH"===a)){r.type="POST",n.emulateJSON&&(r.data._method=a);var o=n.beforeSend;n.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",a),o?o.apply(this,arguments):void 0}}"GET"===r.type||n.emulateJSON||(r.processData=!1),"PATCH"===r.type&&w&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=n.xhr=t.ajax(e.extend(r,n));return i.trigger("request",i,l,n),l};var w=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),A={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var f=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,D=/(\(\?)?:\w+/g,L=/\*\w+/g,F=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(f.prototype,n,{initialize:function(){},route:function(a,n,i){e.isRegExp(a)||(a=this._routeToRegExp(a)),e.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var r=this;return t.history.route(a,function(s){var e=r._extractParameters(a,s);r.execute(i,e),r.trigger.apply(r,["route:"+n].concat(e)),r.trigger("route",n,e),t.history.trigger("route",r,n,e)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var t,n=e.keys(this.routes);null!=(t=n.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(e){return e=e.replace(F,"\\$&").replace(T,"(?:$1)?").replace(D,function(e,t){return t?e:"([^/?]+)"}).replace(L,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(n,r){var t=n.exec(r).slice(1);return e.map(t,function(e,n){return n===t.length-1?e||null:e?decodeURIComponent(e):null})}});var r=t.History=function(){this.handlers=[],e.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},d=/^[#\/]|\s+$/g,k=/^\/+|\/+$/g,I=/msie [\w.]+/,N=/\/$/,B=/#.*$/;r.started=!1,e.extend(r.prototype,n,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(e,n){if(null==e)if(this._hasPushState||!this._wantsHashChange||n){e=decodeURI(this.location.pathname+this.location.search);var t=this.root.replace(N,"");e.indexOf(t)||(e=e.slice(t.length))}else e=this.getHash();return e.replace(d,"")},start:function(s){if(r.started)throw new Error("Backbone.history has already been started");r.started=!0,this.options=e.extend({root:"/"},this.options,s),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),a=document.documentMode,i=I.exec(navigator.userAgent.toLowerCase())&&(!a||7>=a);if(this.root=("/"+this.root+"/").replace(k,"/"),i&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!i?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var l=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&l.hash&&(this.fragment=this.getHash().replace(d,""),this.history.replaceState({},document.title,this.root+this.fragment))}return this.options.silent?void 0:this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),r.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),e.any(this.handlers,function(e){return e.route.test(t)?(e.callback(t),!0):void 0})},navigate:function(e,t){if(!r.started)return!1;t&&t!==!0||(t={trigger:!!t});var n=this.root+(e=this.getFragment(e||""));if(e=e.replace(B,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new r;var O=function(n,i){var t,r=this;t=n&&e.has(n,"constructor")?n.constructor:function(){return r.apply(this,arguments)},e.extend(t,r,i);var a=function(){this.constructor=t};return a.prototype=r.prototype,t.prototype=new a,n&&e.extend(t.prototype,n),t.__super__=r.prototype,t};a.extend=l.extend=f.extend=m.extend=r.extend=O;var p=function(){throw new Error('A "url" property or function must be specified')},i=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}};return t});var XRegExp;XRegExp=XRegExp||function(a){function h(n,r,a){var t;for(t in e.prototype)e.prototype.hasOwnProperty(t)&&(n[t]=e.prototype[t]);return n.xregexp={captureNames:r,isNative:!!a},n}function C(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function s(n,i,a){if(!e.isRegExp(n))throw new TypeError("type RegExp expected");var r=t.replace.call(C(n)+(i||""),u,"");return a&&(r=t.replace.call(r,new RegExp("["+a+"]+","g"),"")),n=n.xregexp&&!n.xregexp.isNative?h(e(n.source,r),n.xregexp.captureNames?n.xregexp.captureNames.slice(0):null):h(new RegExp(n.source,r),null,!0)}function g(e,n){var t=e.length;if(Array.prototype.lastIndexOf)return e.lastIndexOf(n);for(;t--;)if(e[t]===n)return t;return-1}function l(e,t){return Object.prototype.toString.call(e).toLowerCase()==="[object "+t+"]"}function y(t){return t=t||{},"all"===t||t.all?t={natives:!0,extensibility:!0}:l(t,"string")&&(t=e.forEach(t,/[^\s,]+/,function(e){this[e]=!0},{})),t}function x(l,r,a,i){var t,e,s=m.length,o=null;p=!0;try{for(;s--;)if(e=m[s],!("all"!==e.scope&&e.scope!==a||e.trigger&&!e.trigger.call(i))&&(e.pattern.lastIndex=r,t=n.exec.call(e.pattern,l),t&&t.index===r)){o={output:e.handler.call(i,t,a),match:t};break}}catch(u){throw u}finally{p=!1}return o}function b(t){e.addToken=c[t?"on":"off"],i.extensibility=t}function v(e){RegExp.prototype.exec=(e?n:t).exec,RegExp.prototype.test=(e?n:t).test,String.prototype.match=(e?n:t).match,String.prototype.replace=(e?n:t).replace,String.prototype.split=(e?n:t).split,i.natives=e}var e,c,r,i={natives:!1,extensibility:!1},t={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},n={},w={},m=[],o="default",D="class",S={"default":/^(?:\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??)/,"class":/^(?:\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S]))/},A=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,u=/([\s\S])(?=[\s\S]*\1)/g,_=/^(?:[?*+]|{\d+(?:,\d*)?})\??/,T=t.exec.call(/()??/,"")[1]===a,d=RegExp.prototype.sticky!==a,p=!1,f="gim"+(d?"y":"");return e=function(n,r){if(e.isRegExp(n)){if(r!==a)throw new TypeError("can't supply flags when constructing one RegExp from another");return s(n)}if(p)throw new Error("can't call the XRegExp constructor within token definition functions");var l,c,d,g=[],m=o,v={hasNamedCapture:!1,captureNames:[],hasFlag:function(e){return r.indexOf(e)>-1}},i=0;if(n=n===a?"":String(n),r=r===a?"":String(r),t.match.call(r,u))throw new SyntaxError("invalid duplicate regular expression flag");for(n=t.replace.call(n,/^\(\?([\w$]+)\)/,function(n,e){if(t.test.call(/[gy]/,e))throw new SyntaxError("can't use flag g or y in mode modifier");return r=t.replace.call(r+e,u,""),""}),e.forEach(r,/[\s\S]/,function(e){if(f.indexOf(e[0])<0)throw new SyntaxError("invalid regular expression flag "+e[0])});i<n.length;)l=x(n,i,m,v),l?(g.push(l.output),i+=l.match[0].length||1):(c=t.exec.call(S[m],n.slice(i)),c?(g.push(c[0]),i+=c[0].length):(d=n.charAt(i),"["===d?m=D:"]"===d&&(m=o),g.push(d),++i));return h(new RegExp(g.join(""),t.replace.call(r,/[^gimy]+/g,"")),v.hasNamedCapture?v.captureNames:null)},c={on:function(n,r,e){e=e||{},n&&m.push({pattern:s(n,"g"+(d?"y":"")),handler:r,scope:e.scope||o,trigger:e.trigger||null}),e.customFlags&&(f=t.replace.call(f+e.customFlags,u,""))},off:function(){throw new Error("extensibility must be installed before using addToken")}},e.addToken=c.off,e.cache=function(t,n){var r=t+"/"+(n||"");return w[r]||(w[r]=e(t,n))},e.escape=function(e){return t.replace.call(e,/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},e.exec=function(o,t,r,a){var e,i=s(t,"g"+(a&&d?"y":""),a===!1?"y":"");return i.lastIndex=r=r||0,e=n.exec.call(i,o),a&&e&&e.index!==r&&(e=null),t.global&&(t.lastIndex=e?i.lastIndex:0),e},e.forEach=function(n,r,s,a){for(var t,i=0,o=-1;t=e.exec(n,r,i);)s.call(a,t,++o,n,r),i=t.index+(t[0].length||1);return a},e.globalize=function(e){return s(e,"g")},e.install=function(e){e=y(e),!i.natives&&e.natives&&v(!0),!i.extensibility&&e.extensibility&&b(!0)},e.isInstalled=function(e){return!!i[e]},e.isRegExp=function(e){return l(e,"regexp")},e.matchChain=function(n,t){return function r(s,n){var r,i=t[n].regex?t[n]:{regex:t[n]},a=[],o=function(e){a.push(i.backref?e[i.backref]||"":e[0])};for(r=0;r<s.length;++r)e.forEach(s[r],i.regex,o);return n!==t.length-1&&a.length?r(a,n+1):a}([n],0)},e.replace=function(u,t,c,r){var o,l=e.isRegExp(t),i=t;return l?(r===a&&t.global&&(r="all"),i=s(t,"all"===r?"g":"","all"===r?"":"g")):"all"===r&&(i=new RegExp(e.escape(String(t)),"g")),o=n.replace.call(String(u),i,c),l&&t.global&&(t.lastIndex=0),o},e.split=function(e,t,r){return n.split.call(e,t,r)},e.test=function(t,n,r,a){return!!e.exec(t,n,r,a)},e.uninstall=function(e){e=y(e),i.natives&&e.natives&&v(!1),i.extensibility&&e.extensibility&&b(!1)},e.union=function(n,u){var a,o,t,r,c=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,i=0,p=function(n,r,e){var t=o[i-a];if(r){if(++i,t)return"(?<"+t+">"}else if(e)return"\\"+(+e+a);return n},s=[];if(!l(n,"array")||!n.length)throw new TypeError("patterns must be a nonempty array");for(r=0;r<n.length;++r)t=n[r],e.isRegExp(t)?(a=i,o=t.xregexp&&t.xregexp.captureNames||[],s.push(e(t.source).source.replace(c,p))):s.push(e.escape(t));return e(s.join("|"),u)},e.version="2.0.0",n.exec=function(o){var e,r,i,s,n;if(this.global||(s=this.lastIndex),e=t.exec.apply(this,arguments)){if(!T&&e.length>1&&g(e,"")>-1&&(i=new RegExp(this.source,t.replace.call(C(this),"g","")),t.replace.call(String(o).slice(e.index),i,function(){var t;for(t=1;t<arguments.length-2;++t)arguments[t]===a&&(e[t]=a)})),this.xregexp&&this.xregexp.captureNames)for(n=1;n<e.length;++n)r=this.xregexp.captureNames[n-1],r&&(e[r]=e[n]);this.global&&!e[0].length&&this.lastIndex>e.index&&(this.lastIndex=e.index)}return this.global||(this.lastIndex=s),e},n.test=function(e){return!!n.exec.call(this,e)},n.match=function(r){if(e.isRegExp(r)){if(r.global){var a=t.match.apply(this,arguments);return r.lastIndex=0,a}}else r=new RegExp(r);return n.exec.call(r,this)},n.replace=function(n,a){var r,i,o,u,s=e.isRegExp(n);return s?(n.xregexp&&(r=n.xregexp.captureNames),n.global||(u=n.lastIndex)):n+="",l(a,"function")?i=t.replace.call(String(this),n,function(){var t,e=arguments;if(r)for(e[0]=new String(e[0]),t=0;t<r.length;++t)r[t]&&(e[0][r[t]]=e[t+1]);return s&&n.global&&(n.lastIndex=e[e.length-2]+e[0].length),a.apply(null,e)}):(o=String(this),i=t.replace.call(o,n,function(){var e=arguments;return t.replace.call(String(a),A,function(a,i,t){var n;if(i){if(n=+i,n<=e.length-3)return e[n]||"";if(n=r?g(r,i):-1,0>n)throw new SyntaxError("backreference to undefined group "+a);return e[n+1]||""}if("$"===t)return"$";if("&"===t||0===+t)return e[0];if("`"===t)return e[e.length-1].slice(0,e[e.length-2]);if("'"===t)return e[e.length-1].slice(e[e.length-2]+e[0].length);if(t=+t,!isNaN(t)){if(t>e.length-3)throw new SyntaxError("backreference to undefined group "+a);return e[t]||""}throw new SyntaxError("invalid token "+a)})})),s&&(n.lastIndex=n.global?0:u),i
},n.split=function(r,i){if(!e.isRegExp(r))return t.split.apply(this,arguments);var l,s=String(this),u=r.lastIndex,n=[],o=0;return i=(i===a?-1:i)>>>0,e.forEach(s,r,function(e){e.index+e[0].length>o&&(n.push(s.slice(o,e.index)),e.length>1&&e.index<s.length&&Array.prototype.push.apply(n,e.slice(1)),l=e[0].length,o=e.index+l)}),o===s.length?(!t.test.call(r,"")||l)&&n.push(""):n.push(s.slice(o)),r.lastIndex=u,n.length>i?n.slice(0,i):n},r=c.on,r(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,function(e,t){if("B"===e[1]&&t===o)return e[0];throw new SyntaxError("invalid escape "+e[0])},{scope:"all"}),r(/\[(\^?)]/,function(e){return e[1]?"[\\s\\S]":"\\b\\B"}),r(/(?:\(\?#[^)]*\))+/,function(e){return t.test.call(_,e.input.slice(e.index+e[0].length))?"":"(?:)"}),r(/\\k<([\w$]+)>/,function(e){var t=isNaN(e[1])?g(this.captureNames,e[1])+1:+e[1],n=e.index+e[0].length;if(!t||t>this.captureNames.length)throw new SyntaxError("backreference to undefined group "+e[0]);return"\\"+t+(n===e.input.length||isNaN(e.input.charAt(n))?"":"(?:)")}),r(/(?:\s+|#.*)+/,function(e){return t.test.call(_,e.input.slice(e.index+e[0].length))?"":"(?:)"},{trigger:function(){return this.hasFlag("x")},customFlags:"x"}),r(/\./,function(){return"[\\s\\S]"},{trigger:function(){return this.hasFlag("s")},customFlags:"s"}),r(/\(\?P?<([\w$]+)>/,function(e){if(!isNaN(e[1]))throw new SyntaxError("can't use integer as capture name "+e[0]);return this.captureNames.push(e[1]),this.hasNamedCapture=!0,"("}),r(/\\(\d+)/,function(e,t){if(!(t===o&&/^[1-9]/.test(e[1])&&+e[1]<=this.captureNames.length)&&"0"!==e[1])throw new SyntaxError("can't use octal escape or backreference to undefined group "+e[0]);return e[0]},{scope:"all"}),r(/\((?!\?)/,function(){return this.hasFlag("n")?"(?:":(this.captureNames.push(null),"(")},{customFlags:"n"}),"undefined"!=typeof exports&&(exports.XRegExp=e),e}(),define("libs/xregexp",function(e){return function(){var t;return t||e.XRegExp}}(this)),function(t){function n(e){return e.replace(/[- _]+/g,"").toLowerCase()}function s(e){return e.replace(/\w{4}/g,"\\u$&")}function r(e){for(;e.length<4;)e="0"+e;return e}function i(e){return parseInt(e,16)}function a(e){return parseInt(e,10).toString(16)}function o(o){var s,n=[],e=-1;return t.forEach(o,/\\u(\w{4})(?:-\\u(\w{4}))?/,function(t){s=i(t[1]),s>e+1&&(n.push("\\u"+r(a(e+1))),s>e+2&&n.push("-\\u"+r(a(s-1)))),e=i(t[2]||t[1])}),65535>e&&(n.push("\\u"+r(a(e+1))),65534>e&&n.push("-\\uFFFF")),n.join("")}function l(t){return e["^"+t]||(e["^"+t]=o(e[t]))}var e={};t.install("extensibility"),t.addUnicodePackage=function(a,i){var r;if(!t.isInstalled("extensibility"))throw new Error("extensibility must be installed before adding Unicode packages");if(a)for(r in a)a.hasOwnProperty(r)&&(e[n(r)]=s(a[r]));if(i)for(r in i)i.hasOwnProperty(r)&&(e[n(i[r])]=e[n(r)])},t.addUnicodePackage({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05270531-055605590561-058705D0-05EA05F0-05F20620-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280840-085808A008A2-08AC0904-0939093D09500958-09610971-09770979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10CF10CF20D05-0D0C0D0E-0D100D12-0D3A0D3D0D4E0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC-0EDF0F000F40-0F470F49-0F6C0F88-0F8C1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510C710CD10D0-10FA10FC-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1BBA-1BE51C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11CF51CF61D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209C21022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2CF22CF32D00-2D252D272D2D2D30-2D672D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31BA31F0-31FF3400-4DB54E00-9FCCA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78B-A78EA790-A793A7A0-A7AAA7F8-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDAAE0-AAEAAAF2-AAF4AB01-AB06AB09-AB0EAB11-AB16AB20-AB26AB28-AB2EABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC"},{L:"Letter"}),t.addToken(/\\([pP]){(\^?)([^}]*)}/,function(t,i){var a="P"===t[1]||t[2]?"^":"",r=n(t[3]);if("P"===t[1]&&t[2])throw new SyntaxError("invalid double negation \\P{^");if(!e.hasOwnProperty(r))throw new SyntaxError("invalid or unknown Unicode property "+t[0]);return"class"===i?a?l(r):e[r]:"["+a+e[r]+"]"},{scope:"all"})}(XRegExp),define("unicodeBase",["libs/xregexp"],function(){}),define("backboneValidation",["jquery","backbone"],function(t,e){e.Validation=function(t){var i={forceUpdate:!1,selector:"name",labelFormatter:"sentenceCase",valid:Function.prototype,invalid:Function.prototype},o={formatLabel:function(e,t){return u[i.labelFormatter](e,t)},format:function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.replace(/\{(\d+)\}/g,function(n,t){return"undefined"!=typeof e[t]?e[t]:n})}},s=function(a,n,r){return n=n||{},r=r||"",t.each(a,function(t,i){a.hasOwnProperty(i)&&(t&&"object"==typeof t&&!(t instanceof Array||t instanceof Date||t instanceof RegExp||t instanceof e.Model||t instanceof e.Collection)?s(t,n,r+i+"."):n[r+i]=t)}),n},r=function(){var d=function(e){return t.reduce(t.keys(t.result(e,"validation")||{}),function(e,t){return e[t]=void 0,e},{})},f=function(i,n){if("undefined"==typeof i.attributes[n])return[];var r="";-1!==n.indexOf(".")&&(r=n.split("."),n=r[0],r=r[1]);var e=i.validation?t.result(i,"validation")[n]||{}:{};return(t.isFunction(e)||t.isString(e))&&(e={fn:e}),t.isArray(e)||(e=[e]),t.reduce(e,function(n,e){return t.each(t.without(t.keys(e),"msg"),function(t){var r=a[t];"undefined"!=typeof r&&n.push({fn:r,val:e[t],msg:e.msg})}),n.reverse()},[])},e=function(e,n,r,i){return t.reduce(f(e,n),function(s,l){var c=t.extend({},o,a),u=l.fn.call(c,r,n,l.val,e,i);return u===!1||s===!1?!1:u&&!s?t.result(l,"msg")||u:s},"")},h=function(o,r){var n,a={},i=!0,l=t.clone(r),u=s(r);return t.each(u,function(r,t){n=e(o,t,r,l),n&&(a[t]=n,i=!1)}),{invalidAttrs:a,isValid:i}},l=function(n,r){return{preValidate:function(n,i){var r,s=this,a={};return t.isObject(n)?(t.each(n,function(t,e){r=s.preValidate(e,t),r&&(a[e]=r)}),t.isEmpty(a)?void 0:a):e(this,n,i,t.extend({},this.attributes))},isValid:function(n){var r=s(this.attributes);return t.isString(n)?!e(this,n,r[n],t.extend({},this.attributes)):t.isArray(n)?t.reduce(n,function(a,n){return a&&!e(this,n,r[n],t.extend({},this.attributes))},!0,this):(n===!0&&this.validate(),this.validation?this._isValid:!0)},validate:function(o,p){var e=this,f=!o,i=t.extend({},r,p),l=d(e),u=t.extend({},l,e.attributes,o),c=s(o||u),a=h(e,u);return e._isValid=a.isValid,t.each(l,function(r,e){var t=a.invalidAttrs.hasOwnProperty(e);t||i.valid(n,e,i.selector)}),t.each(l,function(s,e){var t=a.invalidAttrs.hasOwnProperty(e),r=c.hasOwnProperty(e);t&&(r||f)&&i.invalid(n,e,a.invalidAttrs[e],i.selector)}),t.defer(function(){e.trigger("validated",e._isValid,e,a.invalidAttrs),e.trigger("validated:"+(e._isValid?"valid":"invalid"),e,a.invalidAttrs)}),!i.forceUpdate&&t.intersection(t.keys(a.invalidAttrs),t.keys(c)).length>0?a.invalidAttrs:void 0}}},n=function(e,n,r){t.extend(n,l(e,r))},r=function(e){delete e.validate,delete e.preValidate,delete e.isValid},u=function(e){n(this.view,e,this.options)},p=function(e){r(e)};return{version:"0.9.0",configure:function(e){t.extend(i,e)},bind:function(r,e){e=t.extend({},i,c,e);var s=e.model||r.model,a=e.collection||r.collection;if("undefined"==typeof s&&"undefined"==typeof a)throw"Before you execute the binding your view must have a model or a collection.\nSee http://thedersen.com/projects/backbone-validation/#using-form-model-validation for more information.";s?n(r,s,e):a&&(a.each(function(t){n(r,t,e)}),a.bind("add",u,{view:r,options:e}),a.bind("remove",p))},unbind:function(a,e){e=t.extend({},e);var i=e.model||a.model,n=e.collection||a.collection;i&&r(i),n&&(n.each(function(e){r(e)}),n.unbind("add",u),n.unbind("remove",p))},mixin:l(null,i)}}(),c=r.callbacks={valid:function(e,t,n){e.$("["+n+'~="'+t+'"]').removeClass("invalid").removeAttr("data-error")},invalid:function(e,t,n,r){e.$("["+r+'~="'+t+'"]').addClass("invalid").attr("data-error",n)}},l=r.patterns={digits:/^\d+$/,number:/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i},n=r.messages={required:"validation.field.required",acceptance:"{0} must be accepted",min:"validation.text.tooShort",max:"validation.text.tooLong",range:"{0} must be between {1} and {2}",length:"{0} must be {1} characters",minLength:"{0} must be at least {1} characters",maxLength:"{0} must be at most {1} characters",rangeLength:"{0} must be between {1} and {2} characters",oneOf:"{0} must be one of: {1}",equalTo:"validation.text.comparison.noMatch",digits:"{0} must only contain digits",number:"{0} must be a number",email:"validation.email.wrongFormat",url:"{0} must be a valid url",inlinePattern:"validation.text.pattern",invalidDate:"validation.date.wrongDate"},u=r.labelFormatters={none:function(e){return e},sentenceCase:function(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toUpperCase():" "+e.toLowerCase()}).replace(/_/g," ")},label:function(t,e){return e.labels&&e.labels[t]||u.sentenceCase(t,e)}},a=r.validators=function(){var r=String.prototype.trim?function(e){return null===e?"":String.prototype.trim.call(e)}:function(e){var t=/^\s+/,n=/\s+$/;return null===e?"":e.toString().replace(t,"").replace(n,"")},a=function(e){return t.isNumber(e)||t.isString(e)&&e.match(l.number)},e=function(e){return!(t.isNull(e)||t.isUndefined(e)||t.isString(e)&&""===r(e)||t.isArray(e)&&t.isEmpty(e))};return{fn:function(r,a,e,n,i){return t.isString(e)&&(e=n[e]),e.call(n,r,a,i)},required:function(r,i,a,s,l){var o=t.isFunction(a)?a.call(s,r,i,l):a;return o||e(r)?o&&!e(r)?this.format(n.required,this.formatLabel(i,s)):void 0:!1},acceptance:function(e,r,i,a){return"true"===e||t.isBoolean(e)&&e!==!1?void 0:this.format(n.acceptance,this.formatLabel(r,a))},min:function(r,i,a,s){return e(r)&&(!t.isString(r)||r.length<a)?this.format(n.min,this.formatLabel(i,s),a):void 0},max:function(e,a,r,i){return!t.isString(e)||e.length>r?this.format(n.max,this.formatLabel(a,i),r):void 0},range:function(t,r,e,i){return!a(t)||t<e[0]||t>e[1]?this.format(n.range,this.formatLabel(r,i),e[0],e[1]):void 0},length:function(e,a,r,i){return t.isString(e)&&e.length===r?void 0:this.format(n.length,this.formatLabel(a,i),r)},minLength:function(e,a,r,i){return!t.isString(e)||e.length<r?this.format(n.minLength,this.formatLabel(a,i),r):void 0},maxLength:function(e,a,r,i){return!t.isString(e)||e.length>r?this.format(n.maxLength,this.formatLabel(a,i),r):void 0},rangeLength:function(r,a,e,i){return!t.isString(r)||r.length<e[0]||r.length>e[1]?this.format(n.rangeLength,this.formatLabel(a,i),e[0],e[1]):void 0},oneOf:function(r,a,e,i){return t.include(e,r)?void 0:this.format(n.oneOf,this.formatLabel(a,i),e.join(", "))},equalTo:function(r,i,t,a,s){return e(r)&&r!==s[t[0]]?this.format(n.equalTo+"|"+t[1],this.formatLabel(i,a),this.formatLabel(t[0],a)):void 0},regexp:function(r,a,t,i){if(t){var s=XRegExp(l[t]||t);if(e(r)&&!s.exec(r.toString()))return this.format(n[t]||n.inlinePattern,this.formatLabel(a,i),t)}},yearLowerOffset:function(s,a,o,l,r){if(-1!==a.indexOf(".")){var t=a.split("."),u="month"===t[1]?"year":"month";if(e(s)&&e(r[t[0]+"."+u])){var i=new Date,c=new Date(i.getFullYear()-o,i.getMonth(),i.getDate()),p=new Date(parseInt(r[t[0]+".year"]),parseInt(r[t[0]+".month"])-1,parseInt(r[t[0]+".day"]));if(c>p)return this.format(n.invalidDate,this.formatLabel(a,l))}}},yearUpperOffset:function(s,a,o,l,r){if(-1!==a.indexOf(".")){var t=a.split("."),u="month"===t[1]?"year":"month";if(e(s)&&e(r[t[0]+"."+u])){var i=new Date,c=new Date(i.getFullYear()+o,i.getMonth(),i.getDate()),p=new Date(parseInt(r[t[0]+".year"]),parseInt(r[t[0]+".month"])-1,parseInt(r[t[0]+".day"]));if(p>c)return this.format(n.invalidDate,this.formatLabel(a,l))}}}}}();return t.each(a,function(n,e){a[e]=t.bind(a[e],t.extend({},o,a))}),r}(_)}),define("global",["jquery","backbone","backboneValidation"],function(e,t){var r=function(t){var n=t.dataset||e(t).data();if(n){var a=n.dateFormat,i=n.airportFormat,r="";r=a?Sabre.app.formatDate(n.translate,a):i?Sabre.app.formatAirport(n.translate,i):Sabre.app.translate(n.translate),"input"===t.nodeName.toLowerCase()||"textarea"===t.nodeName.toLowerCase()?t.placeholder=r:t.innerHTML=r}},n=function(e,t,r){_.isArray(e)?_.each(e,function(e,a){n(e,t,r+"["+a+"]")}):_.each(e,function(e,a){_.isArray(e)||_.isObject(e)?n(e,t,r+"."+a):t[r+"."+a]=e})};_.extend(t.Model.prototype,t.Validation.mixin),t.Collection.prototype.on("invalid",function(e,t){Sabre.app.displayErrors(t,e.get("templatePart"),e.get("element"))}),t.Model.prototype.on("validated",function(n,e,t){Sabre.app.displayErrors(t,e.get("templatePart"),e.get("element"))}),t.Collection.prototype.on("add",function(){Sabre.app.displayErrors([])}),e.fn.extend({translate:function(){var t=this.find("[data-translate]");return 0===t.length&&this.data("translate")?r(this[0]):e.each(t,function(){r(this)}),this},setTranslate:function(t){return this[0]&&(this[0].dataset?this[0].dataset.translate=t:e(this[0]).data("translate",t)),this},toJSON:function(t){t=t||"name";var r=this.find("input, select, textarea"),n={};return e.each(r,function(){var r=e(this);(!r.is(":disabled")&&r.attr(t)&&!r.is(":radio")||r.is(":radio")&&r.is(":checked"))&&(n[r.attr(t)]=e.trim(r.val()))}),n},onAvailable:function(n){var r,a=this.selector,t=e(a);this.length>0?n.call(this,t):r=setInterval(function(){t=e(a),t.length>0&&(n.call(t,t),clearInterval(r))},150)},are:function(e){return!!e&&this.filter(e).length===this.length},loading:function(e){return this.toggleClass("loading",e),this}}),_.flattenKeys=function(r,e){var t={};return e=e||"",n(r,t,e),t}}),define("logger",["require","underscore"],function(n){var e=n("underscore"),t={},r=["clear","count","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],a=["debug","error","trace","warn"];return t.setEnabled=function(e){t.isEnabled=e===!0},e.forEach(r,function(n){t[n]=function(){if(t.isEnabled===!0){window.console||(window.console={}),window.console[n]||(window.console[n]=function(){window.console.log&&window.console.log.apply(window.console,arguments)});var r,i=e.contains(a,n);if(i)try{throw new Error("dummy")}catch(s){r="\n"+e.map(s.stack.split("\n"),function(e){return e.trim()}).splice(2).join("\n	")}return e.defer(function(){var t=arguments;t=e.filter(t[0],function(n,t){return e.isNumber(t)}),i&&t.push(r),window.console[n].apply(window.console,t)},arguments)}}}),t}),function(){function Q(e){return"function"==typeof e||"object"==typeof e&&null!==e}function y(e){return"function"==typeof e}function Dt(e){return"object"==typeof e&&null!==e}function N(){}function J(t,n){for(var e=0,r=t.length;r>e;e++)if(t[e]===n)return e;return-1}function x(t){var e=t._promiseCallbacks;return e||(e=t._promiseCallbacks={}),e}function K(t,n){return"onerror"===t?void e.on("error",n):2!==arguments.length?e[t]:void(e[t]=n)}function $t(){setTimeout(function(){for(var n,r=0;r<A.length;r++){n=A[r];var t=n.payload;t.guid=t.key+t.id,t.childGuid=t.key+t.childId,t.error&&(t.stack=t.error.stack),e.trigger(n.name,n.payload)}A.length=0},50)}function Xt(n,t,r){1===A.push({name:n,payload:{key:t._guidKey,id:t._id,eventName:n,detail:t._result,childId:r&&r._id,label:t._label,timeStamp:U(),error:e["instrument-with-stack"]?new Error(t._label):null}})&&$t()}function en(){return new TypeError("A promises callback cannot return that same promise.")}function u(){}function tt(e){try{return e.then}catch(t){return C.error=t,C}}function ht(e,t,n,r){try{e.call(t,n,r)}catch(a){return a}}function vt(i,n,s){e.async(function(i){var e=!1,o=ht(s,n,function(t){e||(e=!0,n!==t?a(i,t):r(i,t))},function(n){e||(e=!0,t(i,n))},"Settle: "+(i._label||" unknown promise"));!e&&o&&(e=!0,t(i,o))},i)}function yt(n,e){e._state===o?r(n,e._result):e._state===p?(e._onError=null,t(n,e._result)):w(e,void 0,function(t){e!==t?a(n,t):r(n,t)},function(e){t(n,e)})}function Tt(e,n){if(n.constructor===e.constructor)yt(e,n);else{var a=tt(n);a===C?t(e,C.error):void 0===a?r(e,n):y(a)?vt(e,n,a):r(e,n)}}function a(t,e){t===e?r(t,e):Q(e)?Tt(t,e):r(t,e)}function Ht(e){e._onError&&e._onError(e._result),E(e)}function r(t,n){t._state===i&&(t._result=n,t._state=o,0===t._subscribers.length?e.instrument&&_("fulfilled",t):e.async(E,t))}function t(t,n){t._state===i&&(t._state=p,t._result=n,e.async(Ht,t))}function w(t,a,i,s){var n=t._subscribers,r=n.length;t._onError=null,n[r]=a,n[r+o]=i,n[r+p]=s,0===r&&t._state&&e.async(E,t)}function E(t){var n=t._subscribers,a=t._state;if(e.instrument&&_(a===o?"fulfilled":"rejected",t),0!==n.length){for(var i,s,l=t._result,r=0;r<n.length;r+=3)i=n[r],s=n[r+a],i?$(a,i,s,l):s(l);t._subscribers.length=0}}function Y(){this.error=null}function it(e,t){try{return e(t)}catch(n){return D.error=n,D}}function $(l,n,u,c){var e,d,s,f,h=y(u);if(h){if(e=it(u,c),e===D?(f=!0,d=e.error,e=null):s=!0,n===e)return void t(n,en())}else e=c,s=!0;n._state!==i||(h&&s?a(n,e):f?t(n,d):l===o?r(n,e):l===p&&t(n,e))}function mt(n,r){var e=!1;try{r(function(t){e||(e=!0,a(n,t))},function(r){e||(e=!0,t(n,r))})}catch(i){t(n,i)}}function q(t,n,e){return t===o?{state:"fulfilled",value:e}:{state:"rejected",reason:e}}function l(n,e,a,i){this._instanceConstructor=n,this.promise=new n(u,i),this._abortOnReject=a,this._validateInput(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._init(),0===this.length?r(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&r(this.promise,this._result))):t(this.promise,this._validationError())}function bt(e,t){return new h(this,e,!0,t).promise}function _t(n,o){function l(t){a(e,t)}function c(n){t(e,n)}var s=this,e=new s(u,o);if(!S(n))return t(e,new TypeError("You must pass an array to race.")),e;for(var p=n.length,r=0;e._state===i&&p>r;r++)w(s.resolve(n[r]),void 0,l,c);return e}function Ct(e,r){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(u,r);return a(n,e),n}function wt(n,r){var a=this,e=new a(u,r);return t(e,n),e}function At(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function St(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function s(t,n){this._id=Ot++,this._label=n,this._state=void 0,this._result=void 0,this._subscribers=[],e.instrument&&_("created",this),u!==t&&(y(t)||At(),this instanceof s||St(),mt(this,t))}function v(e,t,n){this._superConstructor(e,t,!1,n)}function xt(e,t){return new v(n,e,t).promise}function Ft(e,t){return n.all(e,t)}function Et(e,t){g[d]=e,g[d+1]=t,d+=2,2===d&&Z()}function It(){return function(){process.nextTick(b)}}function Mt(){return function(){H(b)}}function Lt(){var e=0,n=new V(b),t=document.createTextNode("");return n.observe(t,{characterData:!0}),function(){t.data=e=++e%2}}function Rt(){var e=new MessageChannel;return e.port1.onmessage=b,function(){e.port2.postMessage(0)}}function R(){return function(){setTimeout(b,1)}}function b(){for(var e=0;d>e;e+=2){var t=g[e],n=g[e+1];t(n),g[e]=void 0,g[e+1]=void 0}d=0}function Gt(){try{var e=require("vertx");return H=e.runOnLoop||e.runOnContext,Mt()}catch(t){return R()}}function zt(t){var e={};return e.promise=new n(function(t,n){e.resolve=t,e.reject=n},t),e}function Yt(r,e,t){return n.all(r,t).then(function(i){if(!y(e))throw new TypeError("You must pass a function as filter's second argument.");for(var r=i.length,s=new Array(r),a=0;r>a;a++)s[a]=e(i[a]);return n.all(s,t).then(function(a){for(var t=new Array(r),n=0,e=0;r>e;e++)a[e]&&(t[n]=i[e],n++);return t.length=n,t})})}function c(e,t,n){this._superConstructor(e,t,!0,n)}function m(e,t,n){this._superConstructor(e,t,!1,n)}function tn(e,t){return new m(n,e,t).promise}function ln(e,t){return new W(n,e,t).promise}function un(r,e,t){return n.all(r,t).then(function(a){if(!y(e))throw new TypeError("You must pass a function as map's second argument.");for(var i=a.length,s=new Array(i),r=0;i>r;r++)s[r]=e(a[r]);return n.all(s,t)})}function L(){this.value=void 0}function et(e){try{return e.then}catch(t){return f.value=t,f}}function M(e,t,n){try{e.apply(t,n)}catch(r){return f.value=r,f}}function nt(n,r){for(var a,e,i={},s=n.length,o=new Array(s),t=0;s>t;t++)o[t]=n[t];for(e=0;e<r.length;e++)a=r[e],i[a]=o[e+1];return i}function rt(t){for(var n=t.length,r=new Array(n-1),e=1;n>e;e++)r[e-1]=t[e];return r}function at(e,t){return{then:function(n,r){return e.call(t,n,r)}}}function cn(r,e){var i=function(){for(var o,d=this,p=arguments.length,l=new Array(p+1),i=!1,c=0;p>c;++c){if(o=arguments[c],!i){if(i=lt(o),i===X){var f=new n(u);return t(f,X.value),f}i&&i!==!0&&(o=at(i,o))}l[c]=o}var s=new n(u);return l[p]=function(n,r){n?t(s,n):void 0===e?a(s,r):e===!0?a(s,rt(arguments)):S(e)?a(s,nt(arguments,e)):a(s,r)},i?ot(s,l,r,d):st(s,l,r,d)};return i.__proto__=r,i}function st(e,r,a,i){var n=M(a,i,r);return n===f&&t(e,n.value),e}function ot(e,r,a,i){return n.all(r).then(function(r){var n=M(a,i,r);return n===f&&t(e,n.value),e})}function lt(e){return e&&"object"==typeof e?e.constructor===n?!0:et(e):!1}function ut(e,t){return n.race(e,t)}function ct(e,t){return n.reject(e,t)}function pt(e,t){return n.resolve(e,t)}function dt(e){throw setTimeout(function(){throw e}),e}function ft(t,n){e.async(t,n)}function O(){e.on.apply(e,arguments)}function gt(){e.off.apply(e,arguments)}var B;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var S=B,U=Date.now||function(){return(new Date).getTime()},F=Object.create||function(e){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof e)throw new TypeError("Argument must be an object");return N.prototype=e,new N},I={mixin:function(e){return e.on=this.on,e.off=this.off,e.trigger=this.trigger,e._promiseCallbacks=void 0,e},on:function(t,n){var e,r=x(this);e=r[t],e||(e=r[t]=[]),-1===J(e,n)&&e.push(n)},off:function(n,r){var e,t,a=x(this);return r?(e=a[n],t=J(e,r),void(-1!==t&&e.splice(t,1))):void(a[n]=[])},trigger:function(n,r){var e,a,i=x(this);if(e=i[n])for(var t=0;t<e.length;t++)(a=e[t])(r)}},e={instrument:!1};I.mixin(e);var A=[],_=Xt,i=void 0,o=1,p=2,C=new Y,D=new Y,h=l;l.prototype._validateInput=function(e){return S(e)},l.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},l.prototype._init=function(){this._result=new Array(this.length)},l.prototype._enumerate=function(){for(var t=this.length,n=this.promise,r=this._input,e=0;n._state===i&&t>e;e++)this._eachEntry(r[e],e)},l.prototype._eachEntry=function(e,t){var n=this._instanceConstructor;Dt(e)?e.constructor===n&&e._state!==i?(e._onError=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(n.resolve(e),t):(this._remaining--,this._result[t]=this._makeResult(o,t,e))},l.prototype._settledAt=function(n,a,s){var e=this.promise;e._state===i&&(this._remaining--,this._abortOnReject&&n===p?t(e,s):this._result[a]=this._makeResult(n,a,s)),0===this._remaining&&r(e,this._result)},l.prototype._makeResult=function(t,n,e){return e},l.prototype._willSettleAt=function(n,e){var t=this;w(n,void 0,function(n){t._settledAt(o,e,n)},function(n){t._settledAt(p,e,n)})};var Pt=bt,kt=_t,j=Ct,Nt=wt,Bt="rsvp_"+U()+"-",Ot=0,n=s;s.cast=j,s.all=Pt,s.race=kt,s.resolve=j,s.reject=Nt,s.prototype={constructor:s,_guidKey:Bt,_onError:function(t){e.async(function(n){setTimeout(function(){n._onError&&e.trigger("error",t)},0)},this)},then:function(a,i,s){var t=this,n=t._state;if(n===o&&!a||n===p&&!i)return e.instrument&&_("chained",this,this),this;t._onError=null;var r=new this.constructor(u,s),l=t._result;if(e.instrument&&_("chained",t,r),n){var c=arguments[n-1];e.async(function(){$(n,r,c,l)})}else w(t,r,a,i);return r},"catch":function(e,t){return this.then(null,e,t)},"finally":function(e,n){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){throw n})},n)}},v.prototype=F(h.prototype),v.prototype._superConstructor=h,v.prototype._makeResult=q,v.prototype._validationError=function(){return new Error("allSettled must be called with an array")};var H,Z,jt=xt,qt=Ft,d=0,Ut=({}.toString,Et),G="undefined"!=typeof window?window:void 0,z=G||{},V=z.MutationObserver||z.WebKitMutationObserver,Vt="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,g=new Array(1e3);Z="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?It():V?Lt():Vt?Rt():void 0===G&&"function"==typeof require?Gt():R();var Wt=zt,Kt=Yt,W=c;c.prototype=F(h.prototype),c.prototype._superConstructor=h,c.prototype._init=function(){this._result={}},c.prototype._validateInput=function(e){return e&&"object"==typeof e},c.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},c.prototype._enumerate=function(){var s=this.promise,e=this._input,t=[];for(var n in e)s._state===i&&e.hasOwnProperty(n)&&t.push({position:n,entry:e[n]});var o=t.length;this._remaining=o;for(var r,a=0;s._state===i&&o>a;a++)r=t[a],this._eachEntry(r.entry,r.position)},m.prototype=F(W.prototype),m.prototype._superConstructor=h,m.prototype._makeResult=q,m.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var Jt=tn,Zt=ln,Qt=un,f=new L,X=new L,nn=cn,rn=ut,an=ct,sn=pt,on=dt;e.async=Ut;if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var T=window.__PROMISE_INSTRUMENTATION__;K("instrument",!0);for(var k in T)T.hasOwnProperty(k)&&O(k,T[k])}var P={race:rn,Promise:n,allSettled:jt,hash:Zt,hashSettled:Jt,denodeify:nn,on:O,off:gt,map:Qt,filter:Kt,resolve:sn,reject:an,all:qt,rethrow:on,defer:Wt,EventTarget:I,configure:K,async:ft};"function"==typeof define&&define.amd?define("rsvp",[],function(){return P}):"undefined"!=typeof module&&module.exports?module.exports=P:"undefined"!=typeof this&&(this.RSVP=P)}.call(this),define("models/Component",["require","backbone"],function(n){var r=n("backbone"),t=r.Model,e=t.extend();return e.LOGIN="login",e.LANG="lang",e.PAYMENT_SUMMARY="paymentsummary",e.BAGGAGE_FEE="bagfee",e.CART="cart",e.FLOW_MESSAGES="flomes",e.PNR_INFO="pnrinfo",e.FLIGHT_DETAILS="flightsdetails",e.FLIGHT_LIST="flc",e.FLIGHT_SEARCH="fsc",e.MY_TRIPS="mytrips",e.SEATS="seats",e.ANCILLARY="ancillary",e.PAYC="payc",e.PAYMENT_SLIDER="paymentslider",e.SSCI_ITINERARY="ssciitinerary",e.prototype.get=function(r){var e=t.prototype.get.call(this,r);if(void 0===e){var n=this.get("data");return n&&n.model?n.model[r]:e}return e},e.findAmount=function(e,t){var n=0;return e&&e.priceAlternatives&&_.every(e.priceAlternatives,function(e){return e.pricesPerCurrency&&e.pricesPerCurrency[t]&&e.pricesPerCurrency[t].amount?(n=parseFloat(e.pricesPerCurrency[t].amount),!1):!0}),n},e.prototype.getConfig=function(e){return void 0===e?this.attributes.data.config:this.attributes.data.config[e]},e.prototype.getModel=function(e){return void 0===e?this.attributes.data.model:this.attributes.data.model[e]},e}),define("models/BagFee",["require","./Component"],function(e){var t=e("./Component");return t.extend()}),define("models/FlightsDetails",["require","./Component"],function(t){var n=t("./Component"),e=n.extend();return e.prototype.getFreeBagsPartFlightInfo=function(){var t=this.get("passengers"),n=this.get("itineraryParts"),e=[];return t&&_.each(t,function(t){_.each(n,function(n,r){var i=e[r]?e[r].quantity:0,a=t.bagAllowance[n.segments[0].stringId],s=a&&a.pieces>0?a.pieces:0;e[r]={route:n.originCode+"-"+n.destinationCode,quantity:parseInt(s+i,10)}})}),e},e}),define("models/Model",["require","backbone"],function(t){var n=t("backbone"),r=n.Model,e=r.extend();return e.getDeepProperty=function(n,r){if(0===r.length)return n;var t=r.split(".");return 1===t.length?n[t[0]]:void 0!==n[t[0]]&&_.isObject(n[t[0]])?e.getDeepProperty(n[t[0]],t.slice(1).join(".")):n[t[0]]},e.prototype.getDeepProperty=function(t){return e.getDeepProperty(this,t)
},e}),define("models/User",["require","./Model"],function(t){var n=t("./Model"),e=n.extend();return e.prototype.getLoyaltyBalance=function(){return parseInt(this.get("loyaltyBalance"),10)||0},e}),define("models/Login",["require","./Component","models/User"],function(t){var n=t("./Component"),r=t("models/User"),e=n.extend();return e.prototype.isLoggedIn=function(){return this.get("loggedIn")===!0},e.prototype.isRedemptionSearch=function(){return this.get("redemptionSearch")===!0},e.prototype.getUser=function(){return this.user||(this.user=new r(this.get("user"))),this.user},e.prototype.getUpcomingTripSettings=function(){return this.isLoggedIn()?this.getConfig("upcomingTripsConfiguration"):void 0},e}),define("models/Cart",["require","./Component"],function(n){var t=n("./Component"),e=t.extend();return e.prototype.getCurrency=function(){return this.get("currencyCode")},e.prototype.getTotal=function(){return this.get("total")},e.prototype.getTaxesPrice=function(){return this.get("taxesPrice")},e.prototype.getAncillaries=function(){return this.get("ancillaries")},e.prototype.getTotalAmount=function(e){return t.findAmount(this.getTotal(),e||this.getCurrency())},e.prototype.getAncillariesAmount=function(e){return e||(e=this.getCurrency()),_.reduce(this.getAncillaries(),function(n,r){return n+t.findAmount(r.prices,e)},0)},e.prototype.getTotalTaxAmount=function(e){return t.findAmount(this.getTaxesPrice(),e||this.getCurrency())},e.prototype.isRBESelected=function(){return this.get("rbe")===!0},e}),define("models/FlowMessage",["require","./Component"],function(t){var n=t("./Component"),e=n.extend();return e.FREQUENT_FLYER_SOME_FLIGHTS_UNAVAILABLE="ffSomeFlightsUnavailable",e.FREQUENT_FLYER_FLIGHTS_UNAVAILABLE="ffFlightsUnavailable",e.NO_FLIGHTS_AVAILABLE_DUE_TO_NOT_ENOUGH_POINTS="noFlightsAvailableDueToNotEnoughPoints",e.PROMO_CODE_IS_NOT_VALID="promocodeNotValid",e}),define("collections/FlowMessages",["require","backbone","models/FlowMessage"],function(e){var t=e("backbone"),n=t.Collection,r=e("models/FlowMessage"),a=n.extend({model:r});return a}),define("models/Flomes",["require","./Component","collections/FlowMessages"],function(e){var n=e("./Component"),r=e("collections/FlowMessages"),t=n.extend();return t.prototype.getMessages=function(){return new r(this.get("messages"))},t}),define("models/Flc",["require","./Component"],function(t){var n=t("./Component"),e=n.extend();return e.prototype.isLoyaltyEnabled=function(){return void 0!==this.get("rbe")},e.prototype.isRBESelected=function(){return this.get("rbe")===!0},e.prototype.isBundledDynamicState=function(){return"bundled"===this.getDynamicState().toLowerCase()},e.prototype.getDynamicState=function(){return this.get("dynamicState")||""},e}),define("models/Fsc",["require","./Component"],function(e){var t=e("./Component"),n=t.extend();return n}),define("models/Lang",["require","./Component"],function(n){var t=n("./Component"),e=t.extend();return e.prototype.initialize=function(){t.prototype.initialize.apply(this,arguments),this.settings=Sabre.settings},e.prototype.isEnabled=function(){return this.settings.isCurrencyEnabled()&&this.getConfig("enabled")===!0},e.prototype.getDefaultCurrency=function(){return this.get("data").model.currency},e.prototype.setDefaultCurrency=function(e){this.get("data").model.currency=e},e.prototype.isTooltipEnabled=function(){return this.isEnabled()&&this.get("data").config.currencyToolTipEnabled},e.prototype.getTooltipTime=function(){return this.get("data").config.tooltipDisplayTime},e}),define("models/Number",["require"],function(){var e={};return e.format=function(n,e,r,i){e=isNaN(e)?2:e,i=i||".",r=r||",",n=Math.abs(+n||0).toFixed(e);var s=0>n?"-":"",a=String(parseInt(n,10)),t=a.length;return t=t>3?t%3:0,s+(t?a.substr(0,t)+r:"")+a.substr(t).replace(/(\d{3})(?=\d)/g,"$1"+r)+(e?i+Math.abs(n-a).toFixed(e).slice(2):"")},e.formatPositiveInteger=function(e){return this.format(e,0)},e}),define("models/Price",["require","./Number","underscore"],function(a){var r,n=a("./Number"),e=a("underscore"),t={};return t.format=function(r,i,a,s){a=void 0===a?1:a;var o=e.find(r,function(t){return e.find(t.pricesPerCurrency,function(e){return e.currency.ffcurrency})});return o&&(r=e.sortBy(r,function(t){return e.find(t.pricesPerCurrency,function(e){return e.currency.ffcurrency})?-1/0:1/0}),e.forEach(r,function(t,n){r[n].pricesPerCurrency=e.sortBy(t.pricesPerCurrency,function(e){return e.currency.ffcurrency?-1/0:1/0})})),s?e.map(r,function(r){return e.map(r.pricesPerCurrency,function(e){return e.currency.ffcurrency?n.format(i===!0?0:e.amount*a,0)+" "+Sabre.translator.translate(Sabre._config.sat.frequentFlyer.denomination):t.formatSimple(i===!0?0:e.amount*a,e.currency.code,void 0,!1,s)}).join(" "+Sabre.translator.translate("prices.plus")+" ")}).join(" "+Sabre.translator.translate("prices.or")+" "):'<span class="price-wrapper '+(o?"mixed":"")+'">'+e.map(r,function(r){return'<span class="per-currency">'+e.map(r.pricesPerCurrency,function(e){return e.currency.ffcurrency?'<span class="price ffcurrency"><span class="amount">'+n.format(i===!0?0:e.amount*a,0)+'</span><span class="sp"></span><span class="code">'+Sabre.translator.translate(Sabre._config.sat.frequentFlyer.denomination)+"</span></span>":'<span class="price">'+t.formatSimple(i===!0?0:e.amount*a,e.currency.code)+"</span>"}).join('<span class="plus">'+Sabre.translator.translate("prices.plus")+"</span>")+"</span>"}).join('<span class="or">'+Sabre.translator.translate("prices.or")+"</span>")+"</span>"},t.reduce=function(t){return e.reduce(t,function(n,t){var r=void 0!==t.total&&null!==t.total?t.total.priceAlternatives:void 0!==t.prices&&null!==t.prices?t.prices.priceAlternatives:t;return e.reduce(r,function(n,r,t){return e.reduce(r.pricesPerCurrency,function(e,n,r){return parseFloat(n.amount)>0&&(void 0===e.priceAlternatives[t]&&(e.priceAlternatives[t]={pricesPerCurrency:{}}),void 0===e.priceAlternatives[t].pricesPerCurrency[r]&&(e.priceAlternatives[t].pricesPerCurrency[r]={amount:0,currency:n.currency}),e.priceAlternatives[t].pricesPerCurrency[r].amount+=parseFloat(n.amount)),e},n)},n)},{priceAlternatives:[]})},t.formatPoint=function(e){return'<span class="amount">'+n.format(e,0)+'</span><span class="sp"></span><span class="code">'+Sabre.translator.translate(Sabre._config.sat.frequentFlyer.denomination)+"</span>"},t.formatSimple=function(s,t,r,p,o){if(p===!0)return s;if("withCurrency"===p)return o?s+" "+t:'<span class="amount">'+s+'</span><span class="sp"></span><span class="currency">'+t+"</span>";r=r||Sabre._config.sat.globalCurrencyConfiguration,r.currencySeparator=e.unescape(""===r.currencySeparator?Sabre._config.sat.globalCurrencyConfiguration.currencySeparator:r.currencySeparator);var a=Sabre._config.sat.globalCurrencyConfiguration,l="",i=r.currencySeparator,u="",c="";return i&&(i="&nbsp;"===i?" ":i,i=o?" ":'<span class="sp">'+i.trim()+"</span>"),"SYMBOL"===r.currencySymbolFormat&&void 0!==a.currencySymbols[t]?l=o?a.currencySymbols[t]:'<span class="code">'+a.currencySymbols[t]+"</span>":"NONE"!==r.currencySymbolFormat&&(l=o?Sabre.translator.translate(t):'<span class="code" data-translate="'+t+'"></span>'),"BEFORE"===r.currencyOrderFormat?u=l+i:"AFTER"===r.currencyOrderFormat&&(c=i+l),o?u+n.format(s,void 0===a.currencyScales[t]?a.priceDecimalDigits:a.currencyScales[t])+c:u+'<span class="amount">'+n.format(s,void 0===a.currencyScales[t]?a.priceDecimalDigits:a.currencyScales[t])+"</span>"+c},t.getEmpty=function(){if(void 0===r){var e=Sabre._config.sat.globalCurrencyConfiguration;r=t.formatSimple(0,e.defaultCurrency,e)}return r},t}),define("models/Ancillary",["require","./Component","./Price"],function(t){var n=t("./Component"),r=t("./Price"),e=n.extend();return e.prototype.getItemPrice=function(e,t,n){return r.format(e||{},t,n)},e.prototype.getSegmentItemPrice=function(e,t,n){return this.getItemPrice(void 0===e||""===e?{}:this.get("ancillaryItem").prices[e].priceAlternatives,t,n)},e.prototype.getSegmentPriceAlternatives=function(e){return this.get("ancillaryItem").prices[e].priceAlternatives},e.prototype.getBagMinimumUpgradePrice=function(e){return this.getConfig(e?"bagMinimumUpgradeLoyaltyPrice":"bagMinimumUpgradePrice")},e}),define("models/PaymentSummary",["require","./Component"],function(n){var t=n("./Component"),e=t.extend();return e.prototype.getCurrency=function(){return this.get("currency")},e.prototype.getTotalPrice=function(){return this.get("totalPrice")},e.prototype.getAncillariesPrice=function(){return this.get("ancillariesPrice")},e.prototype.getSeatsPrice=function(){return this.get("seatsPrice")},e.prototype.getTaxesPrice=function(){return this.get("taxesPrice")},e.prototype.getCarbonOffsetPrice=function(){return this.get("carbonOffsetPrice")},e.prototype.getTotalPriceAmount=function(e){return t.findAmount(this.getTotalPrice(),e||this.getCurrency())},e.prototype.getAncillariesPriceAmount=function(e){return t.findAmount(this.getAncillariesPrice(),e||this.getCurrency())},e.prototype.getTotalTaxAmount=function(e){return t.findAmount(this.getTaxesPrice(),e||this.getCurrency())},e.prototype.getTotalSeatsAmount=function(e){return t.findAmount(this.getSeatsPrice(),e||this.getCurrency())},e.prototype.getTotalCarbonOffsetAmount=function(e){return t.findAmount(this.getCarbonOffsetPrice(),e||this.getCurrency())},e}),define("dateFormat",["jquery"],function(s){var a={undefined:"undefined",number:"number","boolean":"boolean",string:"string","[object Function]":"function","[object RegExp]":"regexp","[object Array]":"array","[object Date]":"date","[object Error]":"error"},o=100/60,n=function(e){return a[typeof e]||a[Object.prototype.toString.call(e)]||(e?"object":"null")},r=function(e){return"date"===n(e)&&"Invalid Date"!==e.toString()&&!isNaN(e)},l=function(e){var t=n(e);switch(t){case"number":return isFinite(e);case"null":case"undefined":return!1;default:return!!t}},t=function(t,n,e){for(void 0===e&&(e=10),n=String(n);parseInt(t,10)<e&&e>1;)t=n+t,e/=10;return t.toString()},i=function(e){var t;if(e&&e.indexOf(":")){var n=e.split(":"),r=36e5*parseInt(n[0],10),a=o*parseInt(n[1],10)/100*36e5;t=r+a}return t||0},e={dateResources:{a:["sun","mon","tue","wed","thu","fri","sat"],A:["sunday","monday","tuesday","wednesday","tuesday","friday","saturday"],b:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],B:["january","february","march","april","may","june","july","august","september","october","november","december"],c:"%Y-%m-%dT%H:%M:%S%z",p:["am","pm"],P:["am","pm"],x:"%Y-%m-%d",X:"%H:%M:%S"},formats:{a:function(t,n){return e.getDateTranslation("a",n.a[t.getDay()])},A:function(t,n){return e.getDateTranslation("A",n.A[t.getDay()])},b:function(t,n){return e.getDateTranslation("b",n.b[t.getMonth()])},B:function(t,n){return e.getDateTranslation("B",n.B[t.getMonth()])},C:function(e){return t(parseInt(e.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(n){return t(parseInt(e.formats.G(n)%100,10),0)},G:function(t){var n=t.getFullYear(),r=parseInt(e.formats.V(t),10),a=parseInt(e.formats.W(t),10);return a>r?n++:0===a&&r>=52&&n--,n},H:["getHours","0"],I:function(n){var e=n.getHours()%12;return t(0===e?12:e,0)},j:function(e){var n=new Date(String(e.getFullYear())+"/1/1 GMT"),r=new Date(String(e.getFullYear())+"/"+(e.getMonth()+1)+"/"+e.getDate()+" GMT"),a=r-n,i=parseInt(a/6e4/60/24,10)+1;return t(i,0,100)},k:["getHours"," "],l:function(n){var e=n.getHours()%12;return t(0===e?12:e," ")},m:function(e){return t(e.getMonth()+1,0)},M:["getMinutes","0"],p:function(t,n){return e.getDateTranslation("p",n.p[t.getHours()>=12?1:0])},P:function(t,n){return e.getDateTranslation("P",n.p[t.getHours()>=12?1:0])},s:function(e){return parseInt(e.getTime()/1e3,10)},S:["getSeconds","0"],u:function(t){var e=t.getDay();return 0===e?7:e},U:function(n){var r=parseInt(e.formats.j(n),10),a=6-n.getDay(),i=parseInt((r+a)/7,10);return t(i,0)},V:function(r){var i=parseInt(e.formats.W(r),10),a=new Date(String(r.getFullYear())+"/1/1").getDay(),n=i+(a>4||1>=a?0:1);return 53===n&&new Date(String(r.getFullYear())+"/12/31").getDay()<4?n=1:0===n&&(n=e.formats.V(new Date(String(r.getFullYear()-1)+"/12/31"))),t(n,0)},w:"getDay",W:function(n){var r=parseInt(e.formats.j(n),10),a=7-e.formats.u(n),i=parseInt((r+a)/7,10);return t(i,0,10)},y:function(e){return t(e.getFullYear()%100,0)},Y:"getFullYear",z:function(n){var e=n.getTimezoneOffset(),r=t(parseInt(Math.abs(e/60),10),0),a=t(Math.abs(e%60),0);return(e>0?"-":"+")+r+a},Z:function(n){var t=n.toString().replace(/^.*:\d\d( GMT[+\-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");return t.length>4&&(t=e.formats.z(n)),t},"%":function(){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"},getDateTranslation:function(e,t){return Sabre.translations[Sabre._config.global.language]["label.datelocale."+e+"."+t]},getArrayTranslation:function(n,r){var t=[];return s.each(r,function(a,r){t.push(e.getDateTranslation(n,r))}),t},parse:function(t,n){var e=new Date(+t||t);return"number"==typeof t&&(e=new Date(e.getTime()+6e4*e.getTimezoneOffset()+i(n))),r(e)?e:null},parseWithoutZone:function(t,n){var e=new Date(+t||t);return"number"==typeof t&&(e=new Date(e.getTime()+6e4*e.getTimezoneOffset()+i(n))),r(e)?e:null},format:function(a,s){if(s=s||{},!r(a))return l(a)?a:"";var i;i=s.format||"%Y-%m-%d";for(var o=function(r,t){if("r"===t)return e.dateResources[t];var n=e.aggregates[t];return"locale"===n?e.dateResources[t]:n},u=function(s,i){var r=e.formats[i];switch(n(r)){case"string":return a[r]();case"function":return r.call(a,a,e.dateResources);case"array":if("string"===n(r[0]))return t(a[r[0]](),r[1])}return i};i.match(/%[cDFhnrRtTxX]/);)i=i.replace(/%([cDFhnrRtTxX])/g,o);return i.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,u)}};return e}),define("models/Trip",["require","./Model","dateFormat"],function(t){var n=t("./Model"),r=t("dateFormat"),e=n.extend();return e.prototype.getDepartureDate=function(){return r.parse(this.get("departureDate"))},e.prototype.getDepartureAirport=function(){return this.get("departurePlace")},e.prototype.getReturnAirport=function(){return this.get("returnPlace")},e.prototype.isReturnAirportAvailable=function(){return"notAvailable"!==this.get("returnPlace")},e.prototype.getPNR=function(){return this.get("reservationNumber")},e.prototype.isEligibleForCheckin=function(){return this.get("eligibleForCheckin")===!0},e.prototype.isActive=function(){return"ACTIVE"===this.getState()},e.prototype.getState=function(){return this.get("state")},e.prototype.getNumberOfHoursDifferentFrom=function(e){return e||(e=new Date),(this.getDepartureDate().valueOf()-e.valueOf())/36e5},e}),define("models/DateTime",["require","dateFormat"],function(t){var e={},n=t("dateFormat");return e.nowWithTimeZone=function(){var e=new Date;return new Date(e.getTime()+6e4*e.getTimezoneOffset())},e.compare=function(t,n){return t instanceof Date||(t=e.parse(t)),n instanceof Date||(n=e.parse(n)),t.valueOf()<n.valueOf()?-1:t.valueOf()>n.valueOf()?1:0},e.parse=function(e){return n.parse(e)},e}),define("collections/Trips",["require","backbone","models/Trip","models/DateTime"],function(t){var r=t("backbone"),a=r.Collection,i=t("models/Trip"),n=t("models/DateTime"),e=a.extend({model:i});return e.prototype.comparator=function(e){return e.getDepartureDate().valueOf()},e.prototype.active=function(e){return this.filter(e?function(t){return t.isActive()===!0&&-1!==n.compare(t.getDepartureDate(),e)}:function(e){return e.isActive()===!0})},e.prototype.upcoming=function(e){var r=n.nowWithTimeZone(),t=_.sortBy(this.active(),function(e){return e.getDepartureDate().valueOf()});return e.numberOfTrips&&e.numberOfHoursDifferentFromNow?_.first(_.filter(t,function(t){return t.getNumberOfHoursDifferentFrom(r)<e.numberOfHoursDifferentFromNow}),e.numberOfTrips):e.numberOfTrips?_.first(t,e.numberOfTrips):e.numberOfHoursDifferentFromNow?_.filter(t,function(t){return t.getNumberOfHoursDifferentFrom(r)<e.numberOfHoursDifferentFromNow}):t},e}),define("models/MyTrips",["require","./Component","collections/Trips"],function(e){var n=e("./Component"),r=e("collections/Trips"),t=n.extend();return t.prototype.getTrips=function(){return this.trips||(this.trips=new r(this.get("reservations"))),this.trips},t}),define("models/Seats",["require","./Component"],function(t){var n=t("./Component"),e=n.extend();return e.prototype.getMinimumUpgradePrice=function(e){return this.getConfig(e?"minimumUpgradeLoyaltyPrice":"minimumUpgradePrice")},e}),define("models/Payc",["require","./Component"],function(t){var n=t("./Component"),e=n.extend();return e.prototype.isLoyaltyEnabled=function(){return void 0!==this.get("rbe")},e.prototype.isRBESelected=function(){return this.get("rbe")===!0},e}),define("models/PnrInfo",["require","./Component"],function(e){var t=e("./Component");return t.extend()}),define("models/PaymentSlider",["require","./Component"],function(t){var n=t("./Component"),e=n.extend({});return e.prototype.isEnabled=function(){return this.get("sliderAvailable")===!0},e.prototype.getTicks=function(){return(this.get("sliderTicks")||{ticks:[]}).ticks},e.prototype.getTick=function(e){return this.getTicks()[e]},e.prototype.getMinimumAwardsTick=function(){var e=this.getTicks();return _.min(e,function(e){return parseInt(e.awardAmount,10)})},e.prototype.getMaximumAwardsTick=function(){var e=this.getTicks();return _.max(e,function(e){return parseInt(e.awardAmount,10)})},e.prototype.getMinimumMonetaryTick=function(){var e=this.getTicks();return _.min(e,function(e){return parseFloat(e.monetaryAmount)})},e.prototype.getMaximumMonetaryTick=function(){var e=this.getTicks();return _.max(e,function(e){return parseFloat(e.monetaryAmount)})},e.prototype.getCurrentTick=function(){return this.get("currentTick")},e.prototype.getTotalAvailableAwards=function(){return this.get("totalAvailableAwards")},e}),define("models/SsciItinerary",["require","./Component"],function(t){var n=t("./Component"),e=n.extend();return e.prototype.getPassengerCounts=function(e){e=e||!1;var t=function(e,t){void 0===e[t]&&(e[t]=0),e[t]++};return _.reduce(this.get("passengers")||{},function(n,r){if(!e||e&&r.selectedForCheckIn)switch(r.type){case"ADULT":t(n,"ADT"),r.infant&&t(n,"INF");break;case"CHILD":t(n,"CHD");break;case"INFANT":t(n,"INF")}return n},{})},e.prototype.getArrivalAirport=function(){var t,e=this.get("checkInEligibleSegments");return e&&(t=e[0].flightDetail.arrivalAirport,e.length>1&&(t=e[e.length-1].flightDetail.arrivalAirport,t===e[0].flightDetail.departureAirport&&(t=e[e.length-1].flightDetail.departureAirport))),t},e}),define("collections/Components",["require","backbone","../models/Component","../models/BagFee","../models/FlightsDetails","../models/Login","../models/Cart","../models/Flomes","../models/Flc","../models/Fsc","../models/Lang","../models/Ancillary","../models/PaymentSummary","../models/MyTrips","../models/Seats","../models/Payc","../models/PnrInfo","../models/PaymentSlider","../models/SsciItinerary"],function(t){var a=t("backbone"),r=a.Collection,n=t("../models/Component"),p=t("../models/BagFee"),i=t("../models/FlightsDetails"),s=t("../models/Login"),o=t("../models/Cart"),l=t("../models/Flomes"),u=t("../models/Flc"),c=t("../models/Fsc"),C=t("../models/Lang"),d=t("../models/Ancillary"),f=t("../models/PaymentSummary"),h=t("../models/MyTrips"),g=t("../models/Seats"),m=t("../models/Payc"),v=t("../models/PnrInfo"),y=t("../models/PaymentSlider"),b=t("../models/SsciItinerary"),e=r.extend({model:n});return e.modelTypeMap={},e.modelTypeMap[n.PAYMENT_SUMMARY]=f,e.modelTypeMap[n.BAGGAGE_FEE]=p,e.modelTypeMap[n.CART]=o,e.modelTypeMap[n.FLOW_MESSAGES]=l,e.modelTypeMap[n.PNR_INFO]=v,e.modelTypeMap[n.FLIGHT_DETAILS]=i,e.modelTypeMap[n.FLIGHT_LIST]=u,e.modelTypeMap[n.LANG]=C,e.modelTypeMap[n.FLIGHT_SEARCH]=c,e.modelTypeMap[n.ANCILLARY]=d,e.modelTypeMap[n.LOGIN]=s,e.modelTypeMap[n.MY_TRIPS]=h,e.modelTypeMap[n.SEATS]=g,e.modelTypeMap[n.PAYC]=m,e.modelTypeMap[n.PAYMENT_SLIDER]=y,e.modelTypeMap[n.SSCI_ITINERARY]=b,e.prototype.get=function(n){var t=r.prototype.get.call(this,n);return!t||!_.contains(_.keys(e.modelTypeMap),n)||t instanceof e.modelTypeMap[n]?t:new e.modelTypeMap[n](t instanceof a.Model?t.toJSON():t)},e}),define("components/APPLICATION/modal",["jquery","backbone"],function(e,t){var n={buttons:[{name:"Close me!","class":"modal-close"}],center:!0,fullSize:!1};return t.View.extend({el:"#modal",events:{"click .modal-close":"close"},simple:function(t,n,e){e=e||"label.OK",this.show('<p class="element-container" data-translate="'+t+'"></p>',{buttons:[{name:e,"class":"modal-close"}],title:n})},show:function(i,r){this.$el.addClass(Sabre.config.animations.modal.main),r=_.extend({},n,r||{});var s=this.$el.find(".buttons"),o=this.$el.find(".modal-header"),l=this.$el.find(".modal-title"),a=this.$el.find(".content");a.empty(),i instanceof t.View?a.append(i.$el):a.html(i),a.translate(),s.html(""),void 0!==r.buttons&&(e.each(r.buttons,function(a,t){var r=_.uniqueId("modal_btn_"),n=e("<button>",{id:r,"class":"btn btn-block "+(void 0!==t.class?t.class:""),"data-translate":t.name});void 0!==t.handler&&n.on("click",t.handler),s.append(n)}),s.translate()),void 0!==r.title?(l.setTranslate(r.title).translate(),o.show()):(l.html(""),o.hide()),this.$el.attr("class","modal"),void 0!==r.class&&this.$el.addClass(r.class),this.$el.toggleClass("full",r.fullSize),Sabre.app.$el.toggleClass("full-modal",r.fullSize),Sabre.app.showOverlay(!0),this.$el.removeClass("hidden"),r.center&&!r.fullSize&&this.center(),r.fullSize&&Sabre.app.scrollTo(0),this.trigger("shown")},close:function(){Sabre.app.showOverlay(!1),this.$el.addClass("hidden"),Sabre.app.$el.removeClass("full-modal"),this.trigger("closed")},center:function(){this.$el.css({top:"50%",marginTop:-this.$el.outerHeight()/2})}})}),define("tpl",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("tpl!components/APPLICATION/tpl/googleanalytics.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push("",analytics,""),""==analytics||exists||__p.push("    <script type=\"text/javascript\">        (function() {            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);        })();    </script>"),__p.push("");return __p.join("")}}),define("components/APPLICATION/ga",["jquery","backbone","tpl!./tpl/googleanalytics.tpl"],function(e,t,n){var r=function(i){var a,s,e="",t="",n="",r="";if(null!==i)for(a=0;a<i.length;a++){if(t=i[a].configuration,n=i[a].transactionInfo,r=i[a].transactionItems,e+="<script type='text/javascript'>try { \n var _gaq = _gaq || []; \n",e=e+"_gaq.push(['_setAccount', '"+t.trackingId+"']); \n",t.sampleEnabled&&void 0!==t.sampleRate&&t.sampleRate>0&&(e=e+"_gaq.push(['_setSampleRate','"+t.sampleRate+"']); \n"),e+="_gaq.push(['_setAllowLinker',true]); \n",void 0!==t.domain&&(e=e+"_gaq.push(['_setDomainName','"+t.domain+"']); \n"),t.sampleEnabled&&void 0!==t.siteSpeedSampleRate&&t.siteSpeedSampleRate>0&&(e=e+"_gaq.push(['_setSiteSpeedSampleRate','"+t.siteSpeedSampleRate+"']); \n"),e=e+"_gaq.push(['_trackPageview','"+(null!==i[a].uri?i[a].uri:"")+"']); \n",t.enableSalesTracking&&void 0!==n&&(e=e+"_gaq.push(['_addTrans','"+n.orderId+"-2010','"+n.affiliation+"','"+n.total+"','",e=e+n.tax+"','"+n.shipping+"','"+n.city+"','"+n.state+"','"+n.country+"']); \n",void 0!==r))for(s=0;r>s;s++)e=e+"_gaq.push(['_addItem','"+r[0].orderId+"-2010','"+r[0].code+"','"+r[0].productName+"','",e=e+r[0].category+"','"+r[0].price+"','"+r[0].quantity+"']); } \n",e+="_gaq.push(['_trackTrans']); \n";e+="} \n catch(e) { }</script>"}return e};return t.View.extend({initialize:function(){var o,t,u=this,i=void 0!==Sabre.getComponent("analytics")?Sabre.getComponent("analytics").model:null,l="",a=document.getElementsByTagName("script"),s=!1;for(t=0;t<a.length;t++)if(null!==a[t].getAttribute("src")&&-1!==a[t].getAttribute("src").indexOf("google-analytics")){s=!0,o=a[t];break}null!==i&&i.length>0?l=r(i):(e("#ga").empty(),s&&document.getElementsByTagName("head")[0].removeChild(o)),u.$el.html(n({analytics:l,exists:s})).translate()}})}),define("components/APPLICATION/storage",["jquery"],function(e){function t(i){var t,r,n,a=document.cookie.split(";");for(t=0,r=a.length;r>t;t++)if(n=a[t].split("="),e.trim(n[0])===i)return n.shift(),n.join("=");return null}return{type:"session",set:function(n,e){var r=window[this.type+"Storage"];try{void 0===e?r.removeItem(n):r.setItem(n,e)}catch(i){var a="";if("local"===this.type||void 0===e){var t=new Date;t.setTime(void 0===e?t.getTime()-31536e6:t.getTime()+31536e6),a=";expires="+t.toGMTString()}window.document.cookie=n+"="+e+a}},get:function(n,r){var a=window[this.type+"Storage"],e=null;try{e=a.getItem(n)}catch(i){}finally{null===e&&(e=t(n))}return null!==e?e:r},remove:function(e){this.set(e,void 0)},clear:function(){var e,t=window[this.type+"Storage"];if(t&&_.isObject(t))for(var n=sessionStorage.length;n--;)e=sessionStorage.key(n),sessionStorage.removeItem(e);else window.document.cookie=""}}}),define("models/EventBus",["require","backbone"],function(t){var n=t("backbone"),r=n.Model,e=r.extend();return e.ANALYTIC_TRACKING="ANALYTIC_TRACKING",e.PAGE_LOADED="PAGE_LOADED",e.PAGE_CLOSED="PAGE_CLOSED",e.EXECUTION_KEY_CHANGED="EXECUTION_KEY_CHANGED",e.ANCILLARIES_SAVED="ANCILLARIES_SAVED",e.HIDE_DIALOGS="HIDE_DIALOGS",e.BODY_CLICKED="BODY_CLICKED",e.FLIGHTS_SELECTED="FLIGHTS_SELECTED",e.FLIGHTS_UNSELECTED="FLIGHTS_UNSELECTED",e.PASSENGERS_DATA_PROVIDED="PASSENGERS_DATA_PROVIDED",e.SUBMIT_PAGE="SUBMIT_PAGE",e.SEATS_SELECTED="SEATS_SELECTED",e.BLOCK_SUBMIT="BLOCK_SUBMIT",e.UNBLOCK_SUBMIT="UNBLOCK_SUBMIT",e.UPDATE_SUBMIT_TEXT="UPDATE_SUBMIT_TEXT",e.UPDATE_FARE_RULES_TEXT="UPDATE_FARE_RULES_TEXT",e.LOCK_FARE_APPLIED="LOCK_FARE_APPLIED",e.USER_LOGGED_IN="USER_LOGGED_IN",e.SHOW_LOGIN_FORM="SHOW_LOGIN_FORM",e.CHECKIN_SELECTION_CHANGED="CHECKIN_SELECTION_CHANGED",e.CHECKIN_SHOW_ITINERARY_DETAILS="CHECKIN_SHOW_ITINERARY_DETAILS",e.CHECKIN_SHOW_PASSENGER_SELECTION="CHECKIN_SHOW_PASSENGER_SELECTION",e.CHECKIN_SHOW_DOCUMENTS_MODAL="CHECKIN_SHOW_DOCUMENTS_MODAL",e.CHECKIN_HIDE_DOCUMENTS_MODAL="CHECKIN_HIDE_DOCUMENTS_MODAL",e.PASSENGERS_DOCUMENTS_PROVIDED="PASSENGERS_DOCUMENTS_PROVIDED",e.BOOKING_COMPLETED="BOOKING_COMPLETED",e.CURRENCY_UPDATED="CURRENCY_UPDATED",e.DISABLE_BACK_BUTTON="DISABLE_BACK_BUTTON",e.HIDE_NAVIGATION="HIDE_NAVIGATION",e.SHOW_BOARDING_PASS="SHOW_BOARDING_PASS",e.HIDE_BOARDING_PASS="HIDE_BOARDING_PASS",e.LANGUAGE_CHANGED="LANGUAGE_CHANGED",e}),define("models/Analytic",["require","backbone","./Component","dateFormat"],function(n){var a=n("backbone"),r=a.Model,i=n("./Component"),t=n("dateFormat"),e=r.extend({});return e.keys=["PageName","SiteLanguage","Storefront","BuildNumber","FlowType","PromoCode","ErrorTextKey","FFPLoggedIn","FFPFields","DateUTC","TimeUTC","ClientDateUTC","ClientTimeUTC","PNR","Currency","TotalAmount","FlightOND","FlightCabin","FlightType","FlightTripDates","FlightTripDuration","FlightPace","FlightADTPax","FlightCHDPax","FlightINFPax","FlightPaxTypes","FlightSegmentNumbers","FlightSegment1RBD","FlightSegment1OND","FlightSegment1OperatingAirline","FlightSegment1FlightNumber","FlightSegment1DepartDateTime","FlightSegment1ArriveDateTime","FlightSegment2RBD","FlightSegment2OND","FlightSegment2OperatingAirline","FlightSegment2FlightNumber","FlightSegment2DepartDateTime","FlightSegment2ArriveDateTime","FlightSegment3RBD","FlightSegment3OND","FlightSegment3OperatingAirline","FlightSegment3FlightNumber","FlightSegment3DepartDateTime","FlightSegment3ArriveDateTime","FlightSegment4RBD","FlightSegment4OND","FlightSegment4OperatingAirline","FlightSegment4FlightNumber","FlightSegment4DepartDateTime","FlightSegment4ArriveDateTime","ProductFlightSKU","ProductFlightName","ProductFlightCategory","ProductFlightAmount","ProductBaggageSKU","ProductBaggageName","ProductBaggageCategory","ProductBaggageAmount","ProductSeatSKU","ProductSeatName","ProductSeatCategory","ProductSeatAmount","ProductCarbonOffsetSKU","ProductCarbonOffsetName","ProductCarbonOffsetCategory","ProductCarbonOffsetAmount","TransactionId","TransactionDate","TransactionAffiliation","TransactionTotal","TransactionTax","TransactionPaymentType","TransactionCurrency","TransactionPromoCode","TransactionProducts"],e.FlowTypes={booking:"BOOKING",redemption:"REDEMPTION",exchange:"EXCHANGE",upgrade:"UPGRADE",ancillariesMTo:"ANCILLARIES_MTO",singlePages:"SINGLE_PAGES",checkIn:"CHECK_IN"},e.prototype.initialize=function(t){r.prototype.initialize.call(this,t);var e=this.get("components");e&&(this.paymentSummary=e.get("paymentsummary"),this.cart=e.get("cart"),this.pnr=e.get("pnrinfo"),this.flightsDetails=e.get("flightsdetails"),this.flomes=e.get("flomes"),this.bagFee=e.get("bagfee"),this.login=e.get("login")),this.config=t.config,this.pageCode=t.pageCode,this.components=e,this.pageData=t.pageData},e.prototype.collect=function(t){var n=this;return _.isEmpty(t)&&(t=e.keys),_.reduce(t,function(t,r){var e,a="get"+r;if("function"==typeof n[a])try{e=n[a](),(_.isNumber(e)||!_.isEmpty(e))&&(t[r]=e)}catch(i){}return t},{})},e.prototype.getStorefront=function(){return this.get("ipcc")||(void 0!==ipcc?ipcc:null)},e.prototype.getBuildNumber=function(){return this.get("buildNumber")||(void 0!==buildNo?buildNo:null)},e.prototype.getPageName=function(){return this.get("pageName")||document.title},e.prototype.getFlowType=function(){return this.get("flowType")||null},e.prototype.getSiteLanguage=function(){return this.get("language")||this.config.global.language},e.prototype.getPromoCode=function(){return null},e.prototype.getErrorTextKey=function(){if(this.flomes){var e=this.flomes.get("messages");return e?_.keys(_.reduce(e,function(t,e){return"error"===e.level.toLowerCase()&&(t[e.id]=e.originalMessage),t},{})).join(";"):null}return null},e.prototype.getFFPLoggedIn=function(){var e=this.login.get("user");return e&&e.ffNumber},e.prototype.getFFPFields=function(){var e=this.login.get("user");return e&&e.ffNumber?e.ffNumber||e.userName||null:null},e.prototype.getDateUTC=function(){return t.format(new Date(Sabre._config.global.currentTimeInMillis),{format:"%Y%m%d"})},e.prototype.getTimeUTC=function(){return t.format(new Date(Sabre._config.global.currentTimeInMillis),{format:"%H%M%S"})},e.prototype.getClientDateUTC=function(){return t.format(new Date,{format:"%Y%m%d"})},e.prototype.getClientTimeUTC=function(){return t.format(new Date,{format:"%H%M%S"})},e.prototype.getPNR=function(){return this.pnr?this.pnr.get("reloc")||null:null},e.prototype.getCurrency=function(){return this.paymentSummary?this.paymentSummary.getCurrency():null},e.prototype.getTotalAmount=function(){return this.cart?this.cart.getTotalAmount():null},e.prototype.getFlightOND=function(){return this.flightsDetails||this.cart?_.map((this.flightsDetails||this.cart).get("itineraryParts"),function(e){return(e.originCode||e.departureCode)+":"+(e.destinationCode||e.arrivalCode)}).join("-"):this.components.get("ssciitinerary")?_.map(this.components.get("ssciitinerary").get("data").model.checkInEligibleSegments,function(e){return e.flightDetail.departureAirport+":"+e.flightDetail.arrivalAirport}).join("-"):this.components.get("ssciboardingpass")?_.map(this.components.get("ssciboardingpass").get("data").model.flightsSelectedToCheckIn,function(e){return e.departureAirport+":"+e.arrivalAirport}).join("-"):null},e.prototype.getFlightCabin=function(){if(this.flightsDetails||this.cart){var e=(this.flightsDetails||this.cart).get("itineraryParts");return e&&e[0]&&(e[0].firstSegment||e[0].classOfService)?e[0].firstSegment?e[0].firstSegment.cabinClass.toUpperCase():(_.isArray(e[0].classOfService)?e[0].classOfService[0]:e[0].classOfService).toUpperCase():null}return null},e.prototype.getFlightType=function(){if(this.cart&&this.cart.get("tripType"))switch(this.cart.get("tripType")){case"ROUND_TRIP":return"RETURN";
case"ONE_WAY":return"ONEWAY";default:return null}if(this.components.get("ssciitinerary")){var e="ONEWAY",t=_.find(this.components.get("ssciitinerary").get("data").model.itinerary,function(e){return"INBOUND"===e.type});return t&&(e="RETURN"),e}return null},e.prototype.getFlightTripDates=function(){if(this.flightsDetails||this.cart){var e=(this.flightsDetails||this.cart).get("itineraryParts");if(e)return _.reduce(e,function(n,e){return(e.departureDate||e.departure)&&n.push(t.format(t.parse(e.departureDate||e.departure),{format:"%Y%m%d"})),n},[]).join(":")}return this.components.get("ssciitinerary")?_.reduce(this.components.get("ssciitinerary").get("data").model.itinerary,function(e,n){return _.forEach(n.segment,function(n){n.flightDetail&&n.flightDetail[0]&&n.flightDetail[0].departureTime&&e.push(t.format(new Date(n.flightDetail[0].departureTime),{format:"%Y%m%d"}))}),e},[]).join(":"):this.components.get("ssciboardingpass")?_.reduce(this.components.get("ssciboardingpass").get("data").model.flightsSelectedToCheckIn,function(e,n){if(n.departureTime){var r=new Date;r.setTime(n.departureTime),e.push(t.format(r,{format:"%Y%m%d"}))}return e},[]).join(":"):null},e.prototype.getFlightTripDuration=function(){var e,n;if(this.flightsDetails||this.cart){var r=(this.flightsDetails||this.cart).get("itineraryParts");return r?(e=_.min(_.reduce(r,function(e,n){return n.segments&&_.forEach(n.segments,function(n){(n.departure||n.departureDate)&&e.push(t.parse(n.departure||n.departureDate).getTime())}),e},[])),n=_.max(_.reduce(r,function(e,n){return n.segments&&_.forEach(n.segments,function(n){(n.arrival||n.arrivalDate)&&e.push(t.parse(n.arrival||n.arrivalDate).getTime())}),e},[])),_.isEmpty(n)||_.isEmpty(e)?1:Math.ceil((n-e)/864e5)):1}return this.components.get("ssciitinerary")?(e=_.min(_.reduce(this.components.get("ssciitinerary").get("data").model.itinerary,function(e,t){return _.forEach(t.segment,function(t){t.flightDetail&&t.flightDetail[0]&&t.flightDetail[0].departureTime&&e.push(t.flightDetail[0].departureTime)}),e},[])),n=_.max(_.reduce(this.components.get("ssciitinerary").get("data").model.itinerary,function(e,t){return _.forEach(t.segment,function(t){t.flightDetail&&t.flightDetail[0]&&t.flightDetail[0].arrivalTime&&e.push(t.flightDetail[0].arrivalTime)}),e},[])),_.isEmpty(n)||_.isEmpty(e)?1:Math.ceil((n-e)/864e5)):this.components.get("ssciboardingpass")?(e=_.min(_.reduce(this.components.get("ssciboardingpass").get("data").model.flightsSelectedToCheckIn,function(e,t){return e.push(t.departureTime),e},[])),n=_.max(_.reduce(this.components.get("ssciboardingpass").get("data").model.flightsSelectedToCheckIn,function(e,t){return e.push(t.arrivalTime),e},[])),_.isEmpty(n)||_.isEmpty(e)?1:Math.ceil((n-e)/864e5)):null},e.prototype.getFlightPace=function(){var e;if(this.flightsDetails||this.cart){var n=(this.flightsDetails||this.cart).get("itineraryParts");n&&(e=_.min(_.reduce(n,function(e,n){return n.segments&&_.forEach(n.segments,function(n){(n.departure||n.departureDate)&&e.push(t.parse(n.departure||n.departureDate).getTime())}),e},[])))}return this.components.get("ssciitinerary")&&(e=_.min(_.reduce(this.components.get("ssciitinerary").get("data").model.itinerary,function(e,t){return _.forEach(t.segment,function(t){t.flightDetail&&t.flightDetail[0]&&t.flightDetail[0].departureTime&&e.push(t.flightDetail[0].departureTime)}),e},[]))),this.components.get("ssciboardingpass")&&(e=_.min(_.reduce(this.components.get("ssciboardingpass").get("data").model.flightsSelectedToCheckIn,function(e,t){return e.push(t.departureTime),e},[]))),!_.isEmpty(e)&&_.isNumber(e)?parseInt(Math.ceil((e-(new Date).getTime())/864e5),10):null},e.prototype.getFlightPassengerCountByType=function(e){if(!this.config.sat.supportedPassengerTypes||!_.contains(this.config.sat.supportedPassengerTypes,e))return null;if(this.pageData["passengers["+e+"]"])return parseInt(this.pageData["passengers["+e+"]"],10);if(this.components.get("fsc"))return _.reduce(this.components.get("fsc").get("data").model.passengers,function(t,n,r){return r===e&&(t+=n),t},0);if(this.flightsDetails||this.cart){var r=this.flightsDetails?this.flightsDetails.get("passengers"):this.cart.get("passengersList");return r?_.reduce(r,function(n,t){return t.typeCode&&t.typeCode.toUpperCase()===e?n+=1:t.type&&t.type.code&&t.type.code.toUpperCase()===e&&(n+=1),n},0):0}if(this.components.get("sscidocs")){var t=this;return this.passengerTypes||(this.passengerTypes=_.reduce(this.config.sat.supportedPassengerTypes,function(e,t){return e[t]=[],e},{}),_.forEach(this.components.get("sscidocs").get("data").model.passengersDocumentData,function(e){e.passenger.child?t.passengerTypes.CHD.push(e.passenger):_.isObject(e.passenger.infant)?t.passengerTypes.INF.push(e.passenger):t.passengerTypes.ADT.push(e.passenger)})),t.passengerTypes[e].length||0}if(this.components.get("ssciitinerary")){var n=this.components.get("ssciitinerary").get("data").model;switch(e){case"ADT":return parseInt(n.adultPassengerCount,10);case"CHD":return parseInt(n.childPassengerCount,10);case"INF":return parseInt(n.infantPassengerCount,10)}}return null},e.prototype.getFlightADTPax=function(){return this.getFlightPassengerCountByType("ADT")},e.prototype.getFlightCHDPax=function(){return this.getFlightPassengerCountByType("CHD")},e.prototype.getFlightINFPax=function(){return this.getFlightPassengerCountByType("INF")},e.prototype.getFlightPaxTypes=function(){var e=[this.getFlightADTPax(),this.getFlightCHDPax(),this.getFlightINFPax()],t=_.every(e,function(e){return null===e});return t?null:e.join(":")},e.prototype.getFlightSegmentNumbers=function(){if(!this.hasFlightSegments())return null;var e=0;if(this.flightsDetails||this.cart){var t=(this.flightsDetails||this.cart).get("itineraryParts");t&&(e=_.reduce(t,function(e,t){return t.segments&&(e+=t.segments.length),e},0))}return this.components.get("ssciitinerary")&&(e=_.reduce(this.components.get("ssciitinerary").get("data").model.itinerary,function(e,t){return t.segment&&(e+=t.segment.length),e},0)),e>4&&(e=4),e},e.prototype.hasFlightSegments=function(){var e=!1;return(this.flightsDetails||this.cart)&&(e=_.find((this.flightsDetails||this.cart).get("itineraryParts"),function(e){return e.segments})),!e&&this.components.get("ssciitinerary")&&(e=_.find(this.components.get("ssciitinerary").get("data").model.itinerary,function(e){return e.segment})),!e&&this.components.get("ssciboardingpass")&&(e=_.find(this.components.get("ssciboardingpass").get("data").model.flightsSelectedToCheckIn,function(e){return e.segment})),e},e.prototype.getAllFlightSegments=function(){if(!this.hasFlightSegments())return null;if(this.flightsDetails||this.cart){var e=(this.flightsDetails||this.cart).get("itineraryParts");return e?_.reduce(e,function(e,t){return t.segments&&(e=e.concat(t.segments)),e},[]):[]}return this.components.get("ssciitinerary")?_.reduce(this.components.get("ssciitinerary").get("data").model.itinerary,function(e,t){return t.segment&&(e=e.concat(t.segment)),e},[]):this.components.get("ssciboardingpass")?_.reduce(this.components.get("ssciboardingpass").get("data").model.flightsSelectedToCheckIn,function(e,t){return t.segment&&e.push(t.segment),e},[]):null},e.prototype.getFlightSegment=function(e){if(!this.hasFlightSegments())return null;var t=this.getAllFlightSegments();return t[e]},e.prototype.getFlightSegmentOND=function(t){var e=this.getFlightSegment(t);if(e){if(e.flightDetail){if(_.isArray(e.flightDetail))return[e.flightDetail[0].departureAirport,e.flightDetail[0].arrivalAirport].join(":");if(_.isObject(e.flightDetail))return[e.flightDetail.departureAirport,e.flightDetail.arrivalAirport].join(":")}return[e.departureCode||e.origin.code,e.arrivalCode||e.destination.code].join(":")}return null},e.prototype.getFlightSegmentRBD=function(t){var e=this.getFlightSegment(t);return e&&e.fareBasis?e.fareBasis.substring(0,1):null},e.prototype.getFlightSegmentOperatingAirline=function(t){var e=this.getFlightSegment(t);if(e){if(e.operatingAirlineCode||e.operatingAirline)return e.operatingAirlineCode||e.operatingAirline;if(e.operatingCarrier&&e.operatingCarrier[0])return e.operatingCarrier[0];if(e.flightDetail){if(_.isArray(e.flightDetail)&&e.flightDetail[0].operatingAirline)return e.flightDetail[0].operatingAirline;if(_.isObject(e.flightDetail)&&e.flightDetail.operatingAirline)return e.flightDetail.operatingAirline}}return null},e.prototype.getFlightSegmentFlightNumber=function(t){var e=this.getFlightSegment(t);if(e){if(e.flightNumber)return _.isArray(e.flightNumber)?e.flightNumber[0]:e.flightNumber;if(e.flightDetail){if(_.isArray(e.flightDetail)&&e.flightDetail[0].flightNumber)return e.flightDetail[0].flightNumber;if(_.isObject(e.flightDetail)&&e.flightDetail.flightNumber)return e.flightDetail.flightNumber}}return null},e.prototype.getFlightSegmentDepartDateTime=function(a){var e=this.getFlightSegment(a),n="%Y%m%d%H%M%S";if(e){if(e.departure||e.departureDate)return t.format(t.parse(e.departure||e.departureDate),{format:n});if(e.flightDetail){if(_.isArray(e.flightDetail)&&e.flightDetail[0]&&e.flightDetail[0].departureTime)return t.format(new Date(e.flightDetail[0].departureTime),{format:n});if(_.isObject(e.flightDetail)&&e.flightDetail&&e.flightDetail.departureTime){var r=new Date;return r.setTime(e.flightDetail.departureTime),t.format(r,{format:n})}}}return null},e.prototype.getFlightSegmentArriveDateTime=function(a){var e=this.getFlightSegment(a),n="%Y%m%d%H%M%S";if(e){if(e.arrival||e.arrivalDate)return t.format(t.parse(e.arrival||e.arrivalDate),{format:n});if(e.flightDetail){if(_.isArray(e.flightDetail)&&e.flightDetail[0]&&e.flightDetail[0].arrivalTime)return t.format(new Date(e.flightDetail[0].arrivalTime),{format:n});if(_.isObject(e.flightDetail)&&e.flightDetail&&e.flightDetail.departureTime){var r=new Date;return r.setTime(e.flightDetail.departureTime),t.format(r,{format:n})}}}return null},e.prototype.getFlightSegment1RBD=function(){return this.getFlightSegmentRBD(0)},e.prototype.getFlightSegment1OND=function(){return this.getFlightSegmentOND(0)},e.prototype.getFlightSegment1OperatingAirline=function(){return this.getFlightSegmentOperatingAirline(0)},e.prototype.getFlightSegment1FlightNumber=function(){return this.getFlightSegmentFlightNumber(0)},e.prototype.getFlightSegment1DepartDateTime=function(){return this.getFlightSegmentDepartDateTime(0)},e.prototype.getFlightSegment1ArriveDateTime=function(){return this.getFlightSegmentArriveDateTime(0)},e.prototype.getFlightSegment2RBD=function(){return this.getFlightSegmentRBD(1)},e.prototype.getFlightSegment2OND=function(){return this.getFlightSegmentOND(1)},e.prototype.getFlightSegment2OperatingAirline=function(){return this.getFlightSegmentOperatingAirline(1)},e.prototype.getFlightSegment2FlightNumber=function(){return this.getFlightSegmentFlightNumber(1)},e.prototype.getFlightSegment2DepartDateTime=function(){return this.getFlightSegmentDepartDateTime(1)},e.prototype.getFlightSegment2ArriveDateTime=function(){return this.getFlightSegmentArriveDateTime(1)},e.prototype.getFlightSegment3RBD=function(){return this.getFlightSegmentRBD(2)},e.prototype.getFlightSegment3OND=function(){return this.getFlightSegmentOND(2)},e.prototype.getFlightSegment3OperatingAirline=function(){return this.getFlightSegmentOperatingAirline(2)},e.prototype.getFlightSegment3FlightNumber=function(){return this.getFlightSegmentFlightNumber(2)},e.prototype.getFlightSegment3DepartDateTime=function(){return this.getFlightSegmentDepartDateTime(2)},e.prototype.getFlightSegment3ArriveDateTime=function(){return this.getFlightSegmentArriveDateTime(2)},e.prototype.getFlightSegment4RBD=function(){return this.getFlightSegmentRBD(3)},e.prototype.getFlightSegment4OND=function(){return this.getFlightSegmentOND(3)},e.prototype.getFlightSegment4OperatingAirline=function(){return this.getFlightSegmentOperatingAirline(3)},e.prototype.getFlightSegment4FlightNumber=function(){return this.getFlightSegmentFlightNumber(3)},e.prototype.getFlightSegment4DepartDateTime=function(){return this.getFlightSegmentDepartDateTime(3)},e.prototype.getFlightSegment4ArriveDateTime=function(){return this.getFlightSegmentArriveDateTime(3)},e.prototype.getProductFlightSKU=function(){var e=this,n=[],r=0,a="";this.config.sat.supportedPassengerTypes&&this.config.sat.supportedPassengerTypes.length>0&&_.forEach(this.config.sat.supportedPassengerTypes,function(t){var a=e.getFlightPassengerCountByType(t)||0;n.push(a+t),r+=a}),r>0&&(a=n.join(":"));var i,s,o,t=this.getAllFlightSegments();t&&(i=t.map(function(n,t){return e.getFlightSegmentRBD(t)}).join("-"),s=t.map(function(n,t){return e.getFlightSegmentOperatingAirline(t)+" "+e.getFlightSegmentFlightNumber(t)}).join("-"),o=t.map(function(n,t){return e.getFlightSegmentDepartDateTime(t)+"-"+e.getFlightSegmentArriveDateTime(t)}).join("-"));var l=[a||"",i||"",s||"",o||""],u=_.every(l,function(e){return _.isEmpty(e)});return u?null:l.join("|").trim()},e.prototype.getProductFlightName=function(){var e=this.getFlightCabin(),t=this.getFlightOND();return e||t?[e||"",t||""].join(" ").trim():null},e.prototype.getProductFlightCategory=function(){return this.flightsDetails||this.cart?"Flight":null},e.prototype.getProductFlightAmount=function(){return this.paymentSummary?this.paymentSummary.getTotalPriceAmount()-this.paymentSummary.getAncillariesPriceAmount():this.cart?this.cart.getTotalAmount()-this.cart.getAncillariesAmount():null},e.prototype.hasBaggages=function(){return this.flightsDetails&&this.flightsDetails.get("hasBaggage")},e.prototype.getProductBaggageSKU=function(){return this.hasBaggages()?_.reduce(this.flightsDetails.get("ancillariesBreakdowns"),function(e,t){return _.forEach(t.ancillaries,function(t){/^BG/i.test(t.code)&&e.push(t.code)}),e},[]).join("|"):null},e.prototype.getProductBaggageName=function(){return this.hasBaggages()?"BAGGAGE":null},e.prototype.getProductBaggageCategory=function(){return this.hasBaggages()?"ANCILLARY":null},e.prototype.getProductBaggageAmount=function(){if(!this.hasBaggages())return null;var e=0,t=this.getCurrency();return _.forEach(this.flightsDetails.get("ancillariesBreakdowns"),function(n){n.ancillaries&&_.forEach(n.ancillaries,function(n){"BG"===n.code.toUpperCase()&&n.prices&&(e+=i.findAmount(n.prices,t)||0)})}),e},e.prototype.hasSeats=function(){var e=!1;return this.flightsDetails&&(e=_.find(this.flightsDetails.get("passengers"),function(t){t.sectorSeats&&(e=_.find(t.sectorSeats,function(e){return e.seatCode}))})),!e&&this.cart?!_.isEmpty(this.cart.get("selectedSeats")):(!e&&this.components.get("ssciitinerary")&&(e=_.find(this.components.get("ssciitinerary").get("data").model.passengers,function(e){return!_.isEmpty(e.seatForSegmentId)})),e)},e.prototype.getProductSeatSKU=function(){if(this.hasSeats()){var e=[];if(this.flightsDetails){var t=this.flightsDetails.get("passengers");_.forEach(t,function(t){t.sectorSeats&&_.forEach(t.sectorSeats,function(t){t.seatCode&&e.push(t.seatCode)})})}else this.cart?_.forEach(this.cart.get("selectedSeats"),function(t){t[0]&&e.push(t[0])}):this.components.get("ssciitinerary")&&_.forEach(this.components.get("ssciitinerary").get("data").model.passengers,function(t){_.forEach(t.seatForSegmentId,function(t){e.push(t.value)})});return e.join("|")}return null},e.prototype.getProductSeatName=function(){return this.hasSeats()?"SEAT":null},e.prototype.getProductSeatCategory=function(){return this.hasSeats()?"ANCILLARY":null},e.prototype.getProductSeatAmount=function(){return this.hasSeats()?this.paymentSummary.getTotalSeatsAmount():null},e.prototype.hasCarbonOffset=function(){return this.flightsDetails?_.find(this.flightsDetails.get("ancillariesBreakdowns"),function(e){return _.find(e.ancillaries,function(e){return/^0LT/i.test(e.code)})}):!1},e.prototype.getProductCarbonOffsetSKU=function(){return this.hasCarbonOffset()?_.reduce(this.flightsDetails.get("ancillariesBreakdowns"),function(e,t){return _.forEach(t.ancillaries,function(t){/^0LT/i.test(t.code)&&e.push(t.code)}),e},[]).join("|"):null},e.prototype.getProductCarbonOffsetName=function(){return this.hasCarbonOffset()?"CARBON OFFSET":null},e.prototype.getProductCarbonOffsetCategory=function(){return this.hasCarbonOffset()?"ANCILLARY":null},e.prototype.getProductCarbonOffsetAmount=function(){return this.hasCarbonOffset()?this.paymentSummary.getTotalCarbonOffsetAmount():null},e.prototype.isTransactionalDataRequired=function(){var e=["CONFIRMATION_PAGE","EXCHANGE_CONFIRMATION_PAGE","UPGRADE_CONFIRMATION_PAGE","ANCILLARIES_MTO_CONFIRMATION_PAGE"];return _.contains(e,this.pageCode.toUpperCase())},e.prototype.getTransactionId=function(){return this.isTransactionalDataRequired()?"PNR":null},e.prototype.getTransactionDate=function(){return this.isTransactionalDataRequired()?this.getDateUTC():null},e.prototype.getTransactionAffiliation=function(){return this.isTransactionalDataRequired()?this.getStorefront():null},e.prototype.getTransactionTotal=function(){return this.isTransactionalDataRequired()?this.getTotalAmountInPayment():null},e.prototype.getTotalAmountInPayment=function(){return this.isTransactionalDataRequired()?this.paymentSummary.getTotalPriceAmount():null},e.prototype.getTotalTaxAmountInPayment=function(){return this.isTransactionalDataRequired()?this.paymentSummary.getTotalTaxAmount():null},e.prototype.getTransactionTax=function(){return this.isTransactionalDataRequired()?this.getTotalTaxAmountInPayment():null},e.prototype.getTransactionPaymentType=function(){return this.isTransactionalDataRequired()?(this.paymentSummary.get("payments")||{}).paymentType||"":null},e.prototype.getTransactionCurrency=function(){return this.isTransactionalDataRequired()?this.getCurrency():null},e.prototype.getTransactionPromoCode=function(){return this.isTransactionalDataRequired()?this.getPromoCode():null},e.prototype.getTransactionProducts=function(){return this.isTransactionalDataRequired()?[{sku:this.getProductFlightSKU(),name:this.getProductFlightName(),category:this.getProductFlightCategory(),price:this.getProductFlightAmount(),quantity:1},{sku:this.getProductBaggageSKU(),name:this.getProductFlightName(),category:this.getProductFlightCategory(),price:this.getProductFlightAmount(),quantity:1},{sku:this.getProductSeatSKU(),name:this.getProductSeatName(),category:this.getProductSeatCategory(),price:this.getProductSeatAmount(),quantity:1},{sku:this.getProductCarbonOffsetSKU(),name:this.getProductCarbonOffsetName(),category:this.getProductCarbonOffsetCategory(),price:this.getProductCarbonOffsetAmount(),quantity:1}]:null},e}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("text!components/APPLICATION/tpl/gtm.tpl",[],function(){return"<!-- Google Tag Manager -->\n<noscript><iframe src=\"//www.googletagmanager.com/ns.html?id=<%=containerId%>\"\n                  height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n        j=d.createElement(s),dl=l!='<%=dataLayerName%>'?'&l='+l:'';j.async=true;j.src=\n        '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','<%=dataLayerName%>','<%=containerId%>');</script>\n<!-- End Google Tag Manager -->\n"}),define("components/APPLICATION/gtm",["require","backbone","models/EventBus","models/Analytic","text!./tpl/gtm.tpl"],function(t){var a=t("backbone"),n=a.View,i=t("models/EventBus"),r=t("models/Analytic"),s=t("text!./tpl/gtm.tpl"),e=n.extend({el:"body"});return e.prototype.initialize=function(e){var t=this;if(n.prototype.initialize.call(this,e),this.options=e||{},this.router=e.router,this.config=e.config,this.eventBus=e.eventBus||Sabre.eventBus,this.pagesToTrack=e.pagesToTrack||[],this.components=e.components,this.dataLayerName=e.parameters.dataLayerName,this.containerId=e.parameters.id,!this.components)throw new Error("components is required!");e.enabled&&(this.listener=this.listenTo(this.eventBus,i.PAGE_CLOSED,t.pageClosedHandler.bind(this)))},e.prototype.render=function(){var e=this;e.options.enabled&&(void 0===window[this.dataLayerName]&&(window[this.dataLayerName]=[]),e.$el.append(_.template(s,{dataLayerName:this.dataLayerName,containerId:this.containerId})))},e.prototype.isTrackingRequired=function(t){var e=this;return e.options.enabled?_.isEmpty(e.options.pagesToTrack)?!0:_.contains(this.pagesToTrack,t):!1},e.prototype.pageClosedHandler=function(t){var n=this,a=this.isTrackingRequired(t.pageCode);if(a){var e=_.result(this.router.page,"analyticData");if(!e)try{e=this.router.page.$el.toJSON()}catch(o){}var i={components:this.components.clone(),pageCode:t.pageCode,flowType:r.FlowTypes.singlePages,config:n.config,pageData:e},s=new r(i);_.defer(function(){n.push(s.collect())})}},e.prototype.push=function(e){var t={event:"collect",params:e},n=window[this.dataLayerName].push(t);return delete this.cache,n},e}),define("tpl!components/APPLICATION/tpl/_language.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<p data-translate="label.lang.languageHeader"></p><ul id="languages">    '),_.each(languages,function(e){__p.push('        <li data-translate="',e,'" data-language="',e,'"'),Sabre._config.global.language===e&&__p.push(' class="selected"'),__p.push("></li>    ")}),__p.push("</ul>");return __p.join("")}}),define("components/APPLICATION/main",["jquery","backbone","components/APPLICATION/modal","components/APPLICATION/ga","dateFormat","components/APPLICATION/storage","components/APPLICATION/gtm","models/Component","models/EventBus","tpl!./tpl/_language.tpl"],function(e,a,o,l,t,i,s,f,n,u){var c=e("body"),r=e("#loading"),d=e("#overlay"),p=["ar_AE"];return a.View.extend({events:{"click #overlay":"closeModal","click .tab-title":"toggleTab","click .plus-minus-list > li a:first-of-type":"togglePlusMinusList","click .goBack":"goBack","click #language":"selectLanguage","click #app-container":"bodyClick",'change input[type="date"]':"dateChange",'change input[type="hidden"].date-input':"updateDateInput"},initialize:function(e){a.View.prototype.initialize.call(this,e),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&this.$el.addClass("ios"),this.eventBus=e.eventBus,this.modal=new o,this.eventBus.on(n.PAGE_LOADED,this.onPageLoaded.bind(this))},onPageLoaded:function(){this.storage().set(Sabre.router.flow+"|"+Sabre.router.currentPage,Sabre.router.executionKey)},render:function(){this.$el.attr("data-lang",Sabre._config.global.language),this.loadLanguageCss(Sabre._config.global.language),this.setAnalytics(),this.initGTM()},goBack:function(e){e&&e.preventDefault(),this.clearLocalData(),window.history.back()},clearLocalData:function(){Sabre.getComponent("flomes").model&&Sabre.getComponent("flomes").model.messages&&(Sabre.getComponent("flomes").model.messages=[])},setAnalytics:function(){this.googleanalytics=new l({el:"body > #ga"})},initGTM:function(){var e=_.find(Sabre._config.sat.analyticsIntegrators_list,function(e){return"Google Tag Manager"===e.name});e&&e.enabled&&(Sabre.gtm=this.gtm=new s(_.extend(e,{config:Sabre._config,router:Sabre.router,eventBus:Sabre.eventBus,components:Sabre.router.ComponentsCollection})),this.gtm.render())},selectLanguage:function(t){t.preventDefault(),Sabre.app.modal.show(u({languages:Sabre._config.sat.translationsConfiguration.availableLanguages}),{title:"label.lang.language",buttons:[{name:"label.fsc.overlay.cancel","class":"btn-primary",handler:function(){Sabre.app.modal.close(),e("#overlay").removeClass("language-overlay")}}],"class":"languages"}),e("#overlay").addClass("language-overlay"),Sabre.app.modal.$el.find("#languages").on("click","> li",function(t){Sabre.app.changeLanguage(e(t.currentTarget).data("language")),Sabre.app.modal.close(),e("#overlay").removeClass("language-overlay"),e("#btn-settings").trigger("click")})},showOverlay:function(t,e){e=e||!1,e&&this.modal&&this.modal.$el.toggleClass("loading",t),e&&this.modal&&this.modal.$el.is(":visible")&&!t||d.toggleClass("hidden",!t)},loading:function(e,t){"object"==typeof t?e?t.append('<i class="fa fa-spinner fa-spin"></i>').addClass("busy"):t.removeClass("busy").find(".fa-spin").remove():(r.toggleClass("hidden",!e),this.showOverlay(e,!0)),c.toggleClass("no-scroll",!r.hasClass("hidden"))},closeModal:function(){r.hasClass("hidden")&&(Sabre.app.modal.close(),e("#overlay").removeClass("language-overlay"))},bodyClick:function(e){window.Sabre.views[Sabre.router.currentPage]&&_.isFunction(window.Sabre.views[Sabre.router.currentPage].bodyClick)&&window.Sabre.views[Sabre.router.currentPage].bodyClick(e),Sabre.eventBus.trigger(n.BODY_CLICKED,e)},dateChange:function(l){var a=e(l.currentTarget),i=a.next(".year"),s=i.next(".month"),o=s.next(".day"),n=a.val(),r=new Date(+n||n);r=new Date(r.valueOf()+6e4*r.getTimezoneOffset()),n=t.format(r,{format:"%Y-%m-%d"}),"string"==typeof n?(n=n.split("-"),i.val(n[0]),s.val(n[1]),o.val(n[2]),a.hasClass("error")||o.change()):(i.val(""),s.val(""),o.val(""))},updateDateInput:function(l){var i,n,r,o,a,s=e(l.currentTarget).parent();i=s.find('input[type="hidden"].year'),n=s.find('input[type="hidden"].month'),r=s.find('input[type="hidden"].day'),o=s.find('input[type="date"]'),i.length&&i.val()&&n.length&&n.val()&&r.length&&r.val()&&o.length&&(r=1===r.val().length?"0"+r.val():r.val(),n=1===n.val().length?"0"+n.val():n.val(),a=new Date(i.val()+"-"+n+"-"+r),a.setTime(a.getTime()+6e4*a.getTimezoneOffset()),o.val(t.format(a)))},toggleTab:function(t){t.preventDefault(),e(t.currentTarget).parent().toggleClass("active").find(".tab-content").first().stop().slideToggle(500,"easeInQuad")},togglePlusMinusList:function(r){r.preventDefault();var t=e(r.currentTarget),n=t.parents("li");1===t.parents(".plus-minus-list").data("hide-other")?(n.siblings().removeClass("active"),this.scrollTo(t.offset().top)):n=t.closest("li"),n.toggleClass("active")},scrollTo:function(t){e("body,html").animate({scrollTop:t},"800","swing")},changeLanguage:function(e){if(e!==Sabre._config.global.language){Sabre.app.storage().set("language",e),Sabre.app.loading(!0),Sabre._config.global.language=e;var t=this;Sabre.router.loadLanguage(function(){Sabre.app.$el.translate(),t.$el.attr("data-lang",e),t.loadLanguageCss(e),Sabre.eventBus.trigger(n.LANGUAGE_CHANGED),Sabre.app.loading(!1)})}},loadLanguageCss:function(n){if(-1!==e.inArray(n,p)){var t=document.createElement("link");t.className="lang",t.rel="stylesheet",t.href=Sabre.getPath()+"css/languages/"+n+".css",e("head")[0].appendChild(t)}else e("head .lang").remove()},getLowestPrice:function(n){var t=[];return e.each(n,function(n,e){void 0!==e.prices.priceAlternatives[0]&&t.push(e.prices.priceAlternatives)}),t.sort(function(n,r){var e,t;if(n.length>1&&r.length>1){e=n[1].pricesPerCurrency,t=r[1].pricesPerCurrency;var a=_.keys(e),i=_.keys(t),s=0,o=0;if(a.length>1&&i.length>1){var l=1e6;s=e[a[0]].amount*l,s+=e[a[1]].amount,o=t[i[0]].amount*l,o+=t[i[1]].amount}return s-o}return e=n[0].pricesPerCurrency,t=r[0].pricesPerCurrency,e[_.keys(e)[0]].amount-t[_.keys(t)[0]].amount}),0!==t.length?t[0]:""},getTotalPrice:function(t,s){if(e.isArray(t)){if(0===t.length)return null}else{var a=[];e.each(t,function(t,e){a.push(e)}),t=a}var n,i,r=void 0!==t[0].total?t[0].total.priceAlternatives.slice():t[0].prices.priceAlternatives.slice();r[0]=e.extend(!0,{},r[0]);var o=function(e,a){void 0!==t[n].total&&void 0===t[n].total.priceAlternatives[0].pricesPerCurrency[e]||void 0!==t[n].prices&&void 0===t[n].prices.priceAlternatives[0].pricesPerCurrency[e]?r[0].pricesPerCurrency[e]=parseFloat(a):r[0].pricesPerCurrency[e].amount=parseFloat(a.amount)+parseFloat(r[0].pricesPerCurrency[e].amount)};for(n=1;n<t.length;n++)i=void 0!==t[n].total?t[n].total.priceAlternatives[0].pricesPerCurrency:t[n].prices.priceAlternatives[0].pricesPerCurrency,e.each(i,o);return this.getPrice(r,s)},getPrice:function(r,e,a){if(0===r.length)return null;e=e||Sabre._config.sat.globalCurrencyConfiguration;var t=r[0].pricesPerCurrency,n=""!==e.defaultCurrency&&void 0!==t[e.defaultCurrency]?t[e.defaultCurrency]:t[_.keys(t)[0]];return this.getFormattedPrice(n.amount,n.currencyCode||n.currency.code,e,a)},getEmptyPrice:function(){var e=Sabre._config.sat.globalCurrencyConfiguration;return this.getFormattedPrice(0,e.defaultCurrency,e)},getSimplePrice:function(e,t){return this.getFormattedPrice(e.amount,e.currency.code,t)},getFormattedPrice:function(i,n,e,s){if(s===!0)return i;if("withCurrency"===s)return'<span class="amount">'+i+'</span><span class="sp"></span> <span class="currency">'+n+"</span>";e=e||Sabre._config.sat.globalCurrencyConfiguration,e.currencySeparator=_.unescape(""===e.currencySeparator?Sabre._config.sat.globalCurrencyConfiguration.currencySeparator:e.currencySeparator);var r=Sabre._config.sat.globalCurrencyConfiguration,a="",t=e.currencySeparator,o="",l="";return t&&(t="&nbsp;"===t?" ":t,t='<span class="sp">'+t.trim()+"</span>"),"SYMBOL"===e.currencySymbolFormat&&void 0!==r.currencySymbols[n]?a='<span class="code">'+r.currencySymbols[n]+"</span>":"NONE"!==e.currencySymbolFormat&&(a='<span class="code" data-translate="'+n+'"></span>'),"BEFORE"===e.currencyOrderFormat?o=a+t:"AFTER"===e.currencyOrderFormat&&(l=t+a),o+'<span class="amount">'+this.formatPrice(i,void 0===r.currencyScales[n]?r.priceDecimalDigits:r.currencyScales[n])+"</span>"+l},getPax:function(e,t,n){var r={counter:t+1,prefix:'<span data-translate="Prefix.'+(e.prefix||"")+'"></span>',firstName:(e.firstName||"").toLowerCase(),middleName:(e.middleName||"").toLowerCase(),maidenName:(e.maidenName||"").toLowerCase(),lastName:(e.lastName||"").toLowerCase(),suffix:e.suffix||"",type:'<span data-translate="label.cart.passengerType.'+e.typeCode+'.singular"></span>'};return n.replace(/%([a-z0-9]+)/gi,function(t,e){return r[e]||""})},br2nl:function(e){return e.replace(/<br\s*\/?>/gm,"\n")},formatPrice:function(n,e,r,i){e=isNaN(e)?2:e,i=i||".",r=r||",",n=Math.abs(+n||0).toFixed(e);var s=0>n?"-":"",a=String(parseInt(n,10)),t=a.length;return t=t>3?t%3:0,s+(t?a.substr(0,t)+r:"")+a.substr(t).replace(/(\d{3})(?=\d)/g,"$1"+r)+(e?i+Math.abs(n-a).toFixed(e).slice(2):"")},formatDate:function(e,n,r){return t.format(this.parseDate(e,r),{format:n})},parseDate:function(e,n){return t.parse(e,n)},formatAirport:function(t,n){n=n||"%code";var e=Sabre._config.airports[t],r=e?e.city||e.code||"":"",a={code:t,airport:this.translate("Airport."+t),airportShort:this.translate("AirportShort."+t),cityCode:r,city:this.translate("City."+t),stateProvince:e&&e.stateProvince?this.translate("StateProvince."+e.stateProvince):"",country:e&&e.country?this.translate("Country."+e.country):""};return n.replace(/%([a-z0-9]+)/gi,function(t,e){return a[e]||""})},translate:function(e){var t,n=e.split("|");e=n.shift();var r=Sabre.translations[Sabre._config.global.language]||Sabre.translations[Sabre._config.sat.translationsConfiguration.defaultLanguage];for(t=r?r[e]||e:e;n.length;)t=t.replace("{}",this.translate(n.shift()));return t},resetErrors:function(n,r){var t=e(void 0!==n?n:"#component-"+Sabre.router.currentPage);void 0!==r&&(t=t.find(r)),0===t.length&&Sabre.router.page&&Sabre.router.app&&(t=Sabre.router.app.find(".page")),t.find(".validation-error").remove(),t.find(".error").removeClass("error")},displayErrors:function(a,o,p){var n,l,t,s,c,u,i,r=e(void 0!==p?p:"#component-"+Sabre.router.currentPage);void 0!==o&&(r=r.find(o),0===r.size()&&(r=e(o))),0===r.length&&Sabre.router.page&&Sabre.router.app&&(r=Sabre.router.app.find(".page")),this.resetErrors(p,o);var d=function(n,r){var t=e('<div class="validation-error" data-translate="'+r+'"></div>');t.translate(),n.addClass("error").after(t)};for(n in a)if(a.hasOwnProperty(n))for(l=r.find("input[name='"+n+"'], select[name='"+n+"'], input[data-validation='"+n+"'], select[data-validation='"+n+"']"),s=0;s<l.length;s++)t=e(l[s]),i=void 0,t.attr("data-group-validation")?(l.addClass("error"),c=r.find('.group-validation[data-group-validation="'+t.attr("data-group-validation")+'"]'),c.find('[data-translate="'+a[n]+'"]').length||c.append('<div class="validation-error" data-translate="'+a[n]+'"></div>').translate(),u=r.find('input[data-group-validation="'+t.attr("data-group-validation")+'"][type=date]'),u&&(i=t.parent(),i.hasClass("date-input-container")?i.addClass("error"):u.addClass("error"))):t.is("select")?(i=t.parent(),i.hasClass("select-wrapper")?(t.addClass("error"),d(i,a[n])):d(t,a[n])):d(t,a[n]),"hidden"===t.attr("type")&&t.prev().find("input, select").addClass("error")
},loadLocationImage:function(t,n){var e=new Image;e.onload=function(){n.attr("src",this.src)},e.src=Sabre.getPath()+"images/routes/"+t+".jpg"},portFlightsdetailsToCart:function(){var t=Sabre.getComponent("cart").model,n=Sabre.getComponent("flightsdetails").model;e.each(n.itineraryParts,function(n,r){t.itineraryParts[n].arrivalCode=r.destinationCode,t.itineraryParts[n].departureCode=r.originCode,t.itineraryParts[n].segments=r.segments,e.each(r.segments,function(e,r){t.itineraryParts[n].segments[e].arrivalDate=r.arrival,t.itineraryParts[n].segments[e].departureDate=r.departure,t.itineraryParts[n].segments[e].arrivalCode=r.destination.code,t.itineraryParts[n].segments[e].departureCode=r.origin.code,t.itineraryParts[n].segments[e].flightDuration=r.duration,t.itineraryParts[n].segments[e].operatingCarrier=[r.operatingAirlineCode],t.itineraryParts[n].segments[e].airlineCodes=[r.operatingAirlineCode],t.itineraryParts[n].segments[e].flightNumber=[r.flightNumber],t.itineraryParts[n].segments[e].stops=r.stopAirports,t.itineraryParts[n].segments[e].classOfService=[r.cabinClass]})})},storage:function(e){return e=e||"session",this.storages||(this.storages={}),this.storages[e]||(this.storages[e]=_.clone(i),this.storages[e].type=e),this.storages[e]}})}),define("models/Translator",["require","./Model"],function(t){var n=t("./Model"),e=n.extend();return e.prototype.substitute=function(e,t){var n=this.translate(e);return n.replace(/\{\{([a-z0-9]+)\}\}/gi,function(n,e){return t[e]||""})},e.prototype.translate=function(e){return Sabre.app.translate(e)},e}),define("components/APPLICATION/socket",["require","models/Model","backbone","dateFormat","rsvp"],function(t){var n=t("models/Model"),r=t("backbone"),a=t("dateFormat"),i=t("rsvp"),e=n.extend({});return e.prototype.initialize=function(e){n.prototype.initialize.call(this,e),this.Sabre=e.Sabre,this.router=e.router},e.prototype.send=function(e,t){var n=this;return new i.Promise(function(i,s){return e=_.extend(e,{success:i,error:s}),r.$.ajax.call(t||n,e).done(function(t,n,e){try{Sabre._config.global.currentTimeInMillis=a.parse(e.getResponseHeader("date")).getTime()}catch(r){}})})},e.prototype.request=function(e,t){return e.url||(e.url=this.router.baseUrl+(e.flow||this.router.flow)+".html"),e.type||(e.type="POST"),e.headers||(e.headers={JsonResponse:"JsonResponse"}),e.data=_.extend({_eventId_ajax:"",execution:this.router.executionKey,ajaxSource:!0},e.data),this.send(e,t)},e.prototype.transfer=function(e,t){return e=e||{},e.data=e.data||{},e.data.contextObject=JSON.stringify(t),this.request(e)},e}),define("models/Settings",["require","models/Model"],function(n){var t=n("models/Model"),e=t.extend();return e.prototype.initialize=function(e){t.prototype.initialize.apply(this,arguments),this.components=e.components,this.Sabre=e.Sabre},e.prototype.isCurrencyEnabled=function(){return this.Sabre._config.sat.globalCurrencyConfiguration.currencySelectionEnabled&&this.Sabre._config.sat.globalCurrencyConfiguration.currencies.length>1},e.prototype.getCurrencies=function(){return this.Sabre._config.sat.globalCurrencyConfiguration.currencies},e.prototype.getFrequentFlyerCurrency=function(){return this.getDeepProperty("Sabre._config.sat.frequentFlyer.denomination")},e}),define("tpl!components/APPLICATION/tpl/_session_timeout.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<p data-translate="label.popup.sessionTimeout.msg1"></p><p data-translate="label.popup.sessionTimeout.msg2"></p>');return __p.join("")}}),define("tpl!components/APPLICATION/tpl/_timeout_warning.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<p data-translate="label.popup.sessionTimeoutWarning.msg1|',timeLeftInMinutes,'"></p><p data-translate="label.popup.sessionTimeoutWarning.msg2"></p>');return __p.join("")}}),define("routers/AppRouter",["jquery","backbone","rsvp","logger","collections/Components","components/APPLICATION/main","models/EventBus","models/Translator","dateFormat","components/APPLICATION/socket","models/Settings","tpl!../components/APPLICATION/tpl/_session_timeout.tpl","tpl!../components/APPLICATION/tpl/_timeout_warning.tpl"],function(e,r,C,t,b,y,n,v,a,m,g,w,h){var f,d,i=function(t){var n={};if(t&&""!==t){var r=t.split("&");e.each(r,function(r,t){var e=t.split("=");n[e[0]]=e[1]})}return n},u=function(n){var t="";return e.each(n,function(e,n){t+=e+"="+n+"&"}),""===t?"":"?"+t.slice(0,-1)},o=!1,p=!1,c=e("body"),s={myb:"myb",ancillaries:"myb",cancelAndRefund:"myb",flightExchange:"myb",flightExchangeSearch:"myb"},l=["CHECK_IN_CONFIRMATION_PAGE","CONFIRMATION_PAGE"];return r.Router.extend({routes:{"(/)":"landing",":flow(/)(?:data)":"getSinglePage",":flow/:key(/)(?:data)":"getPage"},landing:function(){r.history.navigate("landing",{replace:!0,trigger:!0})},getSinglePage:function(e,t){return"landing"===e&&Sabre._config&&""!==Sabre._config.sat.airlineLandingPageUrl?window.location.replace(Sabre._config.sat.airlineLandingPageUrl):"landing"===e&&Sabre.isTablet()&&(e=mobileMainPage),"remotePaymentReturn"===e&&(e=this.getRedirectFlow(t)),this.getPage(e,null,t)},loadingStateAfterCallback:!1,getPage:function(t,n,e){return this.ipcc=ipcc,this.flow=t,this.executionKey=n,this.initialData=i(e),this.baseUrl="/SSW2010/"+this.ipcc+"/",p?this.loadPage(i(e)):this.initializeApp(e)},initializeApp:function(s){t.time("AppRouter::initializeApp()");var r=this,u=r.initialData.lang,o=this.baseUrl+"jsonMobile/configuration.html";return s&&(o+="?"+s),e.ajax({url:o,type:"POST",headers:{JsonResponse:"JsonResponse"}}).success(function(a){var o,c,d={};for(o=0,c=a.airports.length;c>o;o++)d[a.airports[o].code]=a.airports[o];Sabre.eventBus=new n,Sabre.translator=new v,Sabre.app=new y({el:"body",eventBus:Sabre.eventBus}),Sabre._config={sat:a.satConfiguration,global:{language:Sabre.app.storage().get("language",u||a.satConfiguration.translationsConfiguration.defaultLanguage)},airports:d},r.ComponentsCollection=new b,Sabre.settings=new g({Sabre:Sabre,components:r.ComponentsCollection}),a.satConfiguration.translationsConfiguration.availableLanguages.length<2&&e("body").addClass("one-lang"),r.checkForHideParameters(r.initialData),p=!0,"function"==typeof history.pushState&&(window.onpopstate=function(){-1!==e.inArray(Sabre.router.currentPage,l)&&history.pushState("blocked",null,null)}),r.loadLanguage(function(){t.timeEnd("AppRouter::initializeApp()"),r.loadPage(i(s))},s)}).done(function(t,n,e){try{Sabre._config.global.currentTimeInMillis=a.parse(e.getResponseHeader("date")).getTime()}catch(r){}})},loadErrorPage:function(){this.page&&this.page.remove(),this.structure={elementId:"cnt_1",children:[{elementId:"scc_header",componentCode:"scc",state:"header",custom:!1},{elementId:"flomes_1",componentCode:"flomes",state:"error",custom:!1},{elementId:"scc_footer",componentCode:"scc",state:"footer",custom:!1}]},this.renderPage("ERROR_PAGE")},loadPage:function(s,d,l){t.time("AppRouter::loadPage()"),this.page&&Sabre.eventBus&&Sabre.eventBus.trigger(n.PAGE_CLOSED,{page:this.page,pageCode:this.page.pageCode}),s=s||_.extend({},this.initialData),l=l||!1,l&&(this.initialData=s);var i=this;_.isObject(Sabre.app)&&(_.isObject(Sabre.app.modal)&&Sabre.app.modal.close(),Sabre.app.loading(!0)),i.executionKey&&(s.execution=i.executionKey);var o,c,h,g=this.baseUrl+this.flow+".html",p=i.executionKey,f="";for(o in s)if(s.hasOwnProperty(o)&&_.isArray(s[o])){for(c=0,h=s[o].length;h>c;c++)f+=o+"="+s[o][c]+"&";delete s[o]}return""!==f&&(g+="?"+f.slice(0,-1)),e.ajax({url:g,type:"POST",headers:{JsonResponse:"JsonResponse"},data:s}).success(function(e,c,t){if(e&&e.header&&"ERROR_PAGE"===e.header.pageCode)return i.loadErrorPage(),C.resolve();var o=t.getResponseHeader("content-type")||"";if(o.indexOf("html")>-1){if(!t.responseText)return void i.loadErrorPage();var s=document.open("text/html","replace");return s.write(t.responseText),void s.close()}if(null!==e.header.redirectURL)return void(window.location=Sabre.decodeURL(e.header.redirectURL));if(e.header.executionKey!==p&&Sabre.eventBus.trigger(n.EXECUTION_KEY_CHANGED,{from:p,to:e.header.executionKey}),i.executionKey=e.header.executionKey,i.structure=e.structure||{children:[]},i.validationMessages=e.validationMessages||[],i.ComponentsCollection.reset(),i.ComponentsCollection.reset(_.map(e.components,function(e,t){return{id:t,data:e}})),void 0===d||void 0!==d&&d(p,e)){i.page&&i.page.remove();var a=null===p||Sabre.router.currentPage===e.header.pageCode;l&&(a=!1),i.executionKey?r.history.navigate(i.flow+"/"+i.executionKey+u(i.initialData),{replace:a}):r.history.navigate(i.flow+u(i.initialData),{replace:a}),i.renderPage(e.header.pageCode)}else Sabre.app.loading(i.loadingStateAfterCallback),i.loadingStateAfterCallback=!1;Sabre.app.setAnalytics(),i.checkLoginStatus(),i.timeout()}).error(function(e){t.error(e.message,e.stack),i.loadErrorPage()}).done(function(n,r,e){try{Sabre._config.global.currentTimeInMillis=a.parse(e.getResponseHeader("date")).getTime()}catch(i){}t.timeEnd("AppRouter::loadPage()")})},checkLoginStatus:function(){var n=void 0!==Sabre.getComponent("login")?Sabre.getComponent("login").model:null,r=null!==n?n.loggedIn:!1,t=e("#sign-in");t.toggleClass("logged",r),r?(t.find(".l2").html(n.user.firstName).removeClass("hidden"),t.find(".l3").addClass("hidden")):(t.find(".l2").addClass("hidden"),t.find(".l3").translate().removeClass("hidden"))},getTemplate:function(n,r,t,a){if(a=a||!1,t=t||this.currentPage,void 0===Sabre.templates[t]&&(window.Sabre.templates[t]={}),void 0===Sabre.templates[t][n]&&(Sabre.templates[t][n]={loading:!1,callbacks:[]}),Sabre.templates[t][n].loading)return void Sabre.templates[t][n].callbacks.push(r);if(void 0===Sabre.templates[t][n].template)Sabre.templates[t][n].loading=!0,e.get(Sabre.getPath()+"javascripts/components/"+t+"/tpl/"+n+".tpl",function(a){Sabre.templates[t][n].template=a,Sabre.templates[t][n].loading=!1,r(a,n);var e,i;for(e=0,i=Sabre.templates[t][n].callbacks.length;i>e;e++)Sabre.templates[t][n].callbacks[e](a,n);Sabre.templates[t].callbacks=[]},"html");else{if(a)return Sabre.templates[t][n].template;r(Sabre.templates[t][n].template,n)}},renderPage:function(n){t.time("AppRouter::renderPage("+n+")");var e=this;require(["./pages/"+n.toLowerCase()],function(r){e.renderComponents(),e.page=new r({params:e.initialData,pageCode:n,components:e.allComponents,customComponents:e.customComponents,executionKey:e.executionKey,router:e,app:Sabre.app,socket:Sabre.socket}),e.page.render().then(function(){e.finishRendering(n)}).catch(function(n){t.error(n.message,n.stack),e.loadErrorPage()}).finally(function(){t.timeEnd("AppRouter::renderPage("+n+")")})})},renderComponents:function(){this.allComponents=[],this.customComponents=[],this.app.html('<div class="page">'+this.buildStructure(this.structure.children)+"</div>")},finishRendering:function(r){o?c.removeClass(this.currentPage):(Sabre.app.render(),o=!0),this.currentPage=r,this.handleFlowMessages(r),c.addClass(this.currentPage),document.title=Sabre.app.translate("pageTitle."+this.currentPage),-1!==e.inArray(Sabre.router.currentPage,l)&&"function"==typeof history.pushState&&history.pushState("blockingBackButton",null,null),Sabre.app.$el.translate(),Sabre.eventBus.trigger(n.PAGE_LOADED,{pageCode:r}),Sabre.app.loading(!1),this.page.renderCustomComponents().then(function(){t.info("Custom components rendered")}).catch(function(e){t.error(e.message,e.stack)})},buildStructure:function(t){var e,n="",r=t.length;for(e=0;r>e;e++)(t[e].state&&"hidden"!==t[e].state||!t[e].state)&&(n+='<section id="'+t[e].elementId+'" class="'+(t[e].children?"container":"component "+t[e].componentCode+" "+t[e].state)+'">',t[e].children?n+=this.buildStructure(t[e].children):t[e].custom?this.customComponents.push(t[e]):this.allComponents.push(t[e]),n+="</section>");return n},ajax:function(n,r,t){var i=this;return t=t||this.flow,e.ajax({url:this.baseUrl+t+".html",type:"POST",headers:{JsonResponse:"JsonResponse"},data:{_eventId_ajax:"",execution:i.executionKey,ajaxSource:!0,contextObject:JSON.stringify(n)}}).success(r).done(function(t,n,e){try{Sabre._config.global.currentTimeInMillis=a.parse(e.getResponseHeader("date")).getTime()}catch(r){}})},loadLanguage:function(t,n){if(void 0!==Sabre.translations[Sabre._config.global.language])t();else{var r=this.baseUrl+"jsonMobile/translations.html?language="+Sabre._config.global.language;""!==n&&(r+="&"+n),e.ajax({url:r,type:"POST",headers:{JsonResponse:"JsonResponse"}}).success(function(e){Sabre.translations[Sabre._config.global.language]=e,t()}).done(function(t,n,e){try{Sabre._config.global.currentTimeInMillis=a.parse(e.getResponseHeader("date")).getTime()}catch(r){}})}},handleFlowMessages:function(o){var s=Sabre.getComponent("flomes"),l=["ffNotLoggedIn"],u=["cancelAndRefund.technicalErrorDuringCancelAndRefund"];if(void 0!==s&&s.model&&0!==s.model.messages.length){var t=s.model.messages,a=0,i=!0;if(window.Sabre.views[o]&&_.isFunction(window.Sabre.views[o].handleFlowMessages)&&(i=window.Sabre.views[o].handleFlowMessages(t)),Sabre.router.page&&_.isFunction(Sabre.router.page.handleFlowMessages)&&(i=Sabre.router.page.handleFlowMessages(t)),0!==this.validationMessages.length&&i&&(i=this.handleValidationMessages(t)),i&&(1!==t.length&&_.each(t,function(e,t){"genericError"!==e.id&&"error"===e.level&&(a=t)}),("error"===t[a].level||"warn"===t[a].level)&&-1===e.inArray(t[a].id,l)))if(-1!==e.inArray(t[a].id,u)){var c=[{name:"validation.overlay.button",handler:function(){Sabre.router.ComponentsCollection.reset(),r.history._updateHash(window.location,"landing")}}];Sabre.app.modal.show('<p data-translate="flow.message.'+t[a].id+'.message"></p>',{title:"flow.message."+t[a].id+".title",buttons:c})}else t[a].code&&(t[a].id=t[a].code),Sabre.eventBus.trigger(n.DISABLE_BACK_BUTTON),Sabre.app.modal.simple("flow.message."+t[a].id+".message","flow.message."+t[a].id+".title")}},handleValidationMessages:function(r){var n=!1,t=this;return e.each(r,function(a,e){if("validationError"===e.id&&(null===e.additionalInfo||0===e.additionalInfo.length)){var r=_.keys(t.validationMessages[0]);return Sabre.app.modal.simple(t.validationMessages[0][r[0]][0].code+"|"+t.validationMessages[0][r[0]][0].args.join("|"),"flow.message.validationError.title"),n=!0,!1}}),!n},timeout:function(){var e=1e3*Sabre._config.sat.sessionTimeout,t=Sabre._config.sat.sessionTimeoutWarningOffset&&1e3*(Sabre._config.sat.sessionTimeout-Sabre._config.sat.sessionTimeoutWarningOffset)||e;window.clearTimeout(f),window.clearTimeout(d),this.setupSessionTimeout(e),e>t&&this.setupSessionWarningTimeout(t)},setupSessionTimeout:function(e){f=window.setTimeout(function(){var e={transferObjects:[{componentType:"timeout",actionCode:"",queryData:{componentId:"timeoutc1",componentType:"timeout",queryData:null}}]};Sabre.router.ajax(e,void 0,"flushsession"),Sabre.app.modal.close(),Sabre.app.modal.show(w({}),{buttons:[{name:"label.popup.sessionTimeout.okBtn",handler:function(){void 0!==s[Sabre.router.flow]&&(window.location.hash=s[Sabre.router.flow]),window.location.reload()}}]})},e)},setupSessionWarningTimeout:function(e){d=window.setTimeout(function(){Sabre.app.modal.close(),Sabre.app.modal.show(h({timeLeftInMinutes:Math.floor(Sabre._config.sat.sessionTimeoutWarningOffset/60)}),{title:"label.popup.sessionTimeoutWarning.title",buttons:[{name:"label.popup.sessionTimeoutWarning.cancel","class":"modal-close btn-secondary span6"},{name:"label.popup.sessionTimeout.okBtn","class":"span6",handler:function(){window.location.reload()}}]})},e)},getRedirectFlow:function(n){var e="webqtrip",t=i(n);return t.flowUrl&&(e=t.flowUrl.replace(/.html/gi,"")),e},checkForHideParameters:function(e){e&&(e.noHeader&&"true"===e.noHeader&&Sabre.app.storage().set("ssw2010NoHeader",!0),e.noFooter&&"true"===e.noFooter&&Sabre.app.storage().set("ssw2010NoFooter",!0))},isMTO:function(){return-1!==["ANCILLARIES_MTO_ANCILLARY_PAGE","ANCILLARIES_MTO_PURCHASE_PAGE","ANCILLARIES_MTO_CONFIRMATION_PAGE"].indexOf(this.currentPage)},initialize:function(){this.history=[],this.previousPage={},this.socket=Sabre.socket=new m({Sabre:Sabre,router:this}),this.app=e("#app")}})}),require.config({baseUrl:"undefined"!=typeof Sabre?Sabre.getPath()+"javascripts"+(developmentMode?"":"/build"):"",paths:{jquery:"libs/jquery-2.1.1",underscore:"libs/underscore",backbone:"libs/backbone",backboneValidation:"libs/backbone-validation",calendar:"libs/zebra_datepicker",unicodeBase:"libs/unicode-base",text:"libs/text",tpl:"libs/tpl",mobileEvents:"libs/jquery.hammer",rsvp:"libs/rsvp"},shim:{"libs/jquery.easing":{deps:["jquery"]},backbone:{deps:["underscore","jquery","libs/jquery.easing"],exports:"Backbone"},backboneValidation:{deps:["underscore","backbone","unicodeBase"],exports:"backboneValidation"},calendar:{deps:["jquery"],exports:"jQuery.fn.Zebra_DatePicker"},"libs/xregexp":{exports:"XRegExp"},unicodeBase:{deps:["libs/xregexp"]}}}),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;return function(){var n=Array.prototype.slice.call(arguments);return t.apply(e||null,n)}}),require(["backbone","global","logger","routers/AppRouter"],function(e,r,t,n){t.setEnabled(developmentMode===!0),Sabre.router=new n,e.history.start()}),define("main",function(){}),function(S,p){function tt(e,t,n){return setTimeout(st(e,n),t)}function w(e,n,t){return Array.isArray(e)?(u(e,t[n],t),!0):!1}function u(e,n,r){var t,a;if(e)if(e.forEach)e.forEach(n,r);else if(e.length!==p)for(t=0,a=e.length;a>t;t++)n.call(r,e[t],t,e);else for(t in e)e.hasOwnProperty(t)&&n.call(r,e[t],t,e)}function v(n,r,a){for(var t=Object.keys(r),e=0,i=t.length;i>e;e++)(!a||a&&n[t[e]]===p)&&(n[t[e]]=r[t[e]]);return n}function ot(e,t){return v(e,t,!0)}function t(t,a,n){var e,r=a.prototype;e=t.prototype=Object.create(r),e.constructor=t,e._super=r,n&&v(e,n)}function st(e,t){return function(){return e.apply(t,arguments)}}function at(e,t){return typeof e==wt?e.apply(t?t[0]||p:p,t):e}function Tt(e,t){return e===p?t:e}function rt(e,t,n){u(H(t),function(t){e.addEventListener(t,n,!1)})}function nt(e,t,n){u(H(t),function(t){e.removeEventListener(t,n,!1)})}function nn(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function h(e,t){return e.indexOf(t)>-1}function H(e){return e.trim().split(/\s+/g)}function C(e,r,n){if(e.indexOf&&!n)return e.indexOf(r);for(var t=0,a=e.length;a>t;t++)if(n&&e[t][n]==r||!n&&e[t]===r)return t;return-1}function Dt(e){return Array.prototype.slice.call(e,0)}function tn(t,n){for(var r=[],a=[],e=0,s=t.length;s>e;e++){var i=n?t[e][n]:t[e];C(a,i)<0&&r.push(t[e]),a[e]=i}return r}function q(a,e){for(var t,n,i=e[0].toUpperCase()+e.slice(1),r=0,s=xt.length;s>r;r++)if(t=xt[r],n=t?t+i:e,n in a)return n;return p}function en(){return Rt++}function o(t,n){var e=this;this.manager=t,this.callback=n,this.domHandler=function(t){at(e.manager.options.enable,[e.manager])&&e.handler(t)},this.evEl&&rt(this.manager.element,this.evEl,this.domHandler),this.evWin&&rt(S,this.evWin,this.domHandler)}function Qt(e){var t;return new(t=kt?St:Pt?it:pt?ct:G)(e,Zt)}function Zt(n,r,t){var i=t.pointers.length,s=t.changedPointers.length,o=r&c&&i-s===0,l=r&(e|a)&&i-s===0;t.isFirst=o,t.isFinal=l,o&&(n.session={}),t.eventType=r,Jt(n,t),n.emit("hammer.input",t),n.recognize(t)}function Jt(o,e){var t=o.session,a=e.pointers,l=a.length;t.firstInput||(t.firstInput=J(e)),l>1&&!t.firstMultiple?t.firstMultiple=J(e):1===l&&(t.firstMultiple=!1);var u=t.firstInput,n=t.firstMultiple,i=n?n.center:u.center,r=ft(a);e.timeStamp=Y(),e.deltaTime=e.timeStamp-u.timeStamp,e.deltaX=r.x-i.x,e.deltaY=r.y-i.y,e.center=r,e.angle=z(i,r),e.distance=M(i,r),e.offsetDirection=_t(e.deltaX,e.deltaY),e.scale=n?Yt(n.pointers,a):1,e.rotation=n?Wt(n.pointers,a):0;var s=o.element;nn(e.srcEvent.target,s)&&(s=e.srcEvent.target),e.target=s,Xt(t,e)}function Xt(c,t){var e=c.lastInterval;e||(e=c.lastInterval=J(t));var r,a,i,s,o=t.timeStamp-e.timeStamp;if(o>Ft||e.velocity===p){var l=e.deltaX-t.deltaX,u=e.deltaY-t.deltaY,n=Kt(o,l,u);a=n.x,i=n.y,r=T(n.x)>T(n.y)?n.x:n.y,s=_t(l,u)}else r=e.velocity,a=e.velocityX,i=e.velocityY,s=e.direction;t.velocity=r,t.velocityX=a,t.velocityY=i,t.direction=s}function J(e){for(var n=[],t=0;t<e.pointers.length;t++)n[t]={clientX:y(e.pointers[t].clientX),clientY:y(e.pointers[t].clientY)};return{timeStamp:Y(),pointers:n,center:ft(n),deltaX:e.deltaX,deltaY:e.deltaY}}function ft(e){var t=e.length;if(1===t)return{x:y(e[0].clientX),y:y(e[0].clientY)};for(var r=0,a=0,n=0;t>n;n++)r+=e[n].clientX,a+=e[n].clientY;return{x:y(r/t),y:y(a/t)}}function Kt(e,t,n){return{x:t/e||0,y:n/e||0}}function _t(e,t){return e===t?U:T(e)>=T(t)?e>0?k:D:t>0?P:E}function M(t,n,e){e||(e=dt);var r=n[e[0]]-t[e[0]],a=n[e[1]]-t[e[1]];return Math.sqrt(r*r+a*a)}function z(t,n,e){e||(e=dt);var r=n[e[0]]-t[e[0]],a=n[e[1]]-t[e[1]];return 180*Math.atan2(a,r)/Math.PI}function Wt(e,t){return z(t[1],t[0],N)-z(e[1],e[0],N)}function Yt(e,t){return M(t[0],t[1],N)/M(e[0],e[1],N)}function G(){this.evEl=Bt,this.evWin=Ot,this.allow=!0,this.pressed=!1,o.apply(this,arguments)}function St(){this.evEl=ut,this.evWin=At,o.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function it(){this.evEl=Ht,this.targetIds={},o.apply(this,arguments)}function Vt(t,o){var e,n,a=o.targetIds,i=Dt(t.targetTouches),r=Dt(t.changedTouches),s=[];if("touchstart"==t.type)for(e=0,n=i.length;n>e;e++)a[i[e].identifier]=!0;for(e=0,n=r.length;n>e;e++)a[r[e].identifier]&&s.push(r[e]),("touchend"==t.type||"touchcancel"==t.type)&&delete a[r[e].identifier];return[tn(i.concat(s),"identifier"),s]}function ct(){o.apply(this,arguments);var e=st(this.handler,this);this.touch=new it(this.manager,e),this.mouse=new G(this.manager,e)}function V(e,t){this.manager=e,this.set(t)}function zt(e){if(h(e,_))return _;var t=h(e,x),n=h(e,I);return t&&n?x+" "+I:t||n?t?x:I:h(e,lt)?lt:ht}function d(e){this.id=en(),this.manager=null,this.options=ot(e||{},this.defaults),this.options.enable=Tt(this.options.enable,!0),this.state=j,this.simultaneous={},this.requireFail=[]}function Gt(e){return e&F?"cancel":e&b?"end":e&A?"move":e&n?"start":""}function vt(e){return e==E?"down":e==P?"up":e==k?"left":e==D?"right":""}function L(e,n){var t=n.manager;return t?t.get(e):e}function r(){d.apply(this,arguments)}function B(){r.apply(this,arguments),this.pX=null,this.pY=null}function W(){r.apply(this,arguments)}function X(){d.apply(this,arguments),this._timer=null,this._input=null}function Q(){r.apply(this,arguments)}function et(){r.apply(this,arguments)}function O(){d.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function f(t,e){return e=e||{},e.recognizers=Tt(e.recognizers,f.defaults.preset),new $(t,e)}function $(t,e){e=e||{},this.options=ot(e,f.defaults),this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=Qt(this),this.touchAction=new V(this,this.options.touchAction),yt(this,!0),u(e.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[2])},this)}function yt(n,r){var e=n.element,t=n.options.cssProps;u(t,function(t,n){e.style[q(e.style,n)]=r?t:""});var a=r&&function(){return!1};"none"==t.userSelect&&(e.onselectstart=a),"none"==t.userDrag&&(e.ondragstart=a)}function an(n,t){var e=document.createEvent("Event");e.initEvent(n,!0,!0),e.gesture=t,t.target.dispatchEvent(e)}var xt=["","webkit","moz","MS","ms","o"],Ut=document.createElement("div"),wt="function",jt="undefined",y=Math.round,T=Math.abs,Y=Date.now,Rt=1,It=/mobile|tablet|ip(ad|hone|od)|android/i,pt="ontouchstart"in S,kt=q(S,"PointerEvent")!==p,Pt=pt&&It.test(navigator.userAgent),R="touch",Et="pen",Z="mouse",$t="kinect",Ft=25,c=1,m=2,e=4,a=8,U=1,k=2,D=4,P=8,E=16,s=k|D,g=P|E,K=s|g,dt=["x","y"],N=["clientX","clientY"];o.prototype={handler:function(){},destroy:function(){this.elEvents&&nt(this.manager.element,this.elEvents,this.domHandler),this.winEvents&&nt(S,this.winEvents,this.domHandler)}};var Nt={mousedown:c,mousemove:m,mouseup:e,mouseout:a},Bt="mousedown",Ot="mousemove mouseout mouseup";t(G,o,{handler:function(t){var n=Nt[t.type];if(n&c&&0===t.button&&(this.pressed=!0),n&m&&1!==t.which&&(n=e),this.pressed&&this.allow){var r=t.relatedTarget||t.toElement||t.target;"mouseout"==t.type&&"HTML"!=r.nodeName&&(n=m),n&(e|a)&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[t],changedPointers:[t],pointerType:Z,srcEvent:t})}}});var Mt={pointerdown:c,pointermove:m,pointerup:e,pointercancel:a,pointerout:a},Lt={2:R,3:Et,4:Z,5:$t},ut="pointerdown",At="pointermove pointerout pointerup pointercancel";S.MSPointerEvent&&(ut="MSPointerDown",At="MSPointerMove MSPointerOut MSPointerUp MSPointerCancel"),t(St,o,{handler:function(t){var n=this.store,s=!1,o=t.type.toLowerCase().replace("ms",""),r=Mt[o],l=Lt[t.pointerType]||t.pointerType,u=t.relatedTarget||t.toElement||t.target;"pointerout"==o&&"HTML"!=u.nodeName&&(r=m),r&c&&(0===t.button||l==R)?n.push(t):r&(e|a)&&(s=!0);var i=C(n,t.pointerId,"pointerId");0>i||(n[i]=t,this.callback(this.manager,r,{pointers:n,changedPointers:[t],pointerType:l,srcEvent:t}),s&&n.splice(i,1))}});var qt={touchstart:c,touchmove:m,touchend:e,touchcancel:a},Ht="touchstart touchmove touchend touchcancel";t(it,o,{handler:function(e){var t=Vt(e,this);this.callback(this.manager,qt[e.type],{pointers:t[0],changedPointers:t[1],pointerType:R,srcEvent:e})}}),t(ct,o,{handler:function(r,n,t){var i=t.pointerType==R,s=t.pointerType==Z;if(i)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;n&(e|a)&&(this.mouse.allow=!0),this.callback(r,n,t)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ct=q(Ut.style,"touchAction"),bt=Ct!==p,mt="compute",ht="auto",lt="manipulation",_="none",x="pan-x",I="pan-y";V.prototype={set:function(e){e==mt&&(e=this.compute()),bt&&(this.manager.element.style[Ct]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return u(this.manager.recognizers,function(t){at(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),zt(e.join(" "))},preventDefaults:function(t){if(!bt){var n=t.srcEvent,r=t.offsetDirection;if(this.manager.session.prevented)return void n.preventDefault();var e=this.actions,o=h(e,_),a=h(e,I),i=h(e,x);return o||a&&i||a&&r&s||i&&r&g?this.preventSrc(n):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var j=1,n=2,A=4,b=8,l=b,F=16,i=32;d.prototype={defaults:{},set:function(e){return v(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(w(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=L(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return w(e,"dropRecognizeWith",this)?this:(e=L(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(w(e,"requireFailure",this))return this;var t=this.requireFail;return e=L(e,this),-1===C(t,e)&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(w(e,"dropRequireFailure",this))return this;e=L(e,this);var t=C(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){this.manager.emit(this.options.event,e),this.manager.emit(this.options.event+Gt(this.state),e)},tryEmit:function(e){return this.canEmit()?this.emit(e):void(this.state=i)},canEmit:function(){for(var e=0;e<this.requireFail.length;e++)if(!(this.requireFail[e].state&(i|j)))return!1;return!0},recognize:function(t){var e=v({},t);return at(this.options.enable,[this,e])?(this.state&(l|F|i)&&(this.state=j),this.state=this.process(e),void(this.state&(n|A|b|F)&&this.tryEmit(e))):(this.reset(),void(this.state=i))},process:function(){},getTouchAction:function(){},reset:function(){}},t(r,d,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(r){var t=this.state,s=r.eventType,o=t&(n|A),l=this.attrTest(r);return o&&(s&a||!l)?t|F:o||l?s&e?t|b:t&n?t|A:n:i}}),t(B,r,{defaults:{event:"pan",threshold:10,pointers:1,direction:K},getTouchAction:function(){var e=this.options.direction;if(e===K)return[_];var t=[];return e&s&&t.push(I),e&g&&t.push(x),t},directionTest:function(e){var n=this.options,r=!0,a=e.distance,t=e.direction,i=e.deltaX,o=e.deltaY;return t&n.direction||(n.direction&s?(t=0===i?U:0>i?k:D,r=i!=this.pX,a=Math.abs(e.deltaX)):(t=0===o?U:0>o?P:E,r=o!=this.pY,a=Math.abs(e.deltaY))),e.direction=t,r&&a>n.threshold&&t&n.direction},attrTest:function(e){return r.prototype.attrTest.call(this,e)&&(this.state&n||!(this.state&n)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY,this._super.emit.call(this,e);var t=vt(e.direction);t&&this.manager.emit(this.options.event+t,e)}}),t(W,r,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[_]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&n)},emit:function(e){if(this._super.emit.call(this,e),1!==e.scale){var t=e.scale<1?"in":"out";this.manager.emit(this.options.event+t,e)}}}),t(X,d,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[ht]},process:function(t){var n=this.options,r=t.pointers.length===n.pointers,s=t.distance<n.threshold,o=t.deltaTime>n.time;if(this._input=t,!s||!r||t.eventType&(e|a)&&!o)this.reset();else if(t.eventType&c)this.reset(),this._timer=tt(function(){this.state=l,this.tryEmit()},n.time,this);else if(t.eventType&e)return l;return i},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===l&&(t&&t.eventType&e?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Y(),this.manager.emit(this.options.event,this._input)))}}),t(Q,r,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[_]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&n)}}),t(et,r,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:s|g,pointers:1},getTouchAction:function(){return B.prototype.getTouchAction.call(this)},attrTest:function(t){var n,r=this.options.direction;return r&(s|g)?n=t.velocity:r&s?n=t.velocityX:r&g&&(n=t.velocityY),this._super.attrTest.call(this,t)&&r&t.direction&&T(n)>this.options.velocity&&t.eventType&e},emit:function(e){this.manager.emit(this.options.event,e);var t=vt(e.direction);t&&this.manager.emit(this.options.event+t,e)}}),t(O,d,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[lt]},process:function(t){var r=this.options,a=t.pointers.length===r.pointers,s=t.distance<r.threshold,o=t.deltaTime<r.time;if(this.reset(),t.eventType&c&&0===this.count)return this._failTimeout();if(s&&o&&a){if(t.eventType!=e)return this._failTimeout();var u=this.pTime?t.timeStamp-this.pTime<r.interval:!0,p=!this.pCenter||M(this.pCenter,t.center)<r.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,p&&u?this.count+=1:this.count=1,this._input=t;var d=this.count%r.taps;if(0===d)return this.hasRequireFailures()?(this._timer=tt(function(){this.state=l,this.tryEmit()},r.interval,this),n):l}return i},_failTimeout:function(){return this._timer=tt(function(){this.state=i},this.options.interval,this),i},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==l&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),f.VERSION="2.0.1",f.defaults={domEvents:!1,touchAction:mt,enable:!0,preset:[[Q,{enable:!1}],[W,{enable:!1},["rotate"]],[et,{direction:s}],[B,{direction:s},["swipe"]],[O],[O,{event:"doubletap",taps:2},["tap"]],[X]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var rn=1,gt=2;$.prototype={set:function(e){return v(this.options,e),this},stop:function(e){this.session.stopped=e?gt:rn},recognize:function(i){if(!this.session.stopped){this.touchAction.preventDefaults(i);var t,r=this.session,e=r.curRecognizer;
(!e||e&&e.state&l)&&(e=r.curRecognizer=null);for(var a=0,s=this.recognizers.length;s>a;a++)t=this.recognizers[a],this.session.stopped===gt||e&&t!=e&&!t.canRecognizeWith(e)?t.reset():t.recognize(i),!e&&t.state&(n|A|b)&&(e=r.curRecognizer=t)}},get:function(t){if(t instanceof d)return t;for(var n=this.recognizers,e=0;e<n.length;e++)if(n[e].options.event==t)return n[e];return null},add:function(e){if(w(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(w(e,"remove",this))return this;var t=this.recognizers;return e=this.get(e),t.splice(C(t,e),1),this.touchAction.update(),this},on:function(t,n){var e=this.handlers;return u(H(t),function(t){e[t]=e[t]||[],e[t].push(n)}),this},off:function(n,t){var e=this.handlers;return u(H(n),function(n){t?e[n].splice(C(e[n],t),1):delete e[n]}),this},emit:function(n,e){this.options.domEvents&&an(n,e);var t=this.handlers[n];if(t&&t.length){e.type=n,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0,a=t.length;a>r;r++)t[r](e)}},destroy:function(){this.element&&yt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},v(f,{INPUT_START:c,INPUT_MOVE:m,INPUT_END:e,INPUT_CANCEL:a,STATE_POSSIBLE:j,STATE_BEGAN:n,STATE_CHANGED:A,STATE_ENDED:b,STATE_RECOGNIZED:l,STATE_CANCELLED:F,STATE_FAILED:i,DIRECTION_NONE:U,DIRECTION_LEFT:k,DIRECTION_RIGHT:D,DIRECTION_UP:P,DIRECTION_DOWN:E,DIRECTION_HORIZONTAL:s,DIRECTION_VERTICAL:g,DIRECTION_ALL:K,Manager:$,Input:o,TouchAction:V,Recognizer:d,AttrRecognizer:r,Tap:O,Pan:B,Swipe:et,Pinch:W,Rotate:Q,Press:X,on:rt,off:nt,each:u,merge:ot,extend:v,inherit:t,bindFn:st,prefixed:q}),typeof define==wt&&define.amd?define("libs/hammer",[],function(){return f}):typeof module!=jt&&module.exports?module.exports=f:S.Hammer=f}(window),define("mobileEvents",["jquery","libs/hammer"],function(t,e){!function(t,e,n){function r(a,i){var r=t(a);r.data(n)||r.data(n,new e(r[0],i))}t.fn.hammer=function(e){return this.each(function(){r(this,e)})},e.Manager.prototype.emit=function(e){return function(t,n){e.call(this,t,n),jQuery(this.element).triggerHandler({type:t,gesture:n})}}(e.Manager.prototype.emit)}(jQuery,e,"hammer")}),function(e){e.Zebra_DatePicker=function(ft,pt){var p,a,f,E,_,y,k,N,x,q,s,o,d,h,r,I,C,A,O,v,M,l,c,H,D,F,et,at,g,z,R,B,L,X,G,J,nt,W,K={always_visible:!1,highlight_to_date:null,calendars_visible:1,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],days_abbr:!1,direction:0,disabled_dates:!1,enabled_dates:!1,first_day_of_week:1,format:"Y-m-d",header_navigation:["&#171;","&#187;"],inside:!0,lang_clear_date:"Clear date",months:["January","February","March","April","May","June","July","August","September","October","November","December"],months_abbr:!1,offset:[5,-5],pair:!1,readonly_element:!0,select_other_months:!1,show_clear_date:0,show_icon:!0,show_other_months:!0,show_select_today:"Today",show_week_number:!1,start_date:!1,strict:!1,view:"days",switch_view_enabled:!0,weekend_days:[0,6],zero_pad:!1,onChange:null,onClear:null,onSelect:null},$=[],S=[],Z=[],t=this;t.settings={};var n=e(ft),rt=function(at){if(!at){t.settings=e.extend({},K,pt);for(var W in n.data())0===W.indexOf("zdp_")&&(W=W.replace(/^zdp\_/,""),void 0!==K[W]&&(t.settings[W]=n.data("zdp_"+W)))}t.settings.readonly_element&&n.attr("readonly","readonly");var vt={days:["d","j","D"],months:["F","m","M","n","t"],years:["o","Y","y"]},nt=!1,et=!1,J=!1,Z=null;for(Z in vt)e.each(vt[Z],function(n,e){t.settings.format.indexOf(e)>-1&&("days"==Z?nt=!0:"months"==Z?et=!0:"years"==Z&&(J=!0))});g=nt&&et&&J?["years","months","days"]:!nt&&et&&J?["years","months"]:nt||et||!J?nt||!et||J?["years","months","days"]:["months"]:["years"],-1==e.inArray(t.settings.view,g)&&(t.settings.view=g[g.length-1]),v=[],O=[];for(var st,ot=0;2>ot;ot++)st=0===ot?t.settings.disabled_dates:t.settings.enabled_dates,e.isArray(st)&&st.length>0&&e.each(st,function(){for(var t=this.split(" "),n=0;4>n;n++){t[n]||(t[n]="*"),t[n]=t[n].indexOf(",")>-1?t[n].split(","):new Array(t[n]);for(var r=0;r<t[n].length;r++)if(t[n][r].indexOf("-")>-1){var s=t[n][r].match(/^([0-9]+)\-([0-9]+)/);if(null!==s){for(var a=i(s[1]);a<=i(s[2]);a++)-1==e.inArray(a,t[n])&&t[n].push(a+"");t[n].splice(r,1)}}for(r=0;r<t[n].length;r++)t[n][r]=isNaN(i(t[n][r]))?t[n][r]:i(t[n][r])}0===ot?v.push(t):O.push(t)});var G,tt,M=new Date,rt=t.settings.reference_date?t.settings.reference_date:n.data("zdp_reference_date")&&void 0!==n.data("zdp_reference_date")?n.data("zdp_reference_date"):M;if(l=void 0,c=void 0,s=rt.getMonth(),N=M.getMonth(),o=rt.getFullYear(),x=M.getFullYear(),d=rt.getDate(),q=M.getDate(),t.settings.direction===!0)l=rt;else if(t.settings.direction===!1)c=rt,F=c.getMonth(),D=c.getFullYear(),H=c.getDate();else if(!e.isArray(t.settings.direction)&&P(t.settings.direction)&&i(t.settings.direction)>0||e.isArray(t.settings.direction)&&((G=j(t.settings.direction[0]))||t.settings.direction[0]===!0||P(t.settings.direction[0])&&t.settings.direction[0]>0)&&((tt=j(t.settings.direction[1]))||t.settings.direction[1]===!1||P(t.settings.direction[1])&&t.settings.direction[1]>=0))l=G?G:new Date(o,s,d+i(e.isArray(t.settings.direction)?t.settings.direction[0]===!0?0:t.settings.direction[0]:t.settings.direction)),s=l.getMonth(),o=l.getFullYear(),d=l.getDate(),tt&&+tt>=+l?c=tt:!tt&&t.settings.direction[1]!==!1&&e.isArray(t.settings.direction)&&(c=new Date(o,s,d+i(t.settings.direction[1]))),c&&(F=c.getMonth(),D=c.getFullYear(),H=c.getDate());else if(!e.isArray(t.settings.direction)&&P(t.settings.direction)&&i(t.settings.direction)<0||e.isArray(t.settings.direction)&&(t.settings.direction[0]===!1||P(t.settings.direction[0])&&t.settings.direction[0]<0)&&((G=j(t.settings.direction[1]))||P(t.settings.direction[1])&&t.settings.direction[1]>=0))c=new Date(o,s,d+i(e.isArray(t.settings.direction)?t.settings.direction[0]===!1?0:t.settings.direction[0]:t.settings.direction)),F=c.getMonth(),D=c.getFullYear(),H=c.getDate(),G&&+c>+G?l=G:!G&&e.isArray(t.settings.direction)&&(l=new Date(D,F,H-i(t.settings.direction[1]))),l&&(s=l.getMonth(),o=l.getFullYear(),d=l.getDate());else if(e.isArray(t.settings.disabled_dates)&&t.settings.disabled_dates.length>0)for(var it in v)if("*"==v[it][0]&&"*"==v[it][1]&&"*"==v[it][2]&&"*"==v[it][3]){var ut=[];if(e.each(O,function(){var e=this;"*"!=e[2][0]&&ut.push(parseInt(e[2][0]+("*"==e[1][0]?"12":u(e[1][0],2))+("*"==e[0][0]?"*"==e[1][0]?"31":new Date(e[2][0],e[1][0],0).getDate():u(e[0][0],2)),10))}),ut.sort(),ut.length>0){var Y=(ut[0]+"").match(/([0-9]{4})([0-9]{2})([0-9]{2})/);o=parseInt(Y[1],10),s=parseInt(Y[2],10)-1,d=parseInt(Y[3],10)}break}if(m(o,s,d)){for(;m(o);)l?(o++,s=0):(o--,s=11);for(;m(o,s);)l?(s++,d=1):(s--,d=new Date(o,s+1,0).getDate()),s>11?(o++,s=0,d=1):0>s&&(o--,s=11,d=new Date(o,s+1,0).getDate());for(;m(o,s,d);)l?d++:d--,M=new Date(o,s,d),o=M.getFullYear(),s=M.getMonth(),d=M.getDate();M=new Date(o,s,d),o=M.getFullYear(),s=M.getMonth(),d=M.getDate()}var lt=j(n.val()||(t.settings.start_date?t.settings.start_date:""));if(lt&&t.settings.strict&&m(lt.getFullYear(),lt.getMonth(),lt.getDate())&&n.val(""),at||Q(l),!t.settings.always_visible){if(!at){if(t.settings.show_icon){"firefox"==w.name&&n.is('input[type="text"]')&&"inline"==n.css("display")&&n.css("display","inline-block");var _t=jQuery('<span class="Zebra_DatePicker_Icon_Wrapper"></span>').css({display:n.css("display"),position:"static"==n.css("position")?"relative":n.css("position"),"float":n.css("float"),top:n.css("top"),right:n.css("right"),bottom:n.css("bottom"),left:n.css("left")});n.wrap(_t).css({position:"relative",top:"auto",right:"auto",bottom:"auto",left:"auto"}),f=jQuery('<button type="button" class="Zebra_DatePicker_Icon'+("disabled"==n.attr("disabled")?" Zebra_DatePicker_Icon_Disabled":"")+'">Pick a date</button>'),t.icon=f,z=f.add(n)}else z=n;z.bind("click",function(e){e.preventDefault(),n.attr("disabled")||("none"!=a.css("display")?t.hide():t.show())}),void 0!==f&&f.insertAfter(n)}if(void 0!==f){f.attr("style",""),t.settings.inside&&f.addClass("Zebra_DatePicker_Icon_Inside");var gt=n.outerWidth(),dt=n.outerHeight(),ft=parseInt(n.css("marginLeft"),10)||0,ht=parseInt(n.css("marginTop"),10)||0,Ct=f.outerWidth(),mt=f.outerHeight(),yt=parseInt(f.css("marginLeft"),10)||0,bt=parseInt(f.css("marginRight"),10)||0;f.css(t.settings.inside?{top:ht+(dt-mt)/2,left:ft+(gt-Ct-bt)}:{top:ht+(dt-mt)/2,left:ft+gt+yt})}}if(L=t.settings.show_select_today!==!1&&e.inArray("days",g)>-1&&!m(x,N,q)?t.settings.show_select_today:!1,!at){e(window).bind("resize.Zebra_DatePicker",function(){t.hide(),void 0!==f&&(clearTimeout(X),X=setTimeout(function(){t.update()},100))});for(var V='<div class="Zebra_DatePicker">',b=0;b<t.settings.calendars_visible;b++)(0===b||b===t.settings.calendars_visible-1)&&(V+=0===b?'<div class="dp_previous">'+t.settings.header_navigation[0]+"</div>":'<div class="dp_next">'+t.settings.header_navigation[1]+"</div>"),V+='<div class="calendar calendar_'+b+'"><table class="dp_header dp_header_'+b+'"><tr>',V+='<td class="dp_previous">'+t.settings.header_navigation[0]+"</td>",V+='<td class="dp_caption">&#032;</td>',V+='<td class="dp_next">'+t.settings.header_navigation[1]+"</td>",V+='</tr></table><table class="dp_daypicker dp_daypicker_'+b+'"></table></div>';V+='<table class="dp_monthpicker"></table><table class="dp_yearpicker"></table><table class="dp_footer"><tr><td class="dp_today"'+(t.settings.show_clear_date!==!1?' style="width:50%"':"")+">"+L+'</td><td class="dp_clear"'+(L!==!1?' style="width:50%"':"")+">"+t.settings.lang_clear_date+"</td></tr></table></div>",a=e(V),t.datepicker=a;for(var b=0;b<t.settings.calendars_visible;b++)S.push(e("table.dp_daypicker_"+b,a)),$.push(e("table.dp_header_"+b,a));E=e("table.dp_daypicker",a),_=e("table.dp_monthpicker",a),y=e("table.dp_yearpicker",a),B=e("table.dp_footer",a),R=e("td.dp_today",B),k=e("td.dp_clear",B),t.settings.always_visible?n.attr("disabled")||(t.settings.always_visible.append(a),t.show()):e("body").append(a);for(var b=0;b<t.settings.calendars_visible;b++)ct(e("td",$[b]));e(".dp_previous",a).bind("click",function(){e(this).hasClass("dp_blocked")||("months"==p?r--:"years"==p?r-=12:--h<0&&(h=11,r--),T())}),t.settings.switch_view_enabled&&e(".dp_caption",$[0]).bind("click",function(){p="days"==p?e.inArray("months",g)>-1?"months":e.inArray("years",g)>-1?"years":"days":"months"==p?e.inArray("years",g)>-1?"years":e.inArray("days",g)>-1?"days":"months":e.inArray("days",g)>-1?"days":e.inArray("months",g)>-1?"months":"years",T()}),e(".dp_next",a).bind("click",function(){e(this).hasClass("dp_blocked")||("months"==p?r++:"years"==p?r+=12:12==++h&&(h=0,r++),T())});for(var b=0;b<t.settings.calendars_visible;b++)!function(n){S[n].delegate("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_week_number)","click",function(){t.settings.select_other_months&&null!==(Y=e(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/))?U(Y[1],Y[2]-1,Y[3],"days",e(this),n):U(r,h+n,i(e(this).find(">span").html()),"days",e(this),n)})}(b);_.delegate("td:not(.dp_disabled)","click",function(){var a=e(this).attr("class").match(/dp\_month\_([0-9]+)/);h=i(a[1]),-1==e.inArray("days",g)?U(r,h,1,"months",e(this)):(p="days",t.settings.always_visible&&n.val(""),T())}),y.delegate("td:not(.dp_disabled)","click",function(){r=i(e(this).html()),-1==e.inArray("months",g)?U(r,1,1,"years",e(this)):(p="months",t.settings.always_visible&&n.val(""),T())}),e(R).bind("click",function(r){r.preventDefault();for(var n=0;n<t.settings.calendars_visible;n++)U(x,N,q,"days",e(".dp_current",S[n]),n);t.settings.always_visible&&t.show(),t.hide()}),e(k).bind("click",function(i){i.preventDefault(),n.val(""),t.settings.always_visible?(I=null,C=null,A=null,e("td.dp_selected",a).removeClass("dp_selected")):(I=null,C=null,A=null,h=null,r=null),t.hide(),t.settings.onClear&&"function"==typeof t.settings.onClear&&t.settings.onClear(n)}),t.settings.always_visible||e(document).bind({"mousedown.Zebra_DatePicker":function(n){if("block"==a.css("display")){if(t.settings.show_icon&&e(n.target).get(0)===f.get(0))return!0;0===e(n.target).parents().filter(".Zebra_DatePicker").length&&t.hide()}},"keyup.Zebra_DatePicker":function(e){("block"==a.css("display")||27==e.which)&&t.hide()}}),T()}};t.destroy=function(){void 0!==t.icon&&t.icon.remove(),t.datepicker.remove(),e(document).unbind("keyup.Zebra_DatePicker"),e(document).unbind("mousedown.Zebra_DatePicker"),e(window).unbind("resize.Zebra_DatePicker"),n.removeData("Zebra_DatePicker"),delete t},t.hide=function(){t.settings.always_visible||(tt("hide"),a.hide())},t.show=function(){p=t.settings.view;var i=j(n.val()||(t.settings.start_date?t.settings.start_date:""));if(i?(C=i.getMonth(),h=i.getMonth(),A=i.getFullYear(),r=i.getFullYear(),I=i.getDate(),m(A,C,I)&&(t.settings.strict&&n.val(""),h=s,r=o)):(h=s,r=o),null!==t.settings.highlight_to_date&&(G=i,J=t.settings.highlight_to_date.getDate(),nt=t.settings.highlight_to_date.getMonth(),W=t.settings.highlight_to_date.getFullYear()),T(),t.settings.always_visible)a.show();else{var v=a.outerWidth(),g=a.outerHeight(),l=(void 0!==f?f.offset().left+f.outerWidth(!0):n.offset().left+n.outerWidth(!0))+t.settings.offset[0],u=(void 0!==f?f.offset().top:n.offset().top)-g+t.settings.offset[1],y=e(window).width(),b=e(window).height(),c=e(window).scrollTop(),d=e(window).scrollLeft();l+v>d+y&&(l=d+y-v),d>l&&(l=d),u+g>c+b&&(u=c+b-g),c>u&&(u=c),a.css({left:l,top:u}),a.fadeIn("explorer"==w.name&&w.version<9?0:150,"linear"),tt()}},t.update=function(n){t.original_direction&&(t.original_direction=t.direction),t.settings=e.extend(t.settings,n),rt(!0)};var j=function(h){if(h+="",""!==e.trim(h)){for(var c=ut(t.settings.format),g=["d","D","j","l","N","S","w","F","m","M","n","Y","y"],a=[],n=[],y=null,r=null,u=0;u<g.length;u++)(y=c.indexOf(g[u]))>-1&&a.push({character:g[u],position:y});if(a.sort(function(e,t){return e.position-t.position}),e.each(a,function(t,e){switch(e.character){case"d":n.push("0[1-9]|[12][0-9]|3[01]");break;case"D":n.push("[a-z]{3}");break;case"j":n.push("[1-9]|[12][0-9]|3[01]");break;case"l":n.push("[a-z]+");break;case"N":n.push("[1-7]");break;case"S":n.push("st|nd|rd|th");break;case"w":n.push("[0-6]");break;case"F":n.push("[a-z]+");break;case"m":n.push("0[1-9]|1[012]+");break;case"M":n.push("[a-z]{3}");break;case"n":n.push("[1-9]|1[012]");break;case"Y":n.push("[0-9]{4}");break;case"y":n.push("[0-9]{2}")}}),n.length&&(a.reverse(),e.each(a,function(e,t){c=c.replace(t.character,"("+n[n.length-e-1]+")")}),n=new RegExp("^"+c+"$","ig"),r=n.exec(h))){var b,d=new Date,f=d.getDate(),o=d.getMonth()+1,p=d.getFullYear(),m=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],v=["January","February","March","April","May","June","July","August","September","October","November","December"],s=!0;if(a.reverse(),e.each(a,function(n,a){if(!s)return!0;switch(a.character){case"m":case"n":o=i(r[n+1]);break;case"d":case"j":f=i(r[n+1]);break;case"D":case"l":case"F":case"M":b="D"==a.character||"l"==a.character?t.settings.days:t.settings.months,s=!1,e.each(b,function(e,t){if(s)return!0;if(r[n+1].toLowerCase()==t.substring(0,"D"==a.character||"M"==a.character?3:t.length).toLowerCase()){switch(a.character){case"D":r[n+1]=m[e].substring(0,3);break;case"l":r[n+1]=m[e];break;case"F":r[n+1]=v[e],o=e+1;break;case"M":r[n+1]=v[e].substring(0,3),o=e+1}s=!0}});break;case"Y":p=i(r[n+1]);break;case"y":p="19"+i(r[n+1])}}),s){var l=new Date(p,(o||1)-1,f||1);if(l.getFullYear()==p&&l.getDate()==(f||1)&&l.getMonth()==(o||1)-1)return l}}return!1}},ct=function(e){"firefox"==w.name?e.css("MozUserSelect","none"):"explorer"==w.name?e.bind("selectstart",function(){return!1}):e.mousedown(function(){return!1})},ut=function(e){return e.replace(/([-.,*+?^${}()|[\]\/\\])/g,"\\$1")},lt=function(s){for(var n="",r=s.getDate(),i=s.getDay(),c=t.settings.days[i],a=s.getMonth()+1,p=t.settings.months[a-1],o=s.getFullYear()+"",l=0;l<t.settings.format.length;l++){var d=t.settings.format.charAt(l);switch(d){case"y":o=o.substr(2);case"Y":n+=o;break;case"m":a=u(a,2);case"n":n+=a;break;case"M":p=e.isArray(t.settings.months_abbr)&&void 0!==t.settings.months_abbr[a-1]?t.settings.months_abbr[a-1]:t.settings.months[a-1].substr(0,3);case"F":n+=p;break;case"d":r=u(r,2);case"j":n+=r;break;case"D":c=e.isArray(t.settings.days_abbr)&&void 0!==t.settings.days_abbr[i]?t.settings.days_abbr[i]:t.settings.days[i].substr(0,3);case"l":n+=c;break;case"N":i++;case"w":n+=i;break;case"S":n+=r%10==1&&"11"!=r?"st":r%10==2&&"12"!=r?"nd":r%10==3&&"13"!=r?"rd":"th";break;default:n+=d}}return n},Y=function(a,p){var d=new Date(r,a+1,0).getDate(),b=new Date(r,a,1).getDay(),y=new Date(r,a,0).getDate(),l=b-t.settings.first_day_of_week;l=0>l?7+l:l,V(t.settings.months[a%12]+" "+r,p);var o="<tr>";t.settings.show_week_number&&(o+="<th>"+t.settings.show_week_number+"</th>");for(var n=0;7>n;n++)o+="<th>"+(e.isArray(t.settings.days_abbr)&&void 0!==t.settings.days_abbr[(t.settings.first_day_of_week+n)%7]?t.settings.days_abbr[(t.settings.first_day_of_week+n)%7]:t.settings.days[(t.settings.first_day_of_week+n)%7].substr(0,2))+"</th>";for(o+="</tr><tr>",n=0;42>n;n++){n>0&&n%7===0&&(o+="</tr><tr>"),n%7===0&&t.settings.show_week_number&&(o+='<td class="dp_week_number">'+dt(new Date(r,a,n-l+1))+"</td>");var i=n-l+1;if(t.settings.select_other_months&&(l>n||i>d)){var c=new Date(r,a,i),f=c.getFullYear(),h=c.getMonth(),g=c.getDate();c=f+u(h+1,2)+u(g,2)}if(l>n)o+='<td class="'+(t.settings.select_other_months&&!m(f,h,g)?"dp_not_in_month_selectable date_"+c:"dp_not_in_month")+'">'+(t.settings.select_other_months||t.settings.show_other_months?u(y-l+n+1,t.settings.zero_pad?2:0):"&nbsp;")+"</td>";else if(i>d)o+='<td class="'+(t.settings.select_other_months&&!m(f,h,g)?"dp_not_in_month_selectable date_"+c:"dp_not_in_month")+'">'+(t.settings.select_other_months||t.settings.show_other_months?u(i-d,t.settings.zero_pad?2:0):"&nbsp;")+"</td>";else{var v=(t.settings.first_day_of_week+n)%7,s="";m(r,a,i)?(e.inArray(v,t.settings.weekend_days)>-1?s="dp_weekend_disabled":s+=" dp_disabled",a==N&&r==x&&q==i&&(s+=" dp_disabled_current")):(e.inArray(v,t.settings.weekend_days)>-1&&(s="dp_weekend"),a==C&&r==A&&I==i&&(s+=" dp_selected"),a==N&&r==x&&q==i&&(s+=" dp_current"),null!==t.settings.highlight_to_date&&it(r,a,i)&&(s+=" dp_highlighted"),null!==t.settings.highlight_to_date&&J===i&&nt===a&&W===r&&(s+=" dp_highlight_limit")),o+="<td"+(""!==s?' class="'+e.trim(s)+'"':"")+"><span>"+(t.settings.zero_pad?u(i,2):i)+"</span></td>"}}o+="</tr>",S[p].html(e(o)),t.settings.always_visible&&(Z[p]=e("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked, .dp_week_number)",S[p])),S[p].show()},ot=function(){V(r);for(var a="<tr>",n=0;12>n;n++){n>0&&n%3===0&&(a+="</tr><tr>");var i="dp_month_"+n;m(r,n)?i+=" dp_disabled":C!==!1&&C==n?i+=" dp_selected":N==n&&x==r&&(i+=" dp_current"),a+='<td class="'+e.trim(i)+'">'+(e.isArray(t.settings.months_abbr)&&void 0!==t.settings.months_abbr[n]?t.settings.months_abbr[n]:t.settings.months[n].substr(0,3))+"</td>"}a+="</tr>",_.html(e(a)),t.settings.always_visible&&(et=e("td:not(.dp_disabled)",_)),_.show()},st=function(){V(r-7+" - "+(r+4));for(var i="<tr>",n=0;12>n;n++){n>0&&n%3===0&&(i+="</tr><tr>");var a="";m(r-7+n)?a+=" dp_disabled":A&&A==r-7+n?a+=" dp_selected":x==r-7+n&&(a+=" dp_current"),i+="<td"+(""!==e.trim(a)?' class="'+e.trim(a)+'"':"")+">"+(r-7+n)+"</td>"}i+="</tr>",y.html(e(i)),t.settings.always_visible&&(at=e("td:not(.dp_disabled)",y)),y.show()},tt=function(n){if("explorer"==w.name&&6==w.version){if(!M){var r=i(a.css("zIndex"))-1;M=jQuery("<iframe>",{src:'javascript:document.write("")',scrolling:"no",frameborder:0,allowtransparency:"true",css:{zIndex:r,position:"absolute",top:-1e3,left:-1e3,width:a.outerWidth(),height:a.outerHeight(),filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)",display:"none"}}),e("body").append(M)}switch(n){case"hide":M.hide();break;default:var t=a.offset();M.css({top:t.top,left:t.left,display:"block"})}}},it=function(n,r,a){var e=new Date(n,r,a);return e>=G&&e<=t.settings.highlight_to_date||G>=e&&e>=t.settings.highlight_to_date},m=function(p,n,r){if((void 0===p||isNaN(p))&&(void 0===n||isNaN(n))&&(void 0===r||isNaN(r)))return!1;if(e.isArray(t.settings.direction)||0!==i(t.settings.direction)){var f=i(b(p,"undefined"!=typeof n?u(n,2):"","undefined"!=typeof r?u(r,2):"")),g=(f+"").length;if(8==g&&("undefined"!=typeof l&&f<i(b(o,u(s,2),u(d,2)))||"undefined"!=typeof c&&f>i(b(D,u(F,2),u(H,2)))))return!0;if(6==g&&("undefined"!=typeof l&&f<i(b(o,u(s,2)))||"undefined"!=typeof c&&f>i(b(D,u(F,2)))))return!0;if(4==g&&("undefined"!=typeof l&&o>f||"undefined"!=typeof c&&f>D))return!0}"undefined"!=typeof n&&(n+=1);var h=!1,a=!1;return v&&e.each(v,function(){if(!h){var t=this;if((e.inArray(p,t[2])>-1||e.inArray("*",t[2])>-1)&&("undefined"!=typeof n&&e.inArray(n,t[1])>-1||e.inArray("*",t[1])>-1)&&("undefined"!=typeof r&&e.inArray(r,t[0])>-1||e.inArray("*",t[0])>-1)){if("*"==t[3])return h=!0;var a=new Date(p,n-1,r).getDay();if(e.inArray(a,t[3])>-1)return h=!0}}}),O&&e.each(O,function(){if(!a){var t=this;if((e.inArray(p,t[2])>-1||e.inArray("*",t[2])>-1)&&(a=!0,"undefined"!=typeof n))if(a=!0,e.inArray(n,t[1])>-1||e.inArray("*",t[1])>-1){if("undefined"!=typeof r)if(a=!0,e.inArray(r,t[0])>-1||e.inArray("*",t[0])>-1){if("*"==t[3])return a=!0;var i=new Date(p,n-1,r).getDay();if(e.inArray(i,t[3])>-1)return a=!0;a=!1}else a=!1}else a=!1}}),O&&a?!1:v&&h?!0:!1},P=function(e){return(e+"").match(/^\-?[0-9]+$/)?!0:!1},V=function(f,v){if(e(".dp_caption",$[v||0]).html(f),e.isArray(t.settings.direction)||0!==i(t.settings.direction)||1==g.length&&"months"==g[0]){var s,o,n=r,d=h;"days"==p?(o=!m(0>d-1?b(n-1,"11"):b(n,u(d-1,2))),s=!m(d+1>11?b(n+1,"00"):b(n,u(d+1,2)))):"months"==p?((!l||l.getFullYear()<=n-1)&&(o=!0),(!c||c.getFullYear()>=n+1)&&(s=!0)):"years"==p&&((!l||l.getFullYear()<n-7)&&(o=!0),(!c||c.getFullYear()>n+4)&&(s=!0)),o?e(".dp_previous",a).removeClass("dp_blocked"):e(".dp_previous",a).addClass("dp_blocked"),s?e(".dp_next",a).removeClass("dp_blocked"):e(".dp_next",a).addClass("dp_blocked")}},T=function(){if(""===E.text()||"days"==p){if(""===E.text()){t.settings.always_visible||a.css("left",-1e3),a.show();for(var s=0;s<t.settings.calendars_visible;s++)Y(h+s,s);var o=S[0].outerWidth(),l=S[0].outerHeight();_.css({width:o,height:l}),y.css({width:o,height:l}),B.css("width",o),a.hide()}else for(var s=0;s<t.settings.calendars_visible;s++)Y(h+s,s);_.hide(),y.hide()}else"months"==p?(ot(),E.hide(),y.hide()):"years"==p&&(st(),E.hide(),_.hide());if(t.settings.onChange&&"function"==typeof t.settings.onChange&&void 0!==p){var c="days"==p?E.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):"months"==p?_.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)"):y.find("td:not(.dp_disabled, .dp_weekend_disabled, .dp_not_in_month, .dp_blocked)");c.each(function(){if("days"==p)if(e(this).hasClass("dp_not_in_month_selectable")){var t=e(this).attr("class").match(/date\_([0-9]{4})(0[1-9]|1[012])(0[1-9]|[12][0-9]|3[01])/);e(this).data("date",t[1]+"-"+t[2]+"-"+t[3])}else e(this).data("date",r+"-"+u(h+1,2)+"-"+u(i(e(this).text()),2));else if("months"==p){var t=e(this).attr("class").match(/dp\_month\_([0-9]+)/);e(this).data("date",r+"-"+u(i(t[1])+1,2))}else e(this).data("date",i(e(this).text()))}),t.settings.onChange(p,c,n)}B.show(),t.settings.show_clear_date===!0||0===t.settings.show_clear_date&&""!==n.val()||t.settings.always_visible&&t.settings.show_clear_date!==!1?(k.show(),L?(R.css("width","50%"),k.css("width","50%")):(R.hide(),k.css("width","100%"))):(k.hide(),L?R.show().css("width","100%"):B.hide())},U=function(i,s,o,a,l,p){var e=new Date(i,s,o,12,0,0),d="days"==a?Z[p]:"months"==a?et:at,c=lt(e);n.val(c),t.settings.always_visible&&(C=e.getMonth(),h=e.getMonth(),A=e.getFullYear(),r=e.getFullYear(),I=e.getDate(),d.removeClass("dp_selected"),l.addClass("dp_selected"),"days"==a&&l.hasClass("dp_not_in_month_selectable")&&t.show()),t.hide(),Q(e),t.settings.onSelect&&"function"==typeof t.settings.onSelect&&t.settings.onSelect(c,i+"-"+u(s+1,2)+"-"+u(o,2),e,n),n.focus()},b=function(){for(var t="",e=0;e<arguments.length;e++)t+=arguments[e]+"";return t},u=function(e,t){for(e+="";e.length<t;)e="0"+e;return e},i=function(e){return parseInt(e,10)},Q=function(n){t.settings.pair&&e.each(t.settings.pair,function(){var r=e(this);if(r.data&&r.data("Zebra_DatePicker")){var t=r.data("Zebra_DatePicker");t.update({reference_date:n,direction:0===t.settings.direction?1:t.settings.direction}),t.settings.always_visible&&t.show()}else r.data("zdp_reference_date",n)})},dt=function(c){var e,n,s,t,l,r,o,i,d,p=c.getFullYear(),u=c.getMonth()+1,a=c.getDate();return 3>u?(e=p-1,n=(e/4|0)-(e/100|0)+(e/400|0),s=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),t=n-s,l=0,r=a-1+31*(u-1)):(e=p,n=(e/4|0)-(e/100|0)+(e/400|0),s=((e-1)/4|0)-((e-1)/100|0)+((e-1)/400|0),t=n-s,l=t+1,r=a+((153*(u-3)+2)/5|0)+58+t),o=(e+n)%7,a=(r+o-l)%7,i=r+3-a,d=0>i?53-((o-t)/5|0):i>364+t?1:(i/7|0)+1},w={init:function(){this.name=this.searchString(this.dataBrowser)||"",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(t){for(var e=0;e<t.length;e++){var n=t[e].string,r=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,n){if(-1!=n.indexOf(t[e].subString))return t[e].identity}else if(r)return t[e].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Firefox",identity:"firefox"},{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};w.init(),rt()},e.fn.Zebra_DatePicker=function(t){return this.each(function(){void 0!==e(this).data("Zebra_DatePicker")&&e(this).data("Zebra_DatePicker").destroy();var n=new e.Zebra_DatePicker(this,t);e(this).data("Zebra_DatePicker",n)})}}(jQuery),define("calendar",["jquery"],function(e){return function(){var t;return t||e.jQuery.fn.Zebra_DatePicker}}(this)),define("models/String",["require"],function(){var e={};return e.camelize=function(e){return e.toLowerCase().replace(/-(.)/g,function(t,e){return e.toUpperCase()})},e}),define("views/View",["require","backbone","underscore","jquery","models/String","rsvp"],function(t){var s=t("backbone"),n=t("underscore"),i=t("jquery"),o=t("models/String"),r=t("rsvp"),l=function(e){e.prototype.$=function(e,t){e&&-1!==e.indexOf(":parent")&&(e=this.selector),t&&-1!==t.indexOf(":parent")&&(t=this.context);var n,r=new i.fn.init(e,t),s=this,a=["parent","parents","parentsUntil","closest","next","nextAll","nextUntil","prev","prevAll","prevUntil","siblings"],o=a.length,l=function(){return this};for(n=0;o>n;n++)r[a[n]]=l;return r.find=function(e){return s.$(this.selector+" "+e)},r},e.prototype.setElement=function(e,t){return this.$el&&this.undelegateEvents(),this.$el=this.$(e),this.el=this.$el[0],t!==!1&&this.delegateEvents(),this}},a=s.View,e=a.extend({id:"View"});return e.prototype.initialize=function(e){e=e||{},a.prototype.initialize.call(this,e),this.options||(this.options=e),this.storage=Sabre.app.storage("session"),this.views={},this.showed=!1},e.prototype.getComponentsViews=function(){return[]},e.prototype.render=function(){return this.rendered=!0,this.children=this.getComponentsViews(),this.draw()},e.prototype.mapControls=function(){this.controls||(this.controls={}),n.forEach(this.$el.find("[id]"),function(t){var e=i(t);e.attr("name")||e.attr("name",e.attr("id")),this.controls[o.camelize(e.attr("id").replace(this.id+"-",""))]=e},this)},e.prototype.draw=function(e,t){var a=this;return r.all(this.children).then(function(i){return r.all(n.map(i,function(e){return a.views[e.componentCode+(e.state?"_"+e.state:"")]=e,e.render()})).then(e).catch(t)})},e.prototype.getComponentView=function(e){var a=this;return new r.Promise(function(l,r){if(void 0===e.componentCode||void 0===e.elementId)return r("Missing componentCode or elementId");var i=e.componentCode+(e.state?"_"+e.state:""),s=e.global?"views/controls/"+e.componentCode:"components/"+e.componentCode,o=[s+"/"+i];void 0!==e.noTemplate&&e.noTemplate||o.push("tpl!"+s+"/tpl/"+i+".tpl"),t(o,function(i,s){var t=n.extend({},e),r=Sabre.getComponent(e.componentCode);t.el="#"+t.elementId,t.config=r?r.config:null,t.model=r?r.model:null,t.template=s,t.app=Sabre.app,t.router=Sabre.router,t.socket=Sabre.socket,t.components=Sabre.router.ComponentsCollection,t.params=a.options.params,t.parent=a;var o=new i(t);l(o)},r)})},e.prototype.getCustomComponentView=function(e){return new r.Promise(function(i,s){var r=e.componentCode+"_"+e.state,a="components/custom/"+e.componentCode,o=[a+"/"+r,"tpl!"+a+"/tpl/"+r+".tpl"];t(o,function(r,a){var t=n.extend({},e);t.el="#"+t.elementId,t.template=a,l(r);var s=new r(t);i(s)},s)})},e.prototype.getNextPageData=function(){return!0},e.prototype.serialize=function(e){return this.$el.toJSON(e)},e.prototype.find=function(e){return this.$el.find(e)},e.prototype.getId=function(e){return e?this.id+"-"+e:this.id},e.prototype.toId=function(e){return"#"+this.getId(e)},e.prototype.toClass=function(e){return"."+this.getId(e)},e.prototype.isRendered=function(){return this.rendered||!1},e.prototype.remove=function(){var e;for(e in this.views)this.views.hasOwnProperty(e)&&this.views[e].remove();a.prototype.remove.apply(this,arguments)},e.prototype.show=function(){this.showed=!0,this.$el.show()},e.prototype.hide=function(){this.$el.hide()},e}),define("tpl!components/APPLICATION/tpl/rbe-selector.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<label class="rbe-label" data-translate="label.fsc.tab.rbe"></label><div id="',id,'-options" class="radio clearfix options">    '),_.forEach(data,function(e){__p.push('    <div class="option"><input class="',id,'-option" type="radio" name="rbe-option" value="',e.id,'" id="',id,"-type-",e.id,'" />        <label for="',id,"-type-",e.id,'" class="',id,'-option-label" data-translate="',e.label,'"></label>    </div>    ')}),__p.push("</div>");return __p.join("")}}),define("models/BookingPathType",["require","./Model"],function(t){var n=t("./Model"),e=n.extend();return e.REDEMPTION="RBE",e.REVENUE="B2C",e}),define("components/APPLICATION/rbe-selector",["require","views/View","tpl!./tpl/rbe-selector.tpl","models/BookingPathType","rsvp"],function(t){var n=t("views/View"),r=t("tpl!./tpl/rbe-selector.tpl"),a=t("models/BookingPathType"),i=t("rsvp"),e=n.extend({id:"rbe-selector"});return e.prototype.render=function(){this.$el.html(r({id:this.id,data:this.collection.toJSON()})),this.$el.translate();var e={};e["change ."+this.id+"-option"]="onOptionChange",this.delegateEvents(e)},e.prototype.val=function(e){var t=this;return void 0===e?this.find(this.toClass("option")+":checked").val():void this.collection.forEach(function(n){t.find(t.toId("type-"+n.id)).prop("checked",n.id===e)})},e.prototype.onOptionChange=function(e){e.stopPropagation(),this.trigger("change")},e.prototype.request=function(e){var t=this,n={transferObjects:[{componentType:"fsc",queryData:_.extend({componentId:"fsc_1",componentType:"fsc",actionCode:"loadFscPartial",rbeTabSelected:t.val()===a.REDEMPTION?"true":"false"},e)}]};return new i.Promise(function(e){Sabre.router.ajax(n,function(t){e(t)})})},e}),define("components/APPLICATION/loadingprototype",["jquery","backbone"],function(a,m){var n,r,o,l,t,e,s,u,c=function(t,n,e){return e=e/360*Math.PI*2,[t*Math.cos(e),n*Math.sin(e)]},p=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),d=function(e){if(void 0!==e){var t=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||window.clearTimeout;t(e)}},f={linear:function(e){return e
},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return.5>e?2*e*e:-1+(4-2*e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return.5>e?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return.5>e?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return.5>e?16*e*e*e*e*e:1+16*--e*e*e*e*e}},i={},v=function(){r=0,o=!1,l=!1,t.clearRect(0,0,e[0],e[1])};Object.defineProperty(i,"role",{get:function(){return this._role},set:function(e){this._role=e,v()}});var h,g=function(){h();var C=a("<div>").addClass("custom-loading-screen"),g=a("<div>").addClass("zone");a("body").append(C.append(g)),g.height(g.width());var v=a("<canvas>").appendTo(g),d=new Image,m={rotate_plus_points:"rotate_plus_points",rotate:"rotate",draw_circle:"draw_circle","static":"static"};e=[g.width(),g.height()],t=v[0].getContext("2d"),v.get(0).width=e[0],v.get(0).height=e[1],t.webkitImageSmoothingEnabled=!1,d.src=s+n[0][0],t.fillStyle="rgba(0, 0, 200, 0.1)";var w=22,A=function(r,a){t.beginPath();var n=0===r?3*Math.PI/4:-Math.PI/4;return n+=f.easeInOutCubic(a/360)*Math.PI*2,n-=w/180*Math.PI,t.arc(e[0]/2,e[1]/2,e[0]/2,n,n+Math.PI,!1),t.clip(),n},b=function(){this.src=s+"generic.png"};i.role=m.static;var y=0,_=function(){n[y++][2]=this,y<n.length&&(d=new Image,d.src=s+n[y][0],d.addEventListener("load",_),d.addEventListener("error",b)),2===y&&p(function a(){u=p(a);var a,s,d,h,g,v;if(i.role===m.rotate||i.role===m.rotate_plus_points||!l)for(l=!0,a=0;a<n.length;a++)t.save(),s=A(a,r),d=[n[a][2].width,n[a][2].height],h=Math.min(d[0]/e[0],d[1]/e[1]),t.drawImage(n[a][2],(d[0]-e[0]*h)/2,(d[1]-e[1]*h)/2,e[0]*h,e[1]*h,0,0,e[0],e[1]),t.restore(),1===a&&(t.beginPath(),s=s/Math.PI*180,g=c(e[0]/2,e[1]/2,s),v=c(e[0]/2,e[1]/2,s+180),t.moveTo(e[0]/2+g[0],e[1]/2+g[1]),t.lineTo(e[0]/2+v[0],e[1]/2+v[1]),t.strokeStyle="white",t.lineWidth=2,t.stroke());if(t.save(),t.fillStyle="white",t.font="20px Arial",t.textAlign="center",t.shadowColor="gray",t.shadowBlur=2,t.fillText("AUH",e[0]/2-e[0]/5,e[1]/2-e[1]/4+20),t.fillText("BKK",e[0]/2+e[0]/5,e[1]/2+e[1]/4),t.restore(),r=(r+1)%360,i.role===m.draw_circle){t.save();var b=10;t.strokeStyle="white",t.lineWidth=b,t.shadowColor="white",t.shadowBlur=1,t.beginPath(),t.arc(e[0]/2,e[1]/2,e[0]/2-b/2-1,-Math.PI/2,o?1.5*Math.PI:-Math.PI/2+5*Math.PI*r/360,!1),t.stroke(),t.restore(),360===r&&(o=!0)}if(i.role===m.rotate_plus_points){var y;for(a=0;r>a;a+=10)t.beginPath(),t.fillStyle="white",y=c(e[0]/2*.9,e[1]/2*.8,a-90),t.arc(e[0]/2+y[0],e[1]/2+y[1],7*f.easeInCubic(a/r),0,2*Math.PI,!1),t.fill()}},v)};d=new Image,d.src=s+n[0][0],d.addEventListener("load",_),d.addEventListener("error",b)};return h=function(){a("body").find(".custom-loading-screen").remove(),a(window).off("resize",g),d(u)},m.View.extend({initialize:function(e){this.options=e,s=e.path||"",n=[[e.from.toLowerCase()+".png",e.from.toUpperCase()],[e.to.toLowerCase()+".png",e.to.toUpperCase()]],g()},events:{"resize window":"launchLoader"},render:function(){return this},remove:function(){a("body").find(".custom-loading-screen").remove(),d(u)},clear:function(){this.remove()},config:i})}),define("text!components/APPLICATION/tpl/_helpers.tpl",[],function(){return'<section data-helper="_date">\r\n    <% if (enabled) { %>\r\n        <div class="row-fluid">\r\n        <% _.each(fields, function(field) { %>\r\n            <div class="span<%= 12/fields.length%>">\r\n                <select name="<%= name + \'.\' + field %>" data-group-validation="<%= name%>" <% if (validation !== \'\') { %> data-validation="<%= validation + \'.\' + field %>" <% } %>>\r\n                    <option value="" data-translate="dateBox.<%= field %>.empty"></option>\r\n                    <% var options = (field === \'day\' ? optionsDay : ( field === \'month\' ? optionsMonth : optionsYear ) ) %>\r\n                    <% var keys = _.keys(options).sort() %>\r\n                    <% keys.shift(); %>\r\n                    <% if(field === \'year\' && typeof min !== \'undefined\' && typeof max !== \'undefined\') { %>\r\n                        <% keys = window.Sabre.selectOptions.getNumericValue(parseInt(min, 10), parseInt(max, 10)).reverse() %>\r\n                    <% } else { %>\r\n                        <% if (keys.length === 0) { %>\r\n                            <% var partialName = (field === \'day\' ? partialNameForDayOptions : ( field === \'month\' ? partialNameForMonthOptions : partialNameForYearOptions ) ) %>\r\n                            <% var keys = window.Sabre.selectOptions[partialName] %>\r\n                        <% } %>\r\n                    <% } %>\r\n                    <% _.each(keys, function(key) { %>\r\n                        <option value="<%= key %>"<% if (field === \'month\') { %> data-translate="dateBox.month.<%= key %>"<% } %>><%= options[key] || key %></option>\r\n                    <% }); %>\r\n                </select>\r\n            </div>\r\n        <% }); %>\r\n        </div>\r\n        <input type="hidden" name="<%= name %>.hidden" />\r\n        <div class="group-validation" data-group-validation="<%= name%>"></div>\r\n    <% } %>\r\n</section>\r\n\r\n<section data-helper="_input">\r\n    <% if (enabled && !hidden) { %>\r\n        <% if( type === \'date\'){ %>\r\n            <div class="date-input-container">\r\n        <% } %>\r\n        <input\r\n            type="<%= type %>"\r\n            name="<%= name %>"\r\n            <% if (defaultValue !== \'\') { %> <% if (type == \'date\') { %> value="<%= defaultValue.year %>-<%= defaultValue.month %>-<%= defaultValue.day %>" <% } else { %> value="<%= defaultValue %>" <% } %> <% } %>\r\n            <% if (translate !== \'\') { %> data-translate="<%= translate + (status ? \'|label.psng.\' + status.toLowerCase() : \'\') %>" <% } %>\r\n            <% if (id !== \'\') { %> id="<%= id %>" <% } %>\r\n            <% if (cssClass !== \'\') { %> class="<%= cssClass %>" <% } %>\r\n            <% if (validation !== \'\') { %> data-validation="<%= validation %>" <% } %>\r\n            <% if (groupValidation != \'\') { %> data-group-validation="<%= groupValidation %>" <% } %>\r\n            <% if (max != \'\') { %> max="<%= max %>" <% } %>\r\n            <% if (min != \'\') { %> min="<%= min %>" <% } %>\r\n            <% if (autocomplete != \'\') { %> autocomplete="<%= autocomplete %>" <% } %>\r\n        />\r\n\r\n        <% if(type == \'date\'){ %>\r\n            <input type="hidden"\r\n                   name="<%= name %>.year"\r\n                   class="year date-input"\r\n                   value="<% if(defaultValue){ %><%= defaultValue.year %><% } %>"\r\n                   <% if (validation !== \'\') { %> data-validation="<%= validation %>.year" <% } %>\r\n                   <% if (groupValidation != \'\') { %> data-group-validation="<%= groupValidation %>" <% } %> />\r\n            <input type="hidden"\r\n                   name="<%= name %>.month"\r\n                   class="month date-input"\r\n                   value="<% if(defaultValue){ %><%= defaultValue.month %><% } %>"\r\n                   <% if (validation !== \'\') { %> data-validation="<%= validation %>.month" <% } %>\r\n                   <% if (groupValidation != \'\') { %> data-group-validation="<%= groupValidation %>" <% } %> />\r\n            <input type="hidden"\r\n                   name="<%= name %>.day"\r\n                   class="day date-input"\r\n                   value="<% if(defaultValue){ %><%= defaultValue.day %><% } %>"\r\n                   <% if (validation !== \'\') { %> data-validation="<%= validation %>.day" <% } %>\r\n                   <% if (groupValidation != \'\') { %> data-group-validation="<%= groupValidation %>" <% } %> />\r\n            <input type="hidden" name="<%= name %>.hidden" <% if (groupValidation != \'\') { %> data-group-validation="<%= groupValidation %>" <% } %> />\r\n\r\n        <% } %>\r\n\r\n        <% if( type === \'date\'){ %>\r\n            </div>\r\n            <div class="group-validation" data-group-validation="<%= name%>"></div>\r\n        <% } %>\r\n\r\n    <% } %>\r\n</section>\r\n\r\n<section data-helper="_textarea">\r\n    <% if (enabled) { %>\r\n        <textarea\r\n            name="<%=name%>"\r\n            <% if (translate !== \'\') { %> data-translate="<%= translate %>" <% } %>></textarea>\r\n    <% } %>\r\n</section>\r\n\r\n<section data-helper="_select">\r\n    <% if (enabled) { %>\r\n        <select name="<%= name %>" <% if (id !== \'\') { %> id="<%= id %>" <% } %> <% if (cssClass !== \'\') { %> class="<%= cssClass %>" <% } %> <% if (validation !== \'\') { %> data-validation="<%= validation %>" <% } %>>\r\n            <% if (placeholder !== \'\') { %>\r\n                <option value="" selected="selected" data-translate="<%= placeholder + (status ? \'|label.psng.\' + status.toLowerCase() : \'\') %>"></option>\r\n            <% } %>\r\n            <% var options = options || window.Sabre.selectOptions[partialNameForOptions] %>\r\n            <% var index = 0; %>\r\n            <% _.each(options, function(option, key) { %>\r\n                <% if(index == 0) { %>\r\n                    <% if(key) { %>\r\n                        <option value="<%= key %>" data-translate="<%= translate %><% if(key != \' \') { %><%= key %><% } %>"<% if (defaultValue === key) { %> selected="selected" <% } %>></option>\r\n                    <% } else if (placeholder == \'\') { %>\r\n                        <option value="" data-translate="<%= translate + (status ? \'|label.psng.\' + status.toLowerCase() : \'\') %>" selected="selected"></option>\r\n                    <% } %>\r\n                    <% index++; %>\r\n                <% } else { %>\r\n                    <option value="<%= key %>" data-translate="<%= translate %><% if(key != \' \') { %><%= key %><% } %>"<% if (defaultValue === key) { %> selected="selected" <% } %>></option>\r\n                <% } %>\r\n            <% }); %>\r\n        </select>\r\n    <% } %>\r\n</section>\r\n\r\n<section data-helper="_radio">\r\n    <% if (enabled) { %>\r\n        <div class="radio clearfix">\r\n            <% var index = 1; %>\r\n            <% _.each(options, function(option, key) { %>\r\n                <div>\r\n                    <input type="radio" name="<%= name %>" value="<%= key %>" id="<%= id + key%>" <% if (cssClass !== \'\') { %> class="<%= cssClass %>" <% } %> <% if (validation !== \'\') { %> data-validation="<%= validation %>" <% } %> <% if (defaultValue === key || index == 1) { %> checked <% } %>/>\r\n                    <label for="<%= id + key%>" class="gradient-info" data-translate="<%= translate + key%>"></label>\r\n                </div>\r\n                <% index++; %>\r\n            <% }); %>\r\n        </div>\r\n    <% } %>\r\n</section>\r\n\r\n<section data-helper="_legend">\r\n    <% if (enabled) { %>\r\n        <legend\r\n            <% if (translate !== \'\') { %> data-translate="<%= translate %>" <% } %>\r\n            <% if (id !== \'\') { %> id="<%= id %>" <% } %>\r\n            <% if (cssClass !== \'\') { %> class="<%= cssClass %>" <% } %>\r\n        ></legend>\r\n        <span class="status" data-translate="<%= \'label.psng.\' + status.toLowerCase() %>"></span>\r\n        <div class="clearfix"></div>\r\n    <% } %>\r\n</section>'}),define("components/APPLICATION/helpers",["jquery","text!components/APPLICATION/tpl/_helpers.tpl"],function(i,n){for(var r={},s={_input:{enabled:!0,hidden:!1,type:"text",cssClass:"",id:"",translate:"",defaultValue:"",validation:"",groupValidation:"",min:"",max:"",autocomplete:""},_date:{enabled:!0,validation:""},_select:{enabled:!0,defaultValue:"",placeholder:"",cssClass:"",id:"",validation:""},_radio:{enabled:!0,cssClass:"",id:"",validation:""},_legend:{enabled:!0,defaultValue:"",cssClass:"",id:"",validation:""},_textarea:{enabled:!0,defaultValue:"",cssClass:"",id:"",translate:"",validation:""}},a=/<section data-helper="([^"]+)">([\s\S]+?)<\/section>/gi,t=a.exec(n);null!==t;)r[t[1]]=t[2],t=a.exec(n);var e=function(t,e,a){e=_.extend({},s[t],e,a||{});var o=_.template(r[t],e),n=i("<div/>").html(o);return n.translate(),n.html()};return{input:function(t,n){return e("_input",t,n)},select:function(t,n){return e("_select",t,n)},date:function(t,n){return e("_date",t,n)},radio:function(t,n){return e("_radio",t,n)},legend:function(t,n){return e("_legend",t,n)},textarea:function(t,n){return e("_textarea",t,n)}}}),define("tpl!components/APPLICATION/tpl/fraudnet.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<textarea id="jscData" name="jscData" class="hidden"></textarea><input id="browserTimestamp" name="browserTimestamp" class="hidden"/>');return __p.join("")}}),define("tpl!components/APPLICATION/tpl/maintenance.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="maintenance"><h1>404 !</h1><h2>Page not found!</h2><p>Make sure that you enter a valid airline code.</p></div>');return __p.join("")}}),define("views/Component",["require","views/View","logger","rsvp"],function(t){var n=t("views/View"),r=t("logger"),a=t("rsvp"),e=n.extend();return e.prototype.initialize=function(e){n.prototype.initialize.call(this,e),this.Sabre=e.Sabre||Sabre||{},this.config=e.config,this.model=e.model,this.template=e.template,this.componentCode=e.componentCode,this.state=e.state,this.socket=e.socket,this.app=e.app,this.router=e.router,this.components=e.components,this.params=e.params},e.prototype.getData=function(){return{id:this.getId(),T:Sabre.translator}},e.prototype.render=function(){var t=this.componentCode+(this.state?"_"+this.state:"");r.time("Component::render("+t+")"),this.children=this.getComponentsViews();var e=this;return new a.Promise(function(n,a){return void 0!==e.template&&e.$el.html(e.template(e.getData())),0!==e.children.length?e.draw(n,a):(r.timeEnd("Component::render("+t+")"),void n())})},e.prototype.getComponent=function(e){return this.Sabre.router.ComponentsCollection.get(e)},e.prototype.serialize=function(){return{}},e.prototype.saveToStorage=function(e,t){var n=this;return e=e||this.componentCode,this.storage.set(e,JSON.stringify(t||this.serialize())),n},e.prototype.loadFromStorage=function(t){t=t||this.componentCode;var e=this.storage.get(t);if(!_.isUndefined(e)&&_.isString(e)&&e.length>0)try{return JSON.parse(e)}catch(n){}return void 0},e.prototype.clearStorage=function(e){e=e||this.componentCode,this.storage.set(e,void 0)},e}),define("tpl!components/scc/tpl/_currency.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<p class="pull-left" data-translate="label.lang.currencyHeader"></p>'),"AIR_SEARCH_PAGE"!==Sabre.router.currentPage&&__p.push('<p class="pull-left" data-translate="label.lang.currencySubheader"></p>'),__p.push('<select id="currency-selector">    '),_.each(currencies,function(e){__p.push('<option data-translate="currency.',e,'" '),e==defaultCurrency&&__p.push(" selected "),__p.push(' value="',e,'"></option>')}),__p.push("</select>");return __p.join("")}}),define("components/scc/scc_header",["jquery","views/Component","backbone","models/EventBus","models/Component","rsvp","tpl!./tpl/_currency.tpl"],function(n,r,a,e,t,i,s){return r.extend({events:{"click #btn-home":"btnHome","click #btn-settings":"btnSettings","click #currency":"selectCurrency"},initialize:function(t){r.prototype.initialize.call(this,t),this.listenTo(Sabre.eventBus,e.PAGE_LOADED,this.pageLoadHandler.bind(this)),this.listenTo(Sabre.eventBus,e.HIDE_DIALOGS,this.hideDialogs.bind(this)),this.listenTo(Sabre.eventBus,e.CURRENCY_UPDATED,this.currencyUpdate.bind(this))},getData:function(){var e=this.components.get(t.LANG),n=Sabre._config.sat.translationsConfiguration.availableLanguages||[];return{multiLang:n.length>1||void 0!==e&&"DISABLED"!==e.toJSON().data.config.status,currencySelectionEnabled:e?e.isEnabled():!1,defaultCurrency:e?e.getDefaultCurrency():""}},pageLoadHandler:function(){var e=this;this.bindVariables(),this.components.get(t.LANG)&&("AIR_SELECT_PAGE"===this.Sabre.router.currentPage&&this.components.get(t.LANG).isTooltipEnabled()&&this.$el.find("#help-tooltip").show(),setTimeout(function(){e.$el.find("#help-tooltip").addClass("hidden")},this.components.get(t.LANG).getTooltipTime()))},hideDialogs:function(e){e&&e.caller!==this&&(this.settingsComponent.hide(),this.settingsButton.removeClass("active"))},btnHome:function(e){if(e.preventDefault(),Sabre._config.sat.airlineHomePageUrl)window.location=Sabre._config.sat.airlineHomePageUrl;else{var t=Sabre.isTablet()&&mobileMainPage?mobileMainPage:"landing";a.history._updateHash(window.location,t)}},btnSettings:function(t){t.preventDefault(),Sabre.eventBus.trigger(e.HIDE_DIALOGS,{caller:this}),this.settingsComponent.toggle(),this.settingsButton.toggleClass("active")},bindVariables:function(){this.settingsButton=this.$el.find("#btn-settings"),this.settingsComponent=this.$el.find(".settings-component")},currencyUpdate:function(){var e=this;this.render().then(function(){e.bindVariables(),e.$el.translate()})},selectCurrencyValue:function(t){var e=Sabre.socket,n=new i.Promise(function(r){var n=Sabre.app.modal.$el.find("#currency-selector").val(),a={transferObjects:[{componentType:"lang",actionCode:"setSelectedCurrency",queryData:{componentId:"lang_1",componentType:"lang",actionCode:"setSelectedCurrency",queryData:null,selectedCurrency:n}}]};n===t?r(n):e.send({url:Sabre.router.baseUrl+"webqtrip.html",type:"POST",data:{_eventId_ajax:"",execution:Sabre.router.executionKey,ajaxSource:!0,contextObject:JSON.stringify(a)},headers:{JsonResponse:"JsonResponse"}}).then(function(t){if(0===t.content[0].messages.length){if("AIR_SELECT_PAGE"===Sabre.router.currentPage){var a={transferObjects:[{componentType:"flc",actionCode:"refreshSearch",queryData:{componentId:"flc_1",componentType:"flc",actionCode:"refreshSearch",queryData:null}}]};e.send({url:Sabre.router.baseUrl+"webqtrip.html",type:"POST",data:{_eventId_ajax:"",execution:Sabre.router.executionKey,ajaxSource:!0,contextObject:JSON.stringify(a)},headers:{JsonResponse:"JsonResponse"}}).then(function(t){Sabre.getComponent("flc").model=t.content[0].model;var a={transferObjects:[{componentType:"cart",actionCode:"clearSelection",queryData:{componentId:"cart_1",componentType:"cart",actionCode:"clearSelection",queryData:null}}]};e.send({url:Sabre.router.baseUrl+"webqtrip.html",type:"POST",data:{_eventId_ajax:"",execution:Sabre.router.executionKey,ajaxSource:!0,contextObject:JSON.stringify(a)},headers:{JsonResponse:"JsonResponse"}}).then(function(t){return Sabre.getComponent("cart").model=t.content[0].model,r(n),e.send()})})}else r(n);return e.send()}Sabre.app.modal.simple("flow.message."+t.content[0].messages[0].id+".message","flow.message."+t.content[0].messages[0].id+".title"),Sabre.app.loading(!1)})});return n},selectCurrency:function(i){i.preventDefault();var r=this,a=this.components.get(t.LANG).getDefaultCurrency(),o=Sabre.settings.getCurrencies();Sabre.app.modal.show(s({currencies:o,defaultCurrency:a}),{title:"label.lang.currencySelection",buttons:[{name:"label.fsc.overlay.cancel","class":"btn-secondary pull-left span6",handler:function(){Sabre.app.modal.close(),n("#overlay").removeClass("currency-overlay")}},{name:"label.psng.Save","class":"btn-primary pull-right span6",handler:function(){Sabre.app.loading(!0),r.selectCurrencyValue(a).then(function(t){r.components.get("lang").setDefaultCurrency(t),Sabre.eventBus.trigger(e.CURRENCY_UPDATED),Sabre.app.modal.close(),Sabre.app.loading(!1),n("#overlay").removeClass("currency-overlay")})}}],"class":"languages"}),n("#overlay").addClass("currency-overlay")}})}),define("tpl!components/scc/tpl/scc_header.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<h1 id="logo"></h1><a href="#" id="btn-home" class="header-btn">    <i class="fa fa-home"></i></a>'),(multiLang||currencySelectionEnabled)&&__p.push('<a href="#" id="btn-settings" class="header-btn">    <i class="fa fa-cog"></i></a>'),__p.push('<div class="settings-component">    <nav>        <ul>            '),multiLang&&__p.push('            <li class="option">                <a href="#" id="language"><i class="fa fa-chevron-right"></i> <span data-translate="label.lang.language"></span></a>            </li>            '),__p.push("            "),currencySelectionEnabled&&__p.push('            <li class="option">                <a href="#" id="currency"><i class="fa fa-chevron-right"></i> <span data-translate="label.lang.currency"></span> : <span data-translate="currency.',defaultCurrency,'"></span></a>            </li>            '),__p.push('        </ul>    </nav></div><div id="help-tooltip">    <div class="information" data-translate="label.lang.currencyTooltip"></div></div>');return __p.join("")}}),define("components/scc/scc_footer",["views/Component"],function(e){return e.extend({})}),define("tpl!components/scc/tpl/scc_footer.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<ul class="clearfix">    <li class="" data-translate="label.scc.contact"></li>    <li class="" data-translate="label.scc.coc"></li></ul>');return __p.join("")}}),define("components/login/login_header",["views/Component","backbone","jquery","models/EventBus","models/Component","models/Number"],function(n,i,e,t,r,a){return n.extend({id:"login-header",events:{"click #sign-in":"btnSignIn","click #logout-btn":"logOut"},initialize:function(e){n.prototype.initialize.call(this,e),this.listenTo(Sabre.eventBus,t.PAGE_LOADED,this.pageLoadHandler.bind(this)),this.listenTo(Sabre.eventBus,t.HIDE_DIALOGS,this.hideDialogs.bind(this)),this.listenTo(Sabre.eventBus,t.SHOW_LOGIN_FORM,this.btnSignIn.bind(this))},isUpcomingTripsEnabled:function(){var e=Sabre.router.ComponentsCollection.get(r.LOGIN);if(e.isLoggedIn()){var t=e.getUpcomingTripSettings();return t&&t.enabled}return!1},getComponentsViews:function(){var e=[this.getComponentView({elementId:"login-form",componentCode:"login",state:"form"})];return this.isUpcomingTripsEnabled()&&e.push(this.getComponentView({elementId:this.getId("upcoming-trips"),componentCode:"upcoming_trips",global:!0})),e},getData:function(){var e=Sabre.router.ComponentsCollection.get(r.LOGIN),t=e?e.getUser():{},n={id:this.id,isLoggedIn:e.isLoggedIn(),user:t?t.toJSON():{},config:this.config,isLoyaltyEnabled:e.isLoggedIn()&&t.get("frequentFlyerProfile")===!0};return n.isLoyaltyEnabled&&(n.loyaltyBalance=a.formatPositiveInteger(t.getLoyaltyBalance())+" "+Sabre.translator.translate(Sabre._config.sat.frequentFlyer.denomination)),n},pageLoadHandler:function(){this.bindVariables(),this.mapControls()},hideDialogs:function(e){e&&e.caller!==this&&(this.loggedInDialog.hide(),this.loginDialog.hide(),this.signInButton.removeClass("active"))},btnSignIn:function(e){if(e&&e.preventDefault(),Sabre.eventBus.trigger(t.HIDE_DIALOGS,{caller:this}),this.signInButton.hasClass("logged"))this.loggedInDialog.toggle(),this.isUpcomingTripsEnabled()&&this.views.upcoming_trips.show();else{var n=Sabre.app.storage("local").get("rememberMeUsername");n&&(this.$el.find("input[name=username]").val(n),this.$el.find("#login_form-remember-me").attr("checked",!0)),this.loginDialog.toggle()}this.signInButton.toggleClass("active")},logOut:function(e){e.preventDefault();var t=this;Sabre.app.loading(!0),Sabre.router.ajax({transferObjects:[{componentType:"login",actionCode:"logout",queryData:{componentId:"login_1",componentType:"login",actionCode:"logout",requestPartials:[]}}]},function(){"CONFIRMATION_PAGE"===Sabre.router.currentPage?t.handleLogOutOnConfirmationPage():location.reload()})},handleLogOutOnConfirmationPage:function(){var n={loggedIn:!1};Sabre.getComponent("login").model=n;var t=e("#sign-in");t.click(),t.removeClass("logged"),t.find(".l3").translate(),e(".login-component .loginForm").removeClass("hidden"),e(".login-component .l3").removeClass("hidden"),e(".login-component .l2").html(""),e(".login-component input").val(""),Sabre.app.loading(!1)},bindVariables:function(){this.signInButton=this.$el.find("#sign-in"),this.loginDialog=this.$el.find(".login-dialog"),this.loggedInDialog=this.$el.find(".logged-in")}})}),define("tpl!components/login/tpl/login_header.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="row-fluid">    <div class="span12 login-box">        <a href="#" id="sign-in" class="',isLoggedIn?"logged":"",'">            <span data-translate="label.login.welcome.empty" class="l1"></span>            <span class="l2">',isLoggedIn?user.firstName:"",'</span>            <span data-translate="label.login.login" class="l3 ',isLoggedIn?"hidden":"",'"></span>            <i class="fa fa-chevron-down"></i>        </a>        <div class="login-dialog" id="login-form"></div>        <div class="logged-in">            '),isLoyaltyEnabled&&(__p.push('            <div class="loyalty-info">                <p data-translate="TierLevel.',user.loyaltyTier,'"></p>                <div class="amount">                    '),user.loyaltyBalanceRetrievalError?__p.push('                    <span data-translate="label.login.loyaltyBalanceNotAvailable"></span>                    '):__p.push('                    <span data-translate="label.login.loyaltyBalance"></span> <span>',loyaltyBalance,"</span>                    "),__p.push("                </div>            </div>            ")),__p.push('            <button class="btn gradient-common" id="logout-btn" data-translate="label.login.logout"></button>            <div id="',id,'-upcoming-trips">            </div>        </div>    </div></div>');return __p.join("")}}),define("components/login/login_form",["views/Component","backbone","jquery","components/APPLICATION/helpers","models/EventBus"],function(n,a,e,i,r){var t=a.Model.extend({validation:{username:{required:!0},password:{required:!0}}});return n.extend({id:"login_form",events:{"submit .loginForm":"login"},initialize:function(e){n.prototype.initialize.call(this,e),this.updateValidation(),this.listenToOnce(Sabre.eventBus,r.PAGE_LOADED,this.onPageLoaded.bind(this))},onPageLoaded:function(){this.populate()},populate:function(){var e=Sabre.app.storage("local").get("rememberMeUsername");e&&(this.$el.find("input[name=username]").val(e),this.$el.find("#"+this.getId()+"-remember-me").attr("checked",!0))},getData:function(){return{id:this.id,h:i,loggedIn:this.model.loggedIn,config:this.config}},updateValidation:function(){_.extend(t.prototype.validation.username,this.config.validation.userName),_.extend(t.prototype.validation.password,this.config.validation.password)},login:function(r){r.preventDefault();var a=e(r.currentTarget).find("[type=submit]");if(!a.hasClass("busy")){var n=new t,i=this.$el.toJSON();i.element=this.$el.selector,n.set(i),n.validate(),this.$el.find("#"+this.getId()+"-remember-me").is(":checked")?Sabre.app.storage("local").set("rememberMeUsername",n.get("username")):Sabre.app.storage("local").set("rememberMeUsername",""),n.isValid()&&this.loginRequest(n.get("username"),n.get("password"),a)}},loginRequest:function(r,a,n){Sabre.app.loading(!0,n);var i={transferObjects:[{componentType:"login",actionCode:"login",queryData:{componentId:"login_1",componentType:"login",actionCode:"login",username:r,password:a}}]},t=this;Sabre.router.ajax(i,function(r){r=e.parseJSON(r),"FAILED"!==r.content[0].authenticationResult?"CONFIRMATION_PAGE"===Sabre.router.currentPage?t.handleLoginOnConfirmationPage(r,n):(t.options.callback&&t.options.callback(),location.reload()):(t.$el.find("input").addClass("error"),t.$el.find("input[type=password]").val(""),Sabre.app.loading(!1,n),Sabre.app.modal.simple("label.login.failedAuthentication","label.login.title","label.login.close"),t.clearAdditionalForms())},"landing")},handleLoginOnConfirmationPage:function(a,i){var n={loggedIn:!0};_.extend(n,a.content[0]),Sabre.getComponent("login").model=n;var t=e("#sign-in");t.click(),t.addClass("logged"),t.find(".l2").html(n.user.firstName),t.find(".l2").removeClass("hidden"),t.find(".l3").addClass("hidden"),e(".login-component input").val(""),Sabre.eventBus.trigger(r.USER_LOGGED_IN),Sabre.app.loading(!1,i)},clearAdditionalForms:function(){"MY_BOOKING_PAGE"===Sabre.router.currentPage&&e("#component-MY_BOOKING_PAGE .pnr-box").find("input").val("")}})}),define("tpl!components/login/tpl/login_form.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="element-container">    <form class="loginForm '),loggedIn&&__p.push("hidden"),__p.push('">        <fieldset>            ',h.input(config.username,{name:"username",translate:"label.login.username",autocomplete:"off"}),"            ",h.input(config.password,{type:"password",name:"password",translate:"label.login.password",autocomplete:"off"}),'            <div class="checkbox clearfix">                <label for="',id,'-remember-me" class="remember-me">                    <input class="remember-me" type="checkbox" id="',id,'-remember-me"/>                    <span data-translate="label.login.rememberMe"></span>                </label>            </div>            <button class="btn btn-primary" data-translate="label.login.login" id="login" type="submit"></button>        </fieldset>    </form></div>');return __p.join("")}}),define("components/landing/landing_navigation",["views/Component","models/EventBus"],function(e,t){return e.extend({initialize:function(n){e.prototype.initialize.call(this,n),this.listenTo(Sabre.eventBus,t.HIDE_NAVIGATION,this.hide.bind(this))},getComponentsViews:function(){return[this.getComponentView({elementId:"landing-menu",componentCode:"landing",state:"menu"})]}})}),define("tpl!components/landing/tpl/landing_navigation.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="landing-slogan">    <div class="cb">        <h1 data-translate="label.scc.landingSlogan"></h1>        <h2><i class="fa fa-chevron-right"></i> <span data-translate="label.scc.landingSloganSmall"></span></h2>    </div></div><nav class="tablet-navigation clearfix" id="landing-menu"></nav>');return __p.join("")}}),define("components/landing/landing_menu",["views/Component","models/EventBus"],function(e,t){return e.extend({events:{"click .myFavorites > a":"checkFavourites"},initialize:function(n){e.prototype.initialize.call(this,n),this.listenTo(Sabre.eventBus,t.PAGE_LOADED,this.pageLoadHandler.bind(this))},pageLoadHandler:function(){var e=window.location.hash;e=e.substring(0,e.indexOf("/"))||e,this.$el.find('a[href="'+e+'"]').addClass("active")},getData:function(){return{config:Sabre.getComponent("landing").config,favoritesEnabled:Sabre._config.sat.favoritesEnabled}},checkFavourites:function(e){Sabre.getComponent("login").model.loggedIn||(Sabre.app.modal.simple("flow.message.errorLogInFirst.message","flow.message.error.title"),e.preventDefault())}})}),define("tpl!components/landing/tpl/landing_menu.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push("<ul>    "),_.each(config.buttonsMap,function(e,t){__p.push("        "),("myFavorites"!==t||favoritesEnabled)&&__p.push('            <li class="',t,'">                <a href="',e.url,'">                    <i class="',e.cssClass,'"></i>                    <span data-translate="label.landing.button.',e.name,'"></span>                    <i class="fa fa-chevron-right bg-arrow"></i>                </a>            </li>        '),__p.push("    ")}),__p.push("</ul>");return __p.join("")}}),define("components/cart/cart",["views/Component","jquery","backbone","models/Price","models/EventBus","models/Component"],function(t,e,s,r,a,n){var i=function(n){var t=[];return e.each(n,function(n,e){t=t.concat(e.ancillaries)}),Sabre.app.getTotalPrice(t)};return t.extend({events:{"click .view-price-details":"togglePriceDetails","click .show-cart-details":"showCartDetails","click .show-payc-price-details":"togglePrices","click #toggle-original-flights":"toggleOriginalFlights"},initialize:function(e){t.prototype.initialize.call(this,e),this.listenTo(Sabre.eventBus,a.LOCK_FARE_APPLIED,this.reRender.bind(this))
},templateForReRender:null,togglePrices:function(t){t.preventDefault(),e(t.currentTarget).find("i").toggleClass("fa-angle-double-down").toggleClass("fa-angle-double-up"),this.$el.find(".c-price").slideToggle()},reRender:function(){var e=this;this.render().then(function(){e.$el.translate()})},getData:function(){var t=Sabre.getComponent("cart"),i=Sabre.getComponent("seats"),l=(Sabre.getComponent("flightsdetails")||{}).model||{},u=t.config.dateTimeFormat.split("-"),a={dateFormat:u[0],totalPriceLabel:this.options.partialExchange?"label.flc.TotalDue":"label.payc.TotalTripPrice",paxNamesFormat:t.config.paxNamesFormat,airportFormat:t.config.itineraryHeaderFormat,detailsAirportFormat:t.config.itineraryDetailsAirportFormat,seats:this.improveSeatsWithOriginalSeats(t.model),timeFormat:Sabre._config.sat.timeFormat,totalPrice:!1,seatsModel:i?i.model:null,bookingPassbookEnabled:t.config.bookingPassbookEnabled,exchangePassbookEnabled:t.config.exchangePassbookEnabled,costBreakdownExpanded:t.config.costBreakdownExpanded,amountDueEnabled:t.config.amountDueEnabled,amountDueAndTotalDiff:t.model.amountDueAndTotalDiff,amountDueOnHoldSelected:t.model.amountDueOnHoldSelected,Price:r,selectionFont:"<i class='fa fa-cog'></i>",isCurrencyEnabled:this.components.get(n.LANG)&&this.components.get(n.LANG).isEnabled()};if(_.isObject(this.options.totalPrice)&&(a.totalPrice=this.options.totalPrice),t.config.itinerarySectionEnabled&&(a.flights=t.model.itineraryParts,a.passbookQueries=l.passbookQueries),t.config.priceSummaryEnabled){var s,o=t.model.originalTripAncillariesPrices?t.model.originalTripAncillariesPrices.priceAlternatives:null;o&&(_.each(o,function(e){_.each(e.pricesPerCurrency,function(e){s=e.amount})}),_.each(t.model.total.priceAlternatives,function(e){_.each(e.pricesPerCurrency,function(e){var t=parseInt(e.amount,10);0>t&&(e.amount=Math.abs(parseInt(s,10)-t))})})),a.prices={total:t.model.total,totalDue:t.model.duePrices?t.model.duePrices.priceAlternatives:null,amountDue:t.model.amountDuePrices},a.totalType=t.model.totalType,this.bookingPrices(t,a),null!==t.model.cartRefundModel&&null!==a.prices.fare&&this.exchangePrices(t,a)}return t.config.paxSectionEnabled&&0!==t.model.passengersList.length&&(a.passengers=t.model.passengersList),t.model.originalItineraryParts&&0!==t.model.originalItineraryParts.length&&!Sabre.router.isMTO()&&(a.originalFlights=t.model.originalItineraryParts),this.options.totalPriceLabel&&(a.totalPriceLabel=this.options.totalPriceLabel),a.psngCount=t.model.passengersList.length,Sabre.router.isMTO()&&a.flights&&e.each(a.flights,function(e,n){n.totalSegments=t.model.originalItineraryParts[e].segments.length}),a},improveSeatsWithOriginalSeats:function(e){var a,i,t,n=e.selectedSeats,s=e.originalSelectedSeats;if(null===n&&(n=[]),Sabre.router.isMTO())if("ANCILLARIES_MTO_CONFIRMATION_PAGE"===Sabre.router.currentPage){var r=Sabre.app.storage().get("mtoSeats",null);if(null!==r&&""!==r&&(r=JSON.parse(r),_.isObject(r)))return r}else Sabre.app.storage().set("mtoSeats",JSON.stringify(n));if(null===s||0===s.length||null===e.retainedPart||0===e.retainedPart.length)return n;for(t=0,i=e.originalItineraryParts.length;i>t;t++)if(e.retainedPart[0].arrivalCode===e.originalItineraryParts[t].destinationCode&&e.retainedPart[0].departureCode===e.originalItineraryParts[t].originCode){a=t;break}var o=1===a?e.originalItineraryParts[0].segments.length:0,l=1===a&&e.itineraryParts[0].segments?e.itineraryParts[0].segments.length:0;for(t=o,i=e.originalItineraryParts[a].segments.length+o;i>t;t++)s[t]&&(n[l++]=s[t]);return n},bookingPrices:function(t,r){if(t.config.fareEnabled&&(r.prices.fare=t.model.fareBreakdownByPassengerType),t.config.taxesEnabled){r.prices.taxes=t.model.taxPrices;var s,n,l,o,u,c,a,i,f=null!==t.model.singleTaxes?t.model.singleTaxes:{},h=[],m=0,d=0,g=0,p=Object.keys(f);r.prices.fare&&e.each(r.prices.fare,function(t,e){g+=e.number});var v=function(i,e){if(a={},l=[],a.psngCount=e.number,a.psngType=e.number>1?"label.cart.passengerType."+i+".plural":"label.cart.passengerType."+i+".singular",n[0].group)n[0].prices.priceAlternatives[0].pricesPerCurrency[t.model.currencyCode].amount=u/g*e.number,l.push(n[0]);else{var r;for(r=0;r<e.number;r++)l.push(n[d]),o.push(n[d]),d++}a.totalprice=Sabre.app.getTotalPrice(l),c.push(a)};for(i=0;i<p.length;i++)s={},o=[],c=[],s.code=p[i],n=f[p[i]],n[0].group&&(u=parseInt(n[0].prices.priceAlternatives[0].pricesPerCurrency[t.model.currencyCode].amount,10)),e.each(r.prices.fare,v),n[0].group&&(n[0].prices.priceAlternatives[0].pricesPerCurrency[t.model.currencyCode].amount=u,o.push(n[0])),s.psnglist=c,s.total=Sabre.app.getTotalPrice(o),h[m++]=s;r.prices.singletaxes=h}t.config.seatsEnabled&&t.model.seatPrices.length>0&&(r.prices.seats=t.model.seatPrices),t.config.ancillariesEnabled&&t.model.ancillaries.length>0&&(r.prices.ancillaries=t.model.ancillariesBreakdowns),t.config.discountEnabled&&t.model.shouldRenderDiscountPrice&&null!==t.model.discountPrices&&t.model.discountPrices.priceAlternatives.length>0&&(r.prices.discount=t.model.discountPrices)},exchangePrices:function(e,t){if(t.prices.previous={},t.prices.new={},e.config.fareEnabled&&e.model.newBookingModel&&(t.prices.previous.fare=e.model.cartRefundModel.faresTaxes,t.prices.new.fare=e.model.newBookingModel.faresTaxesCredit),delete t.prices.total,t.prices.previous.total=e.model.cartRefundModel.originalBookingTotal?e.model.cartRefundModel.originalBookingTotal.priceAlternatives:0,t.prices.previous.itemsPrices=i,e.model.cartRefundModel.refundableItems&&0!==e.model.cartRefundModel.refundableItems.length&&(t.prices.previous.refundable=e.model.cartRefundModel.refundableItems),e.model.cartRefundModel.nonRefundableItems&&0!==e.model.cartRefundModel.nonRefundableItems.length&&(t.prices.previous.nonRefundable=e.model.cartRefundModel.nonRefundableItems),e.model.cartRefundModel.retainedItems&&0!==e.model.cartRefundModel.retainedItems.length&&(t.prices.previous.retained=e.model.cartRefundModel.retainedItems),e.model.cartRefundModel.retainIfAvailableItems&&0!==e.model.cartRefundModel.retainIfAvailableItems.length&&(t.prices.previous.retainIfAvailable=e.model.cartRefundModel.retainIfAvailableItems),e.model.changeFeeBreakdown){t.prices.new.changeFee=e.model.changeFeeBreakdown;var n=[{prices:e.model.changeFeeBreakdown.changeFeePrice}].concat(e.model.changeFeeBreakdown.taxPrices);n.length>0&&n[0].prices.priceAlternatives&&n[0].prices.priceAlternatives.length>0&&(t.prices.new.changeFeeTotal=n)}e.config.seatsEnabled&&e.model.newBookingModel&&e.model.newBookingModel.seats&&(t.prices.new.seatsPrices=e.model.newBookingModel.seatsPrices,t.prices.new.seats=e.model.newBookingModel.seats),e.config.ancillariesEnabled&&e.model.newBookingModel&&e.model.newBookingModel.ancillaries&&(t.prices.new.ancillariesPrices=e.model.newBookingModel.ancillariesPrices,t.prices.new.ancillaries=e.model.newBookingModel.ancillaries)},applyOptions:function(){e.each(this.options.expand,function(t,n){n&&e("#cart-"+t+" h2").click()})},togglePriceDetails:function(t){t.preventDefault();var n=e(t.currentTarget);n.find(".t-toggle").toggleClass("hidden"),n.parent().find(".price-breakdown").slideToggle()},showCartDetails:function(n){var t=e(n.currentTarget);this.$el.find(".cart-component > .content").slideToggle(),t.toggleClass("active"),t.find(".lng").toggleClass("hidden")},toggleOriginalFlights:function(t){e(t.currentTarget).toggleClass("active"),this.$el.find("#cart-original-flights").stop(!0).slideToggle()},getPsngSplit:function(i,s){var t,n,r,a=[];return e.each(i,function(i,e){for(t={},t.psngCount=e.number,t.psngType=e.number>1?"label.cart.passengerType."+i+".plural":"label.cart.passengerType."+i+".singular",n=[],r=0;r<e.number;r++)n.push(s);t.totalprice=Sabre.app.getTotalPrice(n),a.push(t)}),a}})}),define("components/cart/cart_header",["components/cart/cart","models/EventBus"],function(e,t){return e.extend({initialize:function(n){e.prototype.initialize.call(this,n),this.listenTo(Sabre.eventBus,t.SEATS_SELECTED,this.reRender.bind(this)),this.listenTo(Sabre.eventBus,t.ANCILLARIES_SAVED,this.reRender.bind(this))}})}),define("tpl!components/cart/tpl/cart_header.tpl",function(){return function(obj){var __p=[];with(obj||{}){if(__p.push('<div class="cart_withHeader"><div class="info-bar element-container">    <img src="',Sabre.getPath(),'images/landing_bg_mobile.jpg" alt="" id="route-image">    <div class="cart-info box-info">        <div class="element-container '),(amountDueOnHoldSelected||amountDueAndTotalDiff)&&amountDueEnabled&&__p.push(" on-hold-container "),__p.push('">            <div class="text-left clearfix">                <strong class="f-title">',flights[0].departureCode,'</strong>                <i class="fa fa-angle-double-right route-icon"></i>                <strong class="f-title">',flights[0].arrivalCode,'</strong>            </div>            <div class="date">                <span data-translate="',flights[0].departureDate,'" data-date-format="',dateFormat,'"></span>                '),flights.length>1&&__p.push('                <span data-translate="label.fsc.to"></span>                <span data-translate="',flights[1].departureDate,'" data-date-format="',dateFormat,'"></span>                '),__p.push('            </div>            <div class="info">                <p>                    '),1==psngCount?__p.push('                    1 <span data-translate="label.flc.passenger"></span>,                    '):__p.push("                    ",psngCount,' <span data-translate="label.flc.passengers"></span>,                    '),__p.push("                    "),__p.push(flights.length>1?'                    <span data-translate="label.fsc.tripType.roundTrip"></span>                    ':'                    <span data-translate="label.fsc.tripType.oneWay"></span>                    '),__p.push('                </p>            </div>            <div class="trip-price">                '),(amountDueOnHoldSelected||amountDueAndTotalDiff)&&amountDueEnabled?__p.push('                    <div class="header-fare-lock">                        <strong data-translate="label.cart.fareLockCost"></strong>                        <div class="price">',Price.format(prices.amountDue.priceAlternatives)?Price.format(prices.amountDue.priceAlternatives):"0.00",'</div>                    </div>                    <div class="header-amount-due">                        <strong data-translate="label.cart.amountStillDue"></strong>                        <div class="price">',Price.format(prices.total.priceAlternatives)?Price.format(prices.total.priceAlternatives):"0.00",'</div>                        <small class="remark" data-translate="label.flc.IncludetaxesAndFees"></small>                    </div>                '):(__p.push("                "),"total"===totalType?__p.push('                    <strong data-translate="',totalPriceLabel,'"></strong>                    <div class="price">',Price.format(prices.total.priceAlternatives)?Price.format(prices.total.priceAlternatives):"0.00",'</div>                    <small class="remark"  data-translate="label.flc.IncludetaxesAndFees"></small>                '):"totalRefund"===totalType?__p.push('                    <strong data-translate="label.cart.totalRefund"></strong>                    <div class="price">',Price.format(prices.totalDue),'</div>                    <small class="remark"  data-translate="label.flc.IncludeOrigTriptaxesAndFees"></small>                '):__p.push('                    <strong data-translate="label.flc.TotalDue"></strong>                    <div class="price">',Price.format(prices.totalDue),'</div>                    <small class="remark"  data-translate="label.flc.IncludeOrigTriptaxesAndFees"></small>                '),__p.push("                ")),__p.push('            </div>        </div>    </div></div><div class="cart-component"><div class="content clearfix"><ul class="tabs cart">'),"object"==typeof flights){__p.push('    <li id="cart-flights">        <div class="content">            '),"undefined"!=typeof originalFlights&&__p.push('                <h4 class="element-container" data-translate="label.cart.exchange.newItinerary"></h4>            '),__p.push("            ");var seatSegmentIndex=0,tempSegmentIndex=0;__p.push("            "),_.each(flights,function(e,n){__p.push("                "),0==n&&__p.push('                <h3 class="itinerary-title departure">                    <span data-translate="label.cart.flighttype.depart"></span>:                    <span class="date">',Sabre.app.formatDate(e.departureDate,dateFormat),"</span>                    (",e.departureCode," - ",e.arrivalCode,")                </h3>                "),__p.push("                "),1==n&&__p.push('                <h3 class="itinerary-title arrival">                    <span data-translate="label.cart.flighttype.return"></span>:                    <span class="date">',Sabre.app.formatDate(e.departureDate,dateFormat),"</span>                    (",e.departureCode," - ",e.arrivalCode,")                </h3>                "),__p.push("                "),"undefined"!=typeof passengers&&(__p.push('                    <ul class="element-container cart-psng clearfix">                        '),_.each(passengers,function(t,n){if(__p.push("                            <li>                                "),t.notDummy&&__p.push('                                    <strong class="name">',t.firstName?t.firstName.toLowerCase():""," ",t.lastName?t.lastName.toLowerCase():"","</strong>                                "),__p.push('                                <div class="seats">                                    <span data-translate="label.cart.priceSummary.seats"></span>:                                    <strong class="assignment">                                        '),"INF"===t.typeCode)__p.push('                                            <span class="infant" data-translate="label.cart.seats.infant"></span>                                        ');else{if(__p.push("                                            "),seats){if(__p.push("                                                "),tempSegmentIndex=seatSegmentIndex,__p.push("                                                "),e.segments)__p.push("                                                    "),_.each(e.segments,function(){__p.push("                                                        "),seats&&seats[seatSegmentIndex]&&seats[seatSegmentIndex][n]?__p.push("                                                            <span>",seats[seatSegmentIndex][n],"</span>                                                        "):__p.push('                                                            <span data-translate="label.cart.seats.unassigned"></span>                                                        '),__p.push("                                                        "),seatSegmentIndex++,__p.push("                                                    ")}),__p.push("                                                ");else{__p.push("                                                    ");for(var r=0;r<e.totalSegments;r++)__p.push("                                                        "),seats&&seats[seatSegmentIndex]&&seats[seatSegmentIndex][n]?__p.push("                                                            <span>",seats[seatSegmentIndex][n],"</span>                                                        "):__p.push('                                                            <span data-translate="label.cart.seats.unassigned"></span>                                                        '),__p.push("                                                        "),seatSegmentIndex++,__p.push("                                                    ");__p.push("                                                ")}__p.push("                                                "),seatSegmentIndex=tempSegmentIndex,__p.push("                                            ")}else __p.push("                                                <span>-</span>                                            ");__p.push("                                        ")}__p.push("                                    </strong>                                </div>                            </li>                        ")}),__p.push("                        "),e.segments?(__p.push("                          "),seatSegmentIndex+=e.segments.length,__p.push("                        ")):(__p.push("                            "),seatsModel&&seatsModel.itineraryParts[n]?(__p.push("                                "),seatSegmentIndex+=seatsModel.itineraryParts[n].segmentSeatMaps.length,__p.push("                            ")):(__p.push("                                "),seatSegmentIndex++,__p.push("                            ")),__p.push("                        ")),__p.push("                    </ul>                ")),__p.push("                ");var r=null;__p.push("                ");var t=0;__p.push("                "),_.each(e.segments,function(e,a){if(__p.push("                    "),t+=e.flightDuration,__p.push("                    "),0!=a){__p.push("                        ");var n=new Date(e.departureDate)-r;__p.push("                        "),t+=n,__p.push('                        <div class="layover">                            <span data-translate="label.cart.Layover"></span>                            <span data-translate="label.cart.durationFormat|',Math.floor(n/36e5),"|",Math.ceil(n%36e5/6e4),'"></span>                            <span data-translate="',e.departureCode,'" data-airport-format="',airportFormat,'"></span>                        </div>                    ')}__p.push("                    "),r=new Date(e.arrivalDate),__p.push('                    <div class="segment">                        <div class="s-segment">                            <div class="row-fluid s-header">                                <div class="span6">                                    <div class="element-container">                                        <span data-translate="',e.departureDate,'" data-date-format="',dateFormat,'"></span>                                    </div>                                </div>                                <div class="span6 text-right">                                    <div class="element-container">                                        <div>',e.airlineCodes[0]," ",e.flightNumber[0],"</div>                                        "),(e.operatingCarrier.length>0&&e.operatingCarrier[0]!=e.airlineCodes[0]||e.wetLeaseCarrier&&e.wetLeaseCarrier.length>0&&e.wetLeaseCarrier[0])&&(__p.push('                                            <span class="operated-by">                                                <span data-translate="label.cart.carrier"></span>                                                '),e.wetLeaseCarrier&&e.wetLeaseCarrier.length>0&&e.wetLeaseCarrier[0]?__p.push("                                                    <span>",e.wetLeaseCarrier[0],"</span>                                                "):__p.push('                                                    <span data-translate="airline.',e.operatingCarrier[0],'"></span>                                                '),__p.push("                                            </span>                                        ")),__p.push('                                    </div>                                </div>                            </div>                            <div class="s-destinations element-container">                                <div class="row-fluid">                                    <div class="span6">                                        <div class="s-title" data-translate="label.flc.depart"></div>                                    </div>                                    <div class="span6">                                        <div class="s-title" data-translate="label.flc.arrive"></div>                                    </div>                                </div>                                <div class="row-fluid">                                    <div class="span6">                                        <div class="s-time" data-translate="',e.departureDate,'" data-date-format="',timeFormat,'"></div>                                    </div>                                    <div class="span6">                                        <div class="s-time" data-translate="',e.arrivalDate,'" data-date-format="',timeFormat,'"></div>                                    </div>                                </div>                                <div class="row-fluid">                                    <div class="span6">                                        <div class="s-place" data-translate="',e.departureCode,'" data-airport-format="',detailsAirportFormat,'"></div>                                    </div>                                    <div class="span6">                                        <div class="s-place" data-translate="',e.arrivalCode,'" data-airport-format="',detailsAirportFormat,'"></div>                                    </div>                                </div>                                <div class="c-info-c">                                    <div class="c-info">                                        ');var i=Math.abs(Math.floor(e.flightDuration/36e5));__p.push("                                        ");var s=Math.abs(Math.ceil(e.flightDuration%36e5/6e4));__p.push('                                        <span data-translate="label.flc.flightDuration"></span>:                                        <span class="value" data-translate="label.cart.durationFormat|',i,"|",s,'"></span>                                    </div>                                    <div class="c-info">                                        <span data-translate="label.cart.cabinLabel"></span>:                                        <span data-translate="Cabin.',e.classOfService[0],'"></span>                                    </div>                                </div>                            </div>                        </div>                    </div>                ')}),__p.push("                "),t>0&&__p.push('                    <div class="total-trip-duration">                        <strong data-translate="label.cart.TotalTime"></strong>                        <strong data-translate="label.cart.durationFormat|',Math.floor(t/36e5),"|",Math.ceil(t%36e5/6e4),'"></strong>                    </div>                '),__p.push("            ")}),__p.push("            "),"undefined"!=typeof originalFlights&&(__p.push('                <h4 class="element-container plus-minus-element" id="toggle-original-flights" data-translate="label.cart.exchange.previousItinerary"></h4>                <ul>                    <li id="cart-original-flights">                        <div class="content">                            '),_.each(originalFlights,function(e,t){__p.push('                                <h3 class="itinerary-title ',0===t?"departure":"arrival",'">                                    <span data-translate="label.cart.flighttype.',0===t?"depart":"return",'"></span>:                                    <span class="date">',Sabre.app.formatDate(e.departureDate,dateFormat),"</span>                                    (",e.originCode," - ",e.destinationCode,")                                </h3>                                ");var a=e.segments.length-1;__p.push("                                "),_.each(e.segments,function(t,n){__p.push('                                    <div class="segment">                                        <div class="s-segment">                                            <div class="row-fluid s-header">                                                <div class="span6">                                                    <div class="element-container">                                                        <span data-translate="',t.departure,'" data-date-format="',dateFormat,'"></span>                                                    </div>                                                </div>                                                <div class="span6 text-right">                                                    <div class="element-container">                                                        <div>',t.airlineCode," ",t.flightNumber,"</div>                                                        "),(t.operatingAirlineCode&&t.operatingAirlineCode!==t.airlineCode||t.wetLessor)&&(__p.push('                                                            <span class="operated-by">                                                                <span data-translate="label.cart.carrier"></span>                                                                '),t.wetLessor?__p.push("                                                                    <span>",t.wetLessor,"</span>                                                                "):__p.push('                                                                    <span data-translate="airline.',t.operatingAirlineCode,'"></span>                                                                '),__p.push("                                                            </span>                                                        ")),__p.push('                                                    </div>                                                </div>                                            </div>                                            <div class="s-destinations element-container">                                                <div class="row-fluid">                                                    <div class="span6">                                                        <div class="s-title" data-translate="label.flc.depart"></div>                                                    </div>                                                    <div class="span6">                                                        <div class="s-title" data-translate="label.flc.arrive"></div>                                                    </div>                                                </div>                                                <div class="row-fluid">                                                    <div class="span6">                                                        <div class="s-time" data-translate="',t.departure,'" data-date-format="',timeFormat,'"></div>                                                    </div>                                                    <div class="span6">                                                        <div class="s-time" data-translate="',t.arrival,'" data-date-format="',timeFormat,'"></div>                                                    </div>                                                </div>                                                <div class="row-fluid">                                                    <div class="span6">                                                        <div class="s-place" data-translate="',t.origin.code,'" data-airport-format="',detailsAirportFormat,'"></div>                                                    </div>                                                    <div class="span6">                                                        <div class="s-place" data-translate="',t.destination.code,'" data-airport-format="',detailsAirportFormat,'"></div>                                                    </div>                                                </div>                                                <div class="c-info-c">                                                    <div class="c-info">                                                        ');var s=Math.abs(t.durationInHours);__p.push("                                                        ");var o=Math.abs(t.durationInMinutes);if(__p.push('                                                        <span data-translate="label.flc.flightDuration"></span>:                                                        <span class="value" data-translate="label.cart.durationFormat|',s,"|",o,'"></span>                                                    </div>                                                    <div class="c-info">                                                        <span data-translate="label.cart.cabinLabel"></span>:                                                        <span data-translate="Cabin.',t.cabinClass,'"></span>                                                    </div>                                                </div>                                            </div>                                        </div>                                    </div>                                    '),n!==a){__p.push("                                        ");var r=(new Date(e.segments[n+1].departure)-new Date(t.arrival))/1e3;__p.push("                                        ");var i=Math.floor(r/3600);__p.push("                                        ");var l=(r-3600*i)/60;__p.push('                                        <div class="layover">                                            <span data-translate="label.cart.Layover"></span>                                            <span data-translate="label.cart.durationFormat|',i,"|",l,'"></span>                                            <span class="place" data-translate="',t.destination.code,'" data-airport-format="',airportFormat,'"></span>                                        </div>                                    ')}__p.push("                                ")}),__p.push("                                ");var n=(e.arrivalTime-e.departureTime)/1e3;__p.push("                                ");var r=Math.floor(n/3600);__p.push("                                ");var i=(n-3600*r)/60;__p.push('                                <div class="total-trip-duration">                                    <strong data-translate="label.cart.TotalTime"></strong>                                    <strong data-translate="label.cart.durationFormat|',r,"|",i,'"></strong>                                </div>                            ')}),__p.push("                        </div>                    </li>                </ul>            ")),__p.push("        </div>    </li>")}if(__p.push(""),"undefined"!=typeof prices){__p.push('    <li id="cart-prices"'),"undefined"!=typeof originalFlights&&__p.push(' class="exchange"'),__p.push(">        "),"undefined"==typeof originalFlights?(__p.push("            "),"undefined"!=typeof prices.total&&prices.total.priceAlternatives.length&&__p.push('                <h2 data-translate="label.cart.priceSummary"></h2>            '),__p.push("        ")):(__p.push('            <h2 class="row-fluid">                '),__p.push("totalRefund"===totalType?'                    <span class="span5"><span data-translate="label.cart.totalRefund"></span>:</span>                ':'                    <span class="span5" data-translate="label.cart.exchange.totalDue"></span>                '),__p.push('                <span class="span7 price">',Price.format(prices.totalDue),"</span>            </h2>        ")),__p.push('        <div class="content clearfix element-container">            '),"undefined"!=typeof originalFlights&&__p.push('                <h3 data-translate="label.cart.exchange.newTripPrice"></h3>            '),__p.push("            "),(amountDueOnHoldSelected||amountDueAndTotalDiff)&&amountDueEnabled&&__p.push('                <div class="fare-lock">                    <h3 class="row-fluid">                        <div class="span5">                            <span data-translate="label.cart.fareLockCost"></span>                        </div>                        <div class="span7 price-div">                            <div class="price-total">',Price.format(prices.amountDue.priceAlternatives)?Price.format(prices.amountDue.priceAlternatives):"0.00",'</div>                        </div>                    </h3>                    <h3>                        <span data-translate="label.cart.fareToBeLocked"></span>                    </h3>                </div>            '),__p.push('            <ul class="price-breakdown plus-minus-list">                '),"undefined"!=typeof prices.fare&&"ancillaries"!==Sabre.router.flow&&(__p.push('                    <li class="fare-breakdown">                        <h3 class="row-fluid">                            <div class="span5">                                <a href="#" class="toggle-price"><div class="plus-minus-icon"></div><span data-translate="label.cart.priceSummary.fare"></span></a>                            </div>                            <div class="span7 price-div">                                <div class="price-total">',Price.format(Price.reduce(prices.fare).priceAlternatives),'</div>                            </div>                        </h3>                        <ul class="details slideDown">                            '),_.each(prices.fare,function(e,t){__p.push('                                <li>                                    <div class="row-fluid">                                        <div class="span5">                                            '),e.number>1?__p.push('                                                <span data-translate="label.cart.passengerType.',t,'.plural"></span><span> x ',e.number,"</span>                                            "):__p.push('                                                <span data-translate="label.cart.passengerType.',t,'.singular"></span>                                            '),__p.push('                                        </div>                                        <div class="span7 price-div">                                            ',Price.format(e.prices.priceAlternatives),"                                        </div>                                    </div>                                </li>                            ")
}),__p.push("                        </ul>                    </li>                ")),__p.push("                "),"undefined"!=typeof prices.discount&&(__p.push('                    <li class="fare-breakdown">                        <h3 class="row-fluid">                            <div class="span5">                                <a href="#" class="toggle-price no-plus"><div class="plus-minus-icon"></div><span data-translate="label.cart.priceSummary.discount"></span></a>                            </div>                            <div class="span7 price-div">                                <div class="price-total">                                    '),prices.discount.priceAlternatives.length?__p.push("                                        ",Price.format(prices.discount.priceAlternatives),"                                    "):__p.push("                                        ",Sabre.app.getEmptyPrice(),"                                    "),__p.push('                                </div>                            </div>                        </h3>                        <ul class="details slideDown">                            <li>                                <div class="row-fluid">                                    <div class="span5">                                        <span data-translate="label.cart.priceSummary.discount"></span>                                    </div>                                    <div class="span7 price-div">                                        '),prices.discount.priceAlternatives.length?__p.push("                                            ",Price.format(prices.discount.priceAlternatives),"                                        "):__p.push("                                            ",Sabre.app.getEmptyPrice(),"                                        "),__p.push("                                    </div>                                </div>                            </li>                        </ul>                    </li>                ")),__p.push("                "),null!=prices.singletaxes&&prices.singletaxes.length>0&&(__p.push("                    "),_.each(prices.singletaxes,function(e){__p.push('                        <li class="fare-breakdown">                            <h3 class="row-fluid">                                <div class="span5">                                    <a href="#" class="toggle-price"><div class="plus-minus-icon"></div><span data-translate="Tax.',e.code,'"></span></a>                                </div>                                <div class="span7 price-div">                                    <div class="price-total">',e.total,'</div>                                </div>                            </h3>                            <ul class="details slideDown">                                '),_.each(e.psnglist,function(e){__p.push('                                    <li>                                        <div class="row-fluid">                                            <div class="span5">                                                <span data-translate="',e.psngType,'"></span>'),e.psngCount>1&&__p.push("<span> x ",e.psngCount,"</span>"),__p.push('                                            </div>                                            <div class="span7 price-div">                                                ',e.totalprice,"                                            </div>                                        </div>                                    </li>                                ")}),__p.push("                            </ul>                        </li>                    ")}),__p.push("                ")),__p.push("                "),"undefined"!=typeof prices.taxes&&prices.taxes.length>0&&(__p.push('                    <li class="fare-breakdown">                        <h3 class="row-fluid">                            <div class="span5">                                <a href="#" class="toggle-price"><div class="plus-minus-icon"></div><span data-translate="label.cart.priceSummary.taxes"></span></a>                            </div>                            <div class="span7 price-div">                                <div class="price-total">',Price.format(Price.reduce(prices.taxes).priceAlternatives),'</div>                            </div>                        </h3>                        <ul class="details slideDown">                            '),_.each(prices.taxes,function(e){__p.push('                                <li>                                    <div class="row-fluid">                                        <div class="span5">                                            <span data-translate="Tax.',e.taxCode,'"></span> <span>(',e.taxCode,')</span>                                        </div>                                        <div class="span7 price-div">                                            ',Price.format(e.prices.priceAlternatives),"                                        </div>                                    </div>                                </li>                            ")}),__p.push("                        </ul>                    </li>                ")),__p.push("                "),"undefined"!=typeof prices.new&&"undefined"!=typeof prices.new.fare&&__p.push('                    <li class="fare-breakdown">                        <h3 class="row-fluid">                            <div class="span5">                                <a href="#" class="toggle-price"><div class="plus-minus-icon"></div><span data-translate="label.cart.newBooking.faresTaxesRefund"></span></a>                            </div>                            <div class="span7 price-div">                                <div class="price-total">',Price.format(prices.new.fare.priceAlternatives),'</div>                            </div>                        </h3>                        <ul class="details slideDown">                            <li>                                <div class="row-fluid">                                    <div class="span5" data-translate="label.cart.newBooking.faresTaxesRefund"></div>                                    <div class="span7 price-div">                                        ',Price.format(prices.new.fare.priceAlternatives),"                                    </div>                                </div>                            </li>                        </ul>                    </li>                "),__p.push("                "),"undefined"==typeof prices.seats||"undefined"!=typeof prices.new&&"undefined"!=typeof prices.new.seats||(__p.push('                    <li class="fare-breakdown">                        <h3 class="row-fluid">                            <div class="span5">                                <a href="#" class="toggle-price"><div class="plus-minus-icon"></div><span data-translate="label.cart.priceSummary.seats"></span></a>                            </div>                            <div class="span7 price-div">                                <div class="price-total">',Price.format(Price.reduce(prices.seats).priceAlternatives),'</div>                            </div>                        </h3>                        <ul class="details slideDown">                            '),_.each(prices.seats,function(e){__p.push('                                <li>                                    <div class="row-fluid">                                        <div class="span5">                                            <span data-translate="Ancillary.name.',e.label,'"></span>                                        </div>                                        <div class="span7 price-div">                                            ',Price.format(e.total.priceAlternatives),"                                        </div>                                    </div>                                </li>                            ")}),__p.push("                        </ul>                    </li>                ")),__p.push("                "),"undefined"==typeof prices.ancillaries||"undefined"!=typeof prices.new&&"undefined"!=typeof prices.new.ancillaries||(__p.push('                    <li class="fare-breakdown">                        <h3 class="row-fluid">                            <div class="span5">                                <a href="#" class="toggle-price"><div class="plus-minus-icon"></div><span data-translate="label.cart.priceSummary.ancillaries"></span></a>                            </div>                            <div class="span7 price-div">                                <div class="price-total">',Price.format(Price.reduce(prices.ancillaries).priceAlternatives),'</div>                            </div>                        </h3>                        <ul class="details slideDown">                            '),_.each(prices.ancillaries,function(e){__p.push("                                <li>                                    "),(e.itineraryPart||e.segment)&&(__p.push('                                        <div class="row-fluid">                                            <div class="span5">                                                '),e.itineraryPart?__p.push("                                                    <span>",e.itineraryPart.departureCode,"</span> - <span>",e.itineraryPart.arrivalCode,"</span>                                                "):__p.push("                                                    <span>",e.segment.departureCode,"</span> - <span>",e.segment.arrivalCode,"</span>                                                "),__p.push('                                            </div>                                            <div class="span7 price-div"></div>                                        </div>                                    ')),__p.push("                                    "),_.each(e.ancillaries,function(e){__p.push('                                        <div class="row-fluid">                                            <div class="span5">                                                <span data-translate="Ancillary.name.',e.code,'"></span> x ',e.quantity,'                                            </div>                                            <div class="span7 price-div">                                                ',Price.format(e.total.priceAlternatives),"                                            </div>                                        </div>                                    ")}),__p.push("                                </li>                            ")}),__p.push("                        </ul>                    </li>                ")),__p.push("                ");var elements=["seats","ancillaries"];if(__p.push("                "),_.each(elements,function(e){__p.push("                    "),"undefined"!=typeof prices.new&&"undefined"!=typeof prices.new[e]&&0!==prices.new[e+"Prices"].priceAlternatives.length&&(__p.push('                        <li class="fare-breakdown">                            <h3 class="row-fluid">                                <div class="span5">                                    <a href="#" class="toggle-price"><div class="plus-minus-icon"></div><span data-translate="label.cart.priceSummary.',e,'"></span></a>                                </div>                                <div class="span7 price-div">                                    <div class="price-total">',Price.format(prices.new[e+"Prices"].priceAlternatives),'</div>                                </div>                            </h3>                            <ul class="details slideDown">                                '),_.each(prices.new[e],function(e){__p.push("                                    "),_.each(e.ancillaries,function(e){__p.push('                                        <li>                                            <div class="row-fluid">                                                <div class="span5">                                                    <span data-translate="Ancillary.name.',e.code,'"></span> x ',e.quantity,"                                                    "),e.segment&&__p.push("                                                        (<span>",e.segment.departureCode,"</span> - <span>",e.segment.arrivalCode,"</span>)                                                    "),__p.push("                                                    "),e.retained&&__p.push('                                                        <br><span class="info" data-translate="label.cart.refund.retained"></span>                                                    '),__p.push('                                                </div>                                                <div class="span7 price-div">                                                    ',Price.format(e.prices.priceAlternatives),"                                                </div>                                            </div>                                        </li>                                    ")}),__p.push("                                ")}),__p.push("                            </ul>                        </li>                    ")),__p.push("                ")}),__p.push("                "),"undefined"!=typeof prices.new&&"undefined"!=typeof prices.new.changeFee&&"undefined"!=typeof prices.new.changeFeeTotal&&(__p.push('                    <li class="fare-breakdown">                        <h3 class="row-fluid">                            <div class="span5">                                <a href="#" class="toggle-price"><div class="plus-minus-icon"></div><span data-translate="label.cart.priceSummary.changeFee"></span></a>                            </div>                            <div class="span7 price-div">                                <div class="price-total">',Price.format(Price.reduce(prices.new.changeFeeTotal).priceAlternatives),'</div>                            </div>                        </h3>                        <ul class="details slideDown">                            <li>                                <div class="row-fluid">                                    <div class="span5" data-translate="Fee"></div>                                    <div class="span7 price-div">                                        ',Price.format(prices.new.changeFee.changeFeePrice.priceAlternatives),"                                    </div>                                </div>                            </li>                            "),_.each(prices.new.changeFee.taxPrices,function(e){__p.push('                                <li>                                    <div class="row-fluid">                                        <div class="span5">                                            <span data-translate="Tax.',e.taxCode,'"></span> <span>(',e.taxCode,')</span>                                        </div>                                        <div class="span7 price-div">                                            ',Price.format(e.prices.priceAlternatives),"                                        </div>                                    </div>                                </li>                            ")}),__p.push("                        </ul>                    </li>                ")),__p.push("                "),(amountDueOnHoldSelected||amountDueAndTotalDiff)&&amountDueEnabled?(__p.push("                    "),"undefined"!=typeof prices.amountDue&&prices.amountDue.priceAlternatives.length&&__p.push('                        <li class="total-price-breakdown">                            <h2 class="row-fluid">                                <div class="span3" data-translate="label.cart.total"></div>                                <div class="span9 price-div">                                    <div class="price-total">',Price.format(prices.amountDue.priceAlternatives),"</div>                                </div>                            </h2>                        </li>                    "),__p.push("                ")):(__p.push("                    "),"undefined"!=typeof prices.total&&prices.total.priceAlternatives.length&&__p.push('                        <li class="total-price-breakdown">                            <h2 class="row-fluid">                                <div class="span3" data-translate="label.cart.total"></div>                                <div class="span9 price-div">                                    <div class="price-total">',Price.format(prices.total.priceAlternatives),"</div>                                </div>                            </h2>                        </li>                    "),__p.push("                ")),__p.push("            </ul>            "),"undefined"!=typeof prices.previous){__p.push('                <h3 class="prev" data-translate="label.cart.exchange.previousTripPrice"></h3>                <ul class="price-breakdown plus-minus-list">                    '),prices.previous.fare&&__p.push('                        <li class="fare-breakdown">                            <h3 class="row-fluid">                                <div class="span5">                                    <a href="#" class="toggle-price"><div class="plus-minus-icon"></div><span data-translate="label.cart.refund.faresTaxes"></span></a>                                </div>                                <div class="span7 price-div">                                    <div class="price-total">(',Price.format(prices.previous.fare.priceAlternatives),')</div>                                </div>                            </h3>                            <ul class="details slideDown">                                <li>                                    <div class="row-fluid">                                        <div class="span5" data-translate="label.cart.refund.faresTaxes"></div>                                        <div class="span7 price-div">                                            (',Price.format(prices.previous.fare.priceAlternatives),")                                        </div>                                    </div>                                </li>                            </ul>                        </li>                    "),__p.push("                    ");var elements={refundable:"refundable",nonRefundable:"nonrefundable",retained:"retainedItems",retainIfAvailable:"retainIfAvailableItems"};__p.push("                    "),_.each(elements,function(t,e){__p.push("                        "),"undefined"!=typeof prices.previous[e]&&(__p.push('                            <li class="fare-breakdown">                                <h3 class="row-fluid">                                    <div class="span5">                                        <a href="#" class="toggle-price"><div class="plus-minus-icon"></div><span data-translate="label.cart.refund.',t,'"></span></a>                                    </div>                                    <div class="span7 price-div">                                        <div class="price-total">(',prices.previous.itemsPrices(prices.previous[e]),')</div>                                    </div>                                </h3>                                <ul class="details slideDown">                                    '),_.each(prices.previous[e],function(e){__p.push("                                        "),_.each(e.ancillaries,function(e){__p.push('                                            <li>                                                <div class="row-fluid">                                                    <div class="span5">                                                        <span data-translate="Ancillary.name.',e.code,'"></span> x ',e.quantity,"                                                        "),e.segment&&__p.push("                                                            (<span>",e.segment.departureCode,"</span> - <span>",e.segment.arrivalCode,"</span>)                                                        "),__p.push('                                                    </div>                                                    <div class="span7 price-div">                                                        (',Price.format(e.prices.priceAlternatives),")                                                    </div>                                                </div>                                            </li>                                        ")}),__p.push("                                    ")}),__p.push("                                </ul>                            </li>                        ")),__p.push("                    ")}),__p.push('                    <li class="total-price-breakdown">                        <h2 class="row-fluid">                            <div class="span3" data-translate="label.cart.total"></div>                            <div class="span9 price-div">                                <div class="price-total">(',Price.format(prices.previous.total),")</div>                            </div>                        </h2>                    </li>                </ul>            ")}__p.push("        </div>    </li>")}__p.push('</ul></div><div class="show-cart-details">    <div>        <i class="fa fa-angle-double-down"></i>        <span data-translate="label.flc.view" class="lng"></span>        <span data-translate="label.flc.hide" class="hidden lng"></span>        <span data-translate="label.flc.TripAndPriceDetails"></span>    </div></div></div></div>')}return __p.join("")}}),define("tpl!views/controls/loyalty-payment.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="loyalty-payment">    <div class="header">        <i class="fa fa-angle-double-up"></i> <span                class="text">',T.translate("label.loyaltyPayment.payWithRewardPoints"),'</span>    </div>    <div class="body">        <p>',T.translate("label.loyaltyPayment.instructions"),'</p>        <div class="row-fluid">            <div class="span6" class="available-amount">                <div class="label">',T.translate("label.loyaltyPayment.availableAwardAmount"),'</div>                <div class="number">',availableAwardAmount,'</div>            </div>            <div class="span6" class="amount-to-apply">                <div class="label">',T.translate("label.loyaltyPayment.awardAmountToApply"),'</div>                <div class="number" id="',id,'-amount-to-apply-number">',amountToApply,'</div>            </div>        </div>        <div id="',id,'-apply-container" class="apply-container hidden">            <p id="',id,'-slider-instruction"               class="slider-instruction">',T.substitute("label.loyaltyPayment.sliderInstructions",{minPoints:minPoints,loyaltyCurrency:T.translate(loyaltyCurrency)}),"                "),isTaxRequiredToBePaidInCash&&__p.push("                ",T.translate("label.loyaltyPayment.sliderTaxInstructions"),"                "),__p.push('            </p>            <div class="row-fluid">                <div id="',id,'-slider"></div>            </div>            <div class="text-right">                <button class="btn btn-primary" disabled                        id="',id,'-apply">',T.translate("label.loyaltyPayment.update"),'</button>            </div>        </div>        <div class="text-right">            <button class="btn btn-default"                    id="',id,'-change">',T.substitute("label.loyaltyPayment.change",{loyaltyCurrency:T.translate(loyaltyCurrency)}),"</button>        </div>    </div></div>");return __p.join("")}}),define("tpl!views/controls/loyalty-slider.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="loyalty-slider">    <div id="',id,'-slider" class="slider-container"></div>    <div class="cash-container">        <input id="',id,'-cash" class="input cash" type="number" min="',minCash,'" max="',maxCash,'"               value="',cash,'">        <span class="amount-label">',T.substitute("label.loyaltyPayment.cashAmountDue",{cashCurrency:cashCurrency}),'</span>    </div>    <div class="points-container">        <input id="',id,'-points" class="input points" type="number" min="',minPoints,'"               max="',maxPoints,'"               value="',points,'">        <span class="amount-label">',T.translate(pointCurrency),"</span>    </div></div>");return __p.join("")}}),define("tpl!views/controls/slider.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="slider" id="',id,'-container">    <div class="bar" id="',id,'-bar"></div>    <div class="circle" id="',id,'-circle"></div></div>');return __p.join("")}}),define("views/controls/slider",["views/View","tpl!./slider.tpl","logger","mobileEvents"],function(t,n,r){var e=t.extend({id:"slider"});return e.prototype.render=function(){var e=this;return t.prototype.render.apply(e,arguments).then(function(){e.mapControls(),e.circleWitdth=e.controls.circle.width(),e.initEvents()}).catch(function(e){r.error(e)})},e.prototype.initEvents=function(){var e={};e["mousedown "+this.toId("container")]="onContainerMouseDown",e["mousemove "+this.toId("container")]="onContainerMouseMove",e["mouseup "+this.toId("container")]="onContainerMouseUp",e["mouseout "+this.toId("container")]="onContainerMouseOut";var t=this.find(this.toId("container"));t.hammer().bind("panstart",this.onContainerMouseDown.bind(this)),t.hammer().bind("panstop",this.onContainerMouseUp.bind(this)),t.hammer().bind("panmove",function(e){this.moveCircle(e.gesture.changedPointers[0].pageX)}.bind(this)),this.delegateEvents(e)},e.prototype.moveCircle=function(i,s){var e=this,t=i-e.circleWitdth/2,n=e.controls.container.offset().left,r=e.controls.container.width();n>t&&(t=n),t>n+r-e.circleWitdth&&(t=n+r-e.circleWitdth),e.controls.circle.offset({left:t});var a=Math.round(100*(t-n)/(r-e.circleWitdth));e.value!==a&&(s||{}).silent!==!0&&_.defer(function(){e.trigger("change",{from:e.value,to:a})}),e.value=a},e.prototype.onContainerMouseDown=function(e){e.stopPropagation(),this.moveCircle(e.pageX),this.dragging=!0},e.prototype.onContainerMouseOut=function(){this.dragging=!1},e.prototype.onContainerMouseMove=function(e){this.dragging===!0&&this.moveCircle(e.pageX)},e.prototype.onContainerMouseUp=function(){this.dragging=!1},e.prototype.draw=function(){var e=this;return e.$el.html(n({id:e.getId()})),t.prototype.draw.apply(e,arguments)},e.prototype.val=function(e,t){return void 0===e?this.value:(0>e&&(e=0),e>100&&(e=100),this.value=e,void this.updateCirclePosition(t))},e.prototype.updateCirclePosition=function(e){var t=this.value/100*(this.controls.container.width()-this.controls.circle.width())+this.controls.container.offset().left+this.controls.circle.width()/2;this.moveCircle(t,e)},e}),define("views/controls/loyalty-slider",["require","views/View","tpl!./loyalty-slider.tpl","views/controls/slider","logger"],function(t){var n=t("views/View"),r=t("tpl!./loyalty-slider.tpl"),a=t("views/controls/slider"),i=t("logger"),e=n.extend({id:"loyalty-slider"});return e.prototype.initialize=function(){var e=this;n.prototype.initialize.apply(this,arguments),this.model.set({minCash:e.model.getMinimumMonetaryTick().monetaryAmount,maxCash:e.model.getMaximumMonetaryTick().monetaryAmount,cash:e.model.getCurrentTick().monetaryAmount,points:e.model.getCurrentTick().awardAmount,maxPoints:e.model.getMaximumAwardsTick().awardAmount,minPoints:e.model.getMinimumAwardsTick().awardAmount,pointCurrency:e.model.get("pointCurrency"),cashCurrency:e.model.get("cashCurrency")})},e.prototype.render=function(){var e=this;return n.prototype.render.apply(e,arguments).then(function(){e.mapControls(),e.slider=new a({el:e.controls.slider}),e.slider.render(),e.initEvents()}).catch(function(e){i.error(e)})},e.prototype.refresh=function(){this.slider.val(this.model.getCurrentTick().position-1)},e.prototype.initEvents=function(){var e={};e["change "+this.toId("points")]="onPointsChange",e["change "+this.toId("cash")]="onCashChange",this.delegateEvents(e),this.slider.on("change",this.onSliderChange.bind(this))},e.prototype.onPointsChange=function(){var e=parseInt(this.controls.points.val(),10);if(!isNaN(e)){var t=e;e<this.model.get("minPoints")?e=this.model.get("minPoints"):e>this.model.get("maxPoints")&&(e=this.model.get("maxPoints")),t!==e&&this.controls.points.val(e),this.trigger("points-change",e)}},e.prototype.onCashChange=function(){var e=parseInt(this.controls.cash.val(),10);if(!isNaN(e)){var t=e;e<this.model.get("minCash")?e=this.model.get("minCash"):e>this.model.get("maxCash")&&(e=this.model.get("maxCash")),t!==e&&this.controls.cash.val(e),this.trigger("cash-change",e)}},e.prototype.onSliderChange=function(){var t=this.slider.val(),n=this.model.getTicks(),e=_.find(n,function(e){return parseInt(e.position,10)-1===t});e&&(this.changeTick(e,!1),this.trigger("slider-change"))},e.prototype.changeTick=function(e,t){this.model.set("currentTick",e),this.controls.cash.val(e.monetaryAmount),this.controls.points.val(e.awardAmount),t!==!1&&this.slider.val(e.position-1,{silent:!0})},e.prototype.draw=function(){var e=this;return e.$el.html(r(_.extend(e.model.toJSON(),{id:e.getId(),T:Sabre.translator}))),n.prototype.draw.apply(e,arguments)},e}),define("views/controls/loyalty-payment",["require","views/View","tpl!./loyalty-payment.tpl","views/controls/loyalty-slider","models/Component","models/Price","models/Number","logger"],function(t){var r=t("views/View"),i=t("tpl!./loyalty-payment.tpl"),s=t("views/controls/loyalty-slider"),n=t("models/Component"),a=t("models/Price"),o=t("models/Number"),l=t("logger"),e=r.extend({id:"loyalty-payment"});return e.prototype.initialize=function(e){r.prototype.initialize.apply(this,arguments),this.components=e.components,this.socket=e.socket,this.router=e.router,this.paymentSlider=this.components.get(n.PAYMENT_SLIDER);var t=this.components.get(n.CART);this.paymentSlider.set("cashCurrency",t.get("currencyCode")),this.paymentSlider.set("pointCurrency",Sabre.settings.getFrequentFlyerCurrency())},e.prototype.render=function(){var e=this;return r.prototype.render.call(e).then(function(){e.mapControls(),e.slider=new s({el:e.controls.slider,model:e.paymentSlider}),e.slider.render(),e.initEvents(),_.defer(function(){var r=e.components.get(n.LOGIN);if(!r.isLoggedIn()){var t=e.storage.get(Sabre.router.flow+"|AIR_SELECT_PAGE");Sabre.app.loading(!0),t?e.router.navigate(Sabre.router.flow+"/"+t,{trigger:!0}):e.router.navigate(Sabre.router.flow,{trigger:!0})}})}).catch(function(e){l.error(e)})},e.prototype.isTaxRequiredToBePaidInCash=function(){return void 0!==_.find(this.components.get(n.CART).get("taxPrices"),function(e){return _.find(e.prices.priceAlternatives,function(e){return _.find(e.pricesPerCurrency,function(e){return e.currency.ffcurrency===!1&&parseFloat(e.amount)>0})})})},e.prototype.draw=function(){var e=this,s=this.components.get(n.LOGIN).getUser().getLoyaltyBalance(),t=parseFloat(this.paymentSlider.getCurrentTick().awardAmount);return e.$el.html(i({id:e.getId(),T:Sabre.translator,availableAwardAmount:a.formatPoint(s),amountToApply:a.formatPoint(t),minPoints:o.formatPositiveInteger(this.paymentSlider.getMinimumAwardsTick().awardAmount),isTaxRequiredToBePaidInCash:parseFloat(this.paymentSlider.getMinimumMonetaryTick().monetaryAmount)>0,loyaltyCurrency:Sabre.settings.getFrequentFlyerCurrency(),hasAmountBeenUpdated:this.paymentSlider.getMaximumAwardsTick().awardAmount>t})),r.prototype.draw.apply(this,arguments)},e.prototype.initEvents=function(){var e={};e["click "+this.toId("change")]="onChangeClick",e["click "+this.toId("apply")]="onApplyClick",this.delegateEvents(e),this.slider.on("cash-change",this.onCashChange.bind(this)),this.slider.on("points-change",this.onPointsChange.bind(this)),this.slider.on("slider-change",this.onSliderChange.bind(this)),this.listenToOnce(this,"applied",this.onApplied.bind(this))},e.prototype.onSliderChange=function(){this.controls.apply.prop("disabled",!1)
},e.prototype.onCashChange=function(e){var t=this;t.handleCashChange(e)},e.prototype.onPointsChange=function(e){var t=this;t.handlePointsChange(e)},e.prototype.handleCashChange=function(t){var e=this;return e.socket.request({data:{contextObject:JSON.stringify({transferObjects:[{componentType:"paymentslider",actionCode:"getTickByMonetary",queryData:{componentId:"paymentslider_1",componentType:"paymentslider",actionCode:"getTickByMonetary",queryData:null,requestAmount:t}}]})}}).then(function(t){e.slider.changeTick(t.content[0].tick),e.controls.apply.prop("disabled",!1)})},e.prototype.handlePointsChange=function(t){var e=this;return e.socket.request({data:{contextObject:JSON.stringify({transferObjects:[{componentType:"paymentslider",actionCode:"getTickByAward",queryData:{componentId:"paymentslider_1",componentType:"paymentslider",actionCode:"getTickByAward",queryData:null,requestAmount:t}}]})}}).then(function(t){e.slider.changeTick(t.content[0].tick),e.controls.apply.prop("disabled",!1)})},e.prototype.onApplied=function(){var e=this;e.render()},e.prototype.onChangeClick=function(e){e.preventDefault(),this.controls.applyContainer.removeClass("hidden"),this.controls.change.addClass("hidden"),this.slider.refresh()},e.prototype.onApplyClick=function(e){return e.preventDefault(),this.apply()},e.prototype.apply=function(){var e=this;return e.socket.request({data:{contextObject:JSON.stringify({transferObjects:[{componentType:"paymentslider",actionCode:"applyButton",queryData:{componentId:"paymentslider_1",componentType:"paymentslider",actionCode:"applyButton",queryData:null,requestAmount:e.paymentSlider.getCurrentTick().awardAmount}}]})}}).then(function(){e.trigger("applied"),window.location.reload()})},e}),define("components/APPLICATION/fraudnet",["jquery","backbone","tpl!./tpl/fraudnet.tpl"],function($,Backbone,FRAUDNET){function toISOString(e){return e.getUTCFullYear()+"-"+pad(e.getUTCMonth()+1)+"-"+pad(e.getUTCDate())+"T"+pad(e.getUTCHours())+":"+pad(e.getUTCMinutes())+":"+pad(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}function pad(t){var e=String(t);return 1===e.length&&(e="0"+e),e}var jscFromIdAndName="jscData",browserTimestamp="browserTimestamp";return Backbone.View.extend({events:{},initialize:function(){this.render()},render:function(){this.$el.html(FRAUDNET({}))},collectJSCData:function(){this.collectBrowserTimestamp(),this.invokeJSC(),formfactor.pasedina(jscFromIdAndName)},collectBrowserTimestamp:function(){var e=document.getElementById(browserTimestamp);if(null!=e&&"undefined"!=e){var t=new Date;e.value=Date.prototype.toISOString?t.toISOString():toISOString(t)}},invokeJSC:function(){!function(){function c(n){try{if(navigator.plugins&&navigator.plugins.length)for(var t=0;t<navigator.plugins.length;t++){var e=navigator.plugins[t];if(0<=e.name.indexOf(n))return e.name+(e.description?"|"+e.description:"")}}catch(r){}return""}function p(){for(var b=new Date,d=new Date,a=[function(){return"TF1"},function(){return"015"},function(){return ScriptEngineMajorVersion()},function(){return ScriptEngineMinorVersion()},function(){return ScriptEngineBuildVersion()},function(){return e("{7790769C-0471-11D2-AF11-00C04FA35D02}")},function(){return e("{89820200-ECBD-11CF-8B85-00AA005B4340}")},function(){return e("{283807B5-2C60-11D0-A31D-00AA00B92C03}")},function(){return e("{4F216970-C90C-11D1-B5C7-0000F8051515}")},function(){return e("{44BBA848-CC51-11CF-AAFA-00AA00B6015C}")},function(){return e("{9381D8F2-0288-11D0-9501-00AA00B911A5}")},function(){return e("{4F216970-C90C-11D1-B5C7-0000F8051515}")},function(){return e("{5A8D6EE0-3E18-11D0-821E-444553540000}")},function(){return e("{89820200-ECBD-11CF-8B85-00AA005B4383}")},function(){return e("{08B0E5C0-4FCB-11CF-AAA5-00401C608555}")},function(){return e("{45EA75A0-A269-11D1-B5BF-0000F8051515}")},function(){return e("{DE5AED00-A4BF-11D1-9948-00C04F98BBC9}")},function(){return e("{22D6F312-B0F6-11D0-94AB-0080C74C7E95}")},function(){return e("{44BBA842-CC51-11CF-AAFA-00AA00B6015B}")},function(){return e("{3AF36230-A269-11D1-B5BF-0000F8051515}")},function(){return e("{44BBA840-CC51-11CF-AAFA-00AA00B6015C}")},function(){return e("{CC2A9BA0-3BDD-11D0-821E-444553540000}")},function(){return e("{08B0E5C0-4FCB-11CF-AAA5-00401C608500}")},function(){return eval("navigator.appCodeName")},function(){return eval("navigator.appName")},function(){return eval("navigator.appVersion")},function(){return q(["navigator.productSub","navigator.appMinorVersion"])},function(){return eval("navigator.browserLanguage")},function(){return eval("navigator.cookieEnabled")},function(){return q(["navigator.oscpu","navigator.cpuClass"])},function(){return eval("navigator.onLine")},function(){return eval("navigator.platform")},function(){return eval("navigator.systemLanguage")},function(){return eval("navigator.userAgent")},function(){return q(["navigator.language","navigator.userLanguage"])},function(){return eval("document.defaultCharset")},function(){return eval("document.domain")},function(){return eval("screen.deviceXDPI")},function(){return eval("screen.deviceYDPI")},function(){return eval("screen.fontSmoothingEnabled")},function(){return eval("screen.updateInterval")},function(){return 0!==Math.abs(k-m)},function(){return t(b)},function(){return"@UTC@"},function(){var e=0,e=0;return t(b)&&(e=Math.abs(k-m)),e=-(b.getTimezoneOffset()+e)/60},function(){return new Date(2005,5,7,21,33,44,888).toLocaleString()},function(){return eval("screen.width")},function(){return eval("screen.height")},function(){return h.Acrobat},function(){return h.Flash},function(){return h.QuickTime},function(){return h["Java Plug-in"]},function(){return h.Director},function(){return h.Office},function(){return(new Date).getTime()-d.getTime()},function(){return k},function(){return m},function(){return b.toLocaleString()},function(){return eval("screen.colorDepth")},function(){return eval("window.screen.availWidth")},function(){return eval("window.screen.availHeight")},function(){return eval("window.screen.availLeft")},function(){return eval("window.screen.availTop")},function(){return c("Acrobat")},function(){return c("Adobe SVG")},function(){return c("Authorware")},function(){return c("Citrix ICA")},function(){return c("Director")},function(){return c("Flash")},function(){return c("MapGuide")},function(){return c("MetaStream")},function(){return c("PDFViewer")},function(){return c("QuickTime")},function(){return c("RealOne")},function(){return c("RealPlayer Enterprise")},function(){return c("RealPlayer Plugin")},function(){return c("Seagate Software Report")},function(){return c("Silverlight")},function(){return c("Windows Media")},function(){return c("iPIX")},function(){return c("nppdf.so")},function(){var e=document.createElement("span");e.innerHTML="&nbsp;",e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);var t=e.offsetHeight;return document.body.removeChild(e),t}],i="Acrobat;Flash;QuickTime;Java Plug-in;Director;Office".split(";"),j=0;j<i.length;j++){var l=i[j],f=h,v=l,g=l,l="";try{if(navigator.plugins&&navigator.plugins.length)for(var u=RegExp(g+".* ([0-9._]+)"),g=0;g<navigator.plugins.length;g++){var o=u.exec(navigator.plugins[g].name);null===o&&(o=u.exec(navigator.plugins[g].description)),o&&(l=o[1])}else if(window.ActiveXObject&&r[g])try{var p=new ActiveXObject(r[g][0]),l=r[g][1](p)}catch(x){l=""}}catch(w){l=w.message}f[v]=l}for(i="",j=0;j<a.length;j++){var n;try{n=a[j](this)}catch(y){n=""}i+=escape(n),i+=";"}var a=i,s;for(n=escape("@UTC@"),i=(new Date).getTime(),"boolean"!=typeof s&&(s=!1),j=!0;0<=(f=a.indexOf(n))&&(s||j);)a=a.substr(0,f)+i+a.substr(f+n.length),j=!1;return a}function t(e){var t=Math.min(k,m);return 0!==Math.abs(k-m)&&e.getTimezoneOffset()===t}function q(b){for(var d=0;d<b.length;d++)try{var a=eval(b[d]);if(a)return a}catch(c){}return""}function e(e){var t="";try{"undefined"!=typeof f.a.getComponentVersion&&(t=f.a.getComponentVersion(e,"ComponentID"))}catch(n){e=n.message.length,t=escape(n.message.substr(0,e>40?40:e))}return t}var f={},k=new Date(2005,0,15).getTimezoneOffset(),m=new Date(2005,6,15).getTimezoneOffset(),h=[],r={Flash:["ShockwaveFlash.ShockwaveFlash",function(e){return e.getVariable("$version")}],Director:["SWCtl.SWCtl",function(e){return e.ShockwaveVersion("")}]};try{f.a=document.createElement("span"),"undefined"!=typeof f.a.addBehavior&&f.a.addBehavior("#default#clientCaps")}catch(x){}h={},f.pasedina=function(t){try{if(!t)return p();var n;e:{var e;try{e=document.getElementById(t)}catch(u){}if(null===e||"undefined"==typeof e)try{e=document.getElementsByName(t)[0]}catch(l){}if(null===e||"undefined"==typeof e)for(var i=0;i<document.forms.length;i++)for(var s=document.forms[i],a=0;a<s.elements.length;a++){var r=s[a];if(r.name===t||r.id===t){n=r;break e}}n=e}if(null!==n)try{n.value=p()}catch(o){n.value=escape(o.message)}}catch(c){}},window.formfactor=f}()}})}),define("tpl!components/APPLICATION/tpl/login.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push(""),isLoyalty&&__p.push('<h1 data-translate="label.modal.login.header1"></h1><h3 data-translate="label.modal.login.header2"></h3>'),__p.push('<form class="loginForm '),loggedIn&&__p.push("hidden"),__p.push('">    <fieldset>        ',h.input(config.username,{name:"username",translate:"label.login.username",autocomplete:"off"}),"        ",h.input(config.password,{type:"password",name:"password",translate:"label.login.password",autocomplete:"off"}),'        <div class="text-right">            '),withCancelButton&&__p.push('            <button class="btn btn-default" data-translate="label.login.cancel" type="button" id="cancel"></button>            '),__p.push('            <button class="btn btn-primary" data-translate="label.login.login" id="login" type="submit"></button>        </div>    </fieldset></form>');return __p.join("")}}),define("components/APPLICATION/login",["jquery","backbone","components/APPLICATION/helpers","tpl!./tpl/login.tpl"],function(e,n,r,a){var t=n.Model.extend({validation:{username:{required:!0},password:{required:!0}}}),i={callback:null,isLoyalty:!1};return n.View.extend({events:{"submit .loginForm":"login","click #cancel":"onCancelClick"},initialize:function(e){this.updateValidation(),this.options=_.extend({},i,e||{}),this.render()},onCancelClick:function(){this.trigger("cancel")},render:function(){this.$el.html(a(this.getData())).translate()},getData:function(){var e=Sabre.getComponent("login");return{withCancelButton:this.options.withCancelButton,h:r,loggedIn:e.model.loggedIn,user:e.model.loggedIn,config:e.config,isLoyalty:this.options.isLoyalty}},login:function(a){a.preventDefault();var i=e(a.currentTarget).find("[type=submit]");if(!i.hasClass("busy")){var n=new t,r=this.$el.toJSON();r.element=this.$el.selector,r.templatePart=this.id?"#"+this.id:void 0,n.set(r),n.validate(),n.isValid()&&this.loginRequest(n.get("username"),n.get("password"),i)}},loginRequest:function(r,a,n){Sabre.app.loading(!0,n);var i={transferObjects:[{componentType:"login",actionCode:"login",queryData:{componentId:"login_1",componentType:"login",actionCode:"login",username:r,password:a}}]},t=this;Sabre.router.ajax(i,function(r){r=e.parseJSON(r),"FAILED"!==r.content[0].authenticationResult?"CONFIRMATION_PAGE"===Sabre.router.currentPage?t.handleLoginOnConfirmationPage(r,n):(t.options.callback&&t.options.callback(),location.reload()):(t.$el.find("input").addClass("error"),t.$el.find("input[type=password]").val(""),Sabre.app.loading(!1,n),Sabre.app.modal.simple("label.login.failedAuthentication","label.login.title","label.login.close"),t.clearAdditionalForms())},"landing")},updateValidation:function(){var e=Sabre.getComponent("login");_.extend(t.prototype.validation.username,e.config.validation.userName),_.extend(t.prototype.validation.password,e.config.validation.password)},clearAdditionalForms:function(){"MY_BOOKING_PAGE"===Sabre.router.currentPage&&e("#component-MY_BOOKING_PAGE .pnr-box").find("input").val("")},handleLoginOnConfirmationPage:function(a,i){var r=this,n={loggedIn:!0};_.extend(n,a.content[0]),Sabre.getComponent("login").model=n;var t=e("header #sign-in");t.click(),t.addClass("logged"),t.find(".l2").html(n.user.firstName),t.find(".l2").removeClass("hidden"),t.find(".l3").addClass("hidden"),e(".login-component input").val(""),r.options.callback&&r.options.callback(),Sabre.app.loading(!1,i)}})}),define("tpl!components/TRAVEL_BANK/tpl/index.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div id="travel-bank-component" class="clearfix">    <header>        <a href="#">            <i class="fa fa-angle-double-down"></i>            <span data-translate="label.travelBank.applyTravelBankCredit"></span>        </a>    </header>    <div class="component-content hidden slideDown">        <div class="login hidden">            <p data-translate="label.travelBank.SignInToViewBalance"></p>            <div class="form"></div>        </div>        <div class="data"></div>    </div></div>');return __p.join("")}}),define("tpl!components/TRAVEL_BANK/tpl/travelBank.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push(""),noTravelBank?(__p.push("    "),userFirstName||userLastName?__p.push('        <span class="info" data-translate="label.travelBank.userWithNoTravelBank|',userFirstName,"|",userLastName,'"></span>    '):__p.push('        <span class="info" data-translate="label.travelBank.noTravelBank"></span>    '),__p.push("")):(__p.push('    <div class="layover-container">        <section class="layover-info element-container hidden"></section>    </div>    <div class="row-fluid top-bar">        <div class="span6">            <span class="label clearfix" data-translate="label.travelBank.currentFounds"></span>            <span class="founds">',Sabre.app.getFormattedPrice(model.travelBankCard.availableFunds.amount,model.travelBankCard.availableFunds.currency),'</span>        </div>        <div class="span6 '),0==max&&0==model.travelBankCard.availableFunds.amount&&__p.push(" hidden "),__p.push('">            <div class="label p-r-m clearfix">                <span data-translate="label.travelBank.maximumFounds"></span>                <span class="travel-bank-layover-info">?</span>            </div>            <span class="founds">',Sabre.app.getFormattedPrice(model.travelBankCard.maximumAmountForTrip.amount,model.travelBankCard.maximumAmountForTrip.currency),'</span>        </div>        <div class="span4 tablet-only '),0==max&&__p.push(" hidden "),__p.push('">            <button class="btn btn-primary btn-block apply-funds" data-translate="label.travelBank.applyFunds"></button>        </div>    </div>    '),0!=max?__p.push('        <div class="bottom-bar">            <div class="slider clearfix">                <div class="path"></div>                <div class="amount-holder">                    <div class="amount-label">                        <p data-translate="label.travelBank.currentAmount"></p>                        <p class="amount">',Sabre.app.getFormattedPrice(0,model.travelBankCard.availableFunds.currency),'</p>                    </div>                    <div class="current-amount" data-percent="100"></div>                </div>                <div class="handle-holder">                    <div class="handle" data-percent="0"></div>                </div>            </div>            <div class="row-fluid">                <div class="span6 travel-bank-amount">                    <input type="number" min="0" max="',max,'" value="',max,'">                    <div class="clearfix">                        <span class="label" data-translate="label.travelBank.travelBank"></span>                        <span data-translate="',model.travelBankCard.availableFunds.currency,'" data-airport-format="(%code)"></span>                    </div>                </div>                <div class="span6 cash-due">                    <input type="number" min="',min,'" max="',model.paymentAmount.amount,'" value="',min,'">                    <div class="clearfix">                        <span class="label" data-translate="label.travelBank.cashDue"></span>                        <span data-translate="',model.travelBankCard.maximumAmountForTrip.currency,'" data-airport-format="(%code)"></span>                    </div>                </div>            </div>            <div class="mobile-only">                <button class="btn btn-primary apply-funds" data-translate="label.travelBank.applyFunds"></button>            </div>        </div>    '):(__p.push("        "),model.travelBankCard.availableFunds.amount>0?(__p.push("            "),userFirstName||userLastName?__p.push('                <span class="info" data-translate="label.travelBank.userWithTBNoteligible|',userFirstName,"|",userLastName,'"></span>            '):__p.push('                <span class="info" data-translate="label.travelBank.TBNoteligible"></span>            '),__p.push("        ")):(__p.push("            "),userFirstName||userLastName?__p.push('                <span class="info" data-translate="label.travelBank.userLoggedWithoutFunds|',userFirstName,"|",userLastName,'"></span>            '):__p.push('                <span class="info" data-translate="label.travelBank.loggedWithoutFunds"></span>            '),__p.push("        ")),__p.push("    ")),__p.push("")),__p.push("");return __p.join("")}}),define("tpl!components/TRAVEL_BANK/tpl/_layover.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<header>    <div class="l-title" data-translate="label.travelBank.layoverTitle"></div>    <a class="close-layover" href="#">x</a></header><div class="clearfix">    <p data-translate="label.travelBank.layover.TripFeesText"></p>    <div class="table-data">        <div class="row-fluid">            <div class="span8">                <div class="t-title" data-translate="label.travelBank.layover.YourTrip"></div>            </div>            <div class="span4 text-center">                <div class="t-title" data-translate="label.travelBank.layover.Eligible"></div>            </div>        </div>        '),_.each(model.balanceElements,function(e,t){__p.push('        <div class="row-fluid">            <div class="span8">                <strong data-translate="label.payc.travelBank.overlay.subbalance.',t,'"></strong>                <span class="pull-right text-right">                    ',Sabre.app.getFormattedPrice(e.amount,e.currency),"                </span>                "),e.integerValue!==model.priceElements[t].integerValue&&__p.push('                    <div class="text-right">                        <span data-translate="label.payc.travelBank.overlay.yourItenerary"></span>: ',Sabre.app.getFormattedPrice(model.priceElements[t].amount,model.priceElements[t].currency),"                    </div>                "),__p.push('            </div>            <div class="span4 text-center">                '),__p.push(0==e.integerValue?'                    <span data-translate="label.travelBank.no"></span>                ':'                    <span data-translate="label.travelBank.yes"></span>                '),__p.push("            </div>        </div>        ")}),__p.push('    </div>    <div class="price-data">        <div class="t-title" data-translate="label.travelBank.layover.TotalTravelBankEligible"></div>        <h2>',Sabre.app.getFormattedPrice(model.maximumAmountForTrip.amount,model.maximumAmountForTrip.currency),'</h2>        <br/>        <div class="t-title" data-translate="label.travelBank.RemainingAmountDue"></div>        <h2 class="r-a-d">',Sabre.app.getFormattedPrice(missing,model.availableFunds.currency),"</h2>    </div></div>");return __p.join("")}}),define("components/TRAVEL_BANK/main",["jquery","backbone","components/APPLICATION/login","tpl!./tpl/index.tpl","tpl!./tpl/travelBank.tpl","tpl!./tpl/_layover.tpl"],function(e,n,r,t,a,i){return n.View.extend({events:{"click #travel-bank-component header a":"toggleTravelBank","change .travel-bank-amount input":"changeTravelBankInput","change .cash-due input":"changeCashDueInput","mousedown .slider .handle":"mouseDownSlider","mouseup *":"mouseUpSlider","click .travel-bank-layover-info":"showLayover","click .layover-info a":"closeLayover","click .apply-funds":"applyFunds"},initialize:function(r){var a=this;if(this.options=r,"PURCHASE_PAGE"===this.options.page){var n=Sabre.getComponent("payc");this.model=n.model,e.each(n.config.sections,function(t,e){e.label===n.config.travelBankSectionName&&(a.config=e)})}this.config.enabled&&this.render(t)},getTemplate:function(){var e=this;e.render(t())},render:function(n){var e=this;if(e.travelBankCard=e.model.travelBankCard,e.$el.append(n).translate(),"USER_NOT_LOGGED"===e.travelBankCard.status||"USER_LOGGED_OUT"===e.travelBankCard.status)e.$el.find(".login").removeClass("hidden"),e.login=new r({el:e.$el.find(".form")});else{var t=e.getTravelBankData(e.travelBankCard.status);Sabre.app.loading(!0),e.$el.find(".data").append(a({model:t.model,config:t.config,max:t.max,min:t.min,noTravelBank:t.noTravelBank,userFirstName:t.userFirstName,userLastName:t.userLastName})).translate(),e.$el.find("#travel-bank-component header a").click(),e.$el.find(".data .slider .handle").hammer().bind("panstart",function(t){e.updateCurrentPercent(t)}),e.$el.find(".data .slider .handle").hammer().bind("panstop",function(t){e.updateCurrentPercent(t)}),e.$el.find(".data .slider .handle").hammer().bind("panmove",function(t){e.moveSlider(t)}),e.fillForm(),Sabre.app.loading(!1)}},getTravelBankData:function(n){var r,a,i,e=this,t=Sabre.getComponent("login");if(e.noTravelBank=!1,t&&(r=t.model.user.firstName,a=t.model.user.lastName),e.showTabls=!1,e.model.sections.paypal&&(e.showTabs=!0,e.model.restrictedFOPs))for(i in e.model.restrictedFOPs)"PP"===e.model.restrictedFOPs[i]&&(e.showTabs=!1);return"USER_WITHOUT_TRAVEL_BANK"===n||"TRAVEL_BANK_UNAVAILABLE"===n||e.model.userWithoutTravelBankAccountLoggedBeforePaymentPage?(e.min=0,e.max=0,e.noTravelBank=!0):(e.tripPrice=parseFloat(e.model.paymentAmount.amount),e.maximumAllowed=parseFloat(e.model.travelBankCard.maximumAmountForTrip.amount),e.travelBankFunds=parseFloat(e.model.travelBankCard.availableFunds.amount),e.travelBank=e.maximumAllowed>e.travelBankFunds?e.travelBankFunds:e.maximumAllowed,e.cashDue=Math.round(100*(e.tripPrice-e.travelBank))/100,e.min=e.cashDue,e.max=e.travelBank),e.totalAmount=e.tripPrice,{model:e.model,config:e.config,max:e.max,min:e.min,noTravelBank:e.noTravelBank,userFirstName:r,userLastName:a}},fillForm:function(){var t=this;e.each(t.model.selectedCards,function(n,e){"BT"===e.cardType.code&&(t.$el.find(".travel-bank-amount input").val(e.chargedAmount).change(),t.$el.find(".apply-funds")[0].click())})},toggleTravelBank:function(t){t.preventDefault();var n=e(t.currentTarget);n.parent().next().toggleClass("hidden"),n.toggleClass("active"),this.updateTravelBankInput()},validateData:function(t,e){return e>t.attr("max")?e=t.attr("max"):e<t.attr("min")&&(e=t.attr("min")),e},changeTravelBankInput:function(a){var t=this,n=e(a.currentTarget),r=parseFloat(n.val());isNaN(r)&&(r=0),t.travelBank=t.validateData(n,r),n.val(t.travelBank),t.updateCashInput(),t.updateSlider(),t.checkApplyFundsButton()},changeCashDueInput:function(a){var t=this,n=e(a.currentTarget),r=parseFloat(n.val());isNaN(r)&&(r=0),t.cashDue=t.validateData(n,r),n.val(t.cashDue),t.updateTravelBankInput(),t.updateSlider(),t.checkApplyFundsButton()},updateSlider:function(){var t,e=this,n=e.$el.find(".slider .handle");t=e.tripPrice>e.travelBankFunds?100-e.travelBank/e.travelBankFunds*100:e.cashDue/(e.travelBank+e.cashDue)*100,n.attr("data-percent",t),n.animate({left:t+"%"},750)},updateCashInput:function(){var e=this,t=e.$el.find(".cash-due input"),n=Math.round(100*(e.tripPrice-e.travelBank))/100;e.cashDue=e.validateData(t,n),t.val(e.cashDue)},updateTravelBankInput:function(){var e=this,t=e.$el.find(".travel-bank-amount input"),n=Math.round(100*(e.tripPrice-e.cashDue))/100;e.travelBank=e.validateData(t,n),t.val(e.travelBank)},checkApplyFundsButton:function(){var e=this,t=e.$el.find(".apply-funds");e.appliedAmount===e.travelBank?t.removeClass("btn-primary").addClass("btn-secondary"):t.addClass("btn-primary").removeClass("btn-secondary")},updateIndicator:function(){var e,t=this,n=t.$el.find(".slider .current-amount"),a=t.$el.find(".slider .amount-label"),r=t.$el.find(".slider .amount-label .amount");e=100-t.appliedAmount/t.max*100,a.css(10>e?{"text-align":"left",left:e+"%"}:e>90?{"text-align":"right",left:e-50+"%"}:{"text-align":"center",left:e-25+"%"}),n.attr("data-percent",e),n.css("left",e+"%"),r.html(Sabre.app.getFormattedPrice(t.appliedAmount,t.model.travelBankCard.availableFunds.currency)),r.translate()},updateCurrentPercent:function(t){var n=this;n.currentPercent=parseFloat(e(t.currentTarget).attr("data-percent")||0)},moveSlider:function(r){var t,n=this,a=e(r.currentTarget);t=r.gesture.distance/a.parent().width()*100,2===r.gesture.direction&&(t=-t),t+=n.currentPercent,t>100?t=100:0>t&&(t=0),a.attr("data-percent",t),a.css("left",t+"%"),n.cashDue=n.max-n.max*(100-t)/100,n.travelBank=n.max-n.cashDue,n.updateCashInput(),n.updateTravelBankInput(),n.checkApplyFundsButton()},mouseDownSlider:function(){var n,t=this,r=t.$el.find(".slider .handle");e(window).mousemove(function(e){n=(e.pageX-r.parent().offset().left-15)/r.parent().width()*100,n>100?n=100:0>n&&(n=0),r.attr("data-percent",n),r.css("left",n+"%"),t.cashDue=t.max-t.max*(100-n)/100,t.travelBank=t.max-t.cashDue,t.updateCashInput(),t.updateTravelBankInput(),t.checkApplyFundsButton()})},mouseUpSlider:function(){e(window).unbind("mousemove")},applyFunds:function(i){i.preventDefault(),Sabre.app.loading(!0);var t=this,n=e(".amount-left-to-pay"),r=t.$el.find(".apply-funds"),a={transferObjects:[{componentType:"payc",actionCode:"refreshTravelBank",queryData:{componentType:"payc",actionCode:"refreshTravelBank",queryData:null,travelBankPaymentDetails:{chargedAmount:t.travelBank.toString(),dueAmountLeft:t.totalAmount,applyPressed:!0}}}]};r.attr("data-translate","label.travelBank.updateFunds"),r.html(Sabre.translations[Sabre._config.global.language][r.attr("data-translate")]),r.removeClass("btn-primary").addClass("btn-secondary"),Sabre.router.ajax(a,function(r){t.appliedAmount=parseFloat(r.content[0].travelBankPaymentDetails.chargedAmount),t.updateIndicator(),parseFloat(r.content[0].travelBankPaymentDetails.dueAmountLeft)>0?(n.find(".amount").attr("data-amount",parseFloat(r.content[0].travelBankPaymentDetails.dueAmountLeft)),n.find(".amount").html(Sabre.app.getFormattedPrice(parseFloat(r.content[0].travelBankPaymentDetails.dueAmountLeft),t.model.travelBankCard.maximumAmountForTrip.currency)),n.translate(),e("#purchase-form .payc-info").removeClass("hidden"),parseFloat(t.travelBank)>0?(e("#payc-tabs #payment-type-card").click(),e("#payc-tabs").addClass("hidden")):t.showTabls&&e("#payc-tabs").removeClass("hidden"),Sabre.app.scrollTo(n.parent().offset().top)):e("#purchase-form .payc-info").addClass("hidden"),a={transferObjects:[{componentType:"payc",actionCode:"calculateDue",queryData:{componentType:"payc",actionCode:"calculateDue",charged:[t.travelBank.toString()],cardTypes:["BT"],dueWithInsurance:[],dueWithoutInsurance:[]}}]},Sabre.router.ajax(a,function(n){t.totalAmount=n.content[0].total;var r=e('*[name^="selectedCards[0]"]');e.each(r,function(n,t){e(t).attr("name",e(t).attr("name").replace(0,1))}),e('input[name="selectedCards[1].paymentAmount.amount"]').val(parseFloat(t.totalAmount)),Sabre.app.loading(!1)})})},showLayover:function(){var e=this,t=e.$el.find(".layover-info");Sabre.app.loading(!0);var n={transferObjects:[{componentType:"payc",actionCode:"refreshTravelBank",queryData:{componentId:"payc_1",componentType:"payc",actionCode:"refreshTravelBank",queryData:null,travelBankPaymentDetails:{}}}]};Sabre.router.ajax(n,function(n){var r=n.content[0];t.append(i({model:r.travelBankPaymentDetails,missing:e.min})).translate(),t.removeClass("hidden"),Sabre.app.loading(!1)})},closeLayover:function(e){e.preventDefault(),this.$el.find(".layover-info").addClass("hidden")}})}),define("models/Payment",["backbone"],function(e){return e.Model.extend()}),define("tpl!components/payc/tpl/_credit_cards.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push(""),_.each(creditCards,function(e){__p.push("    "),-1===restrictedFops.indexOf(e.code)&&__p.push('        <li>            <input id="credit-card-',e.code,'" type="radio" name="payment-method" value="',e.code,'" />            <label for="credit-card-',e.code,'" class="',e.code,'-card"></label>        </li>    '),__p.push("")}),__p.push("");return __p.join("")}}),define("tpl!components/payc/tpl/_secure_images.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push(""),$.each(secureImages,function(t,e){__p.push('    <div class="secure-image">        <img id="',e,'" alt="',e,'" src="',Sabre.getPath(),"/images/secure/",e,'.png">    </div>')}),__p.push("");return __p.join("")}}),define("tpl!components/payc/tpl/_payment_details.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push("",h.input({name:"selectedCards["+cardIndex+"].selected",type:"hidden",defaultValue:!0}),"",h.input({name:"selectedCards["+cardIndex+"].remote",type:"hidden",defaultValue:!1}),"",h.input({name:"selectedCards["+cardIndex+"].cardType.code",type:"hidden",defaultValue:selectedCode}),"",h.input({name:"selectedCards["+cardIndex+"].paymentAmount.amount",type:"hidden",defaultValue:amount}),"",h.input({name:"selectedCards["+cardIndex+"].paymentAmount.currency",type:"hidden",defaultValue:currency}),"",h.input({name:"selectedCards["+cardIndex+"].paymentAmount.currencyCode",type:"hidden",defaultValue:currencyCode}),'<div class="credit-card-basic">    '),card&&card.configuration&&(__p.push("        "),card.configuration.cardNumberEnabled&&__p.push("        ",h.input({name:"selectedCards["+cardIndex+"].cardNumber",validation:"cardNumber",translate:"label.payc.details.cardNumber",type:"tel",autocomplete:"off"}),"        "),__p.push("        "),card.configuration.nameOnCardEnabled&&__p.push("        ",h.input({name:"selectedCards["+cardIndex+"].nameOnCard",validation:"nameOnCard",translate:"label.payc.details.holderNameOnCard",autocomplete:"off"}),"        "),__p.push("    ")),__p.push('</div><div class="credit-card-expiration">    '),card&&card.configuration&&(__p.push("        "),card.configuration.expDateEnabled&&__p.push("        ",h.date(config.ccExpirationDate,{name:"selectedCards["+cardIndex+"].expDate",validation:"creditCardExpiry",translate:"label.payc.details.expiration"}),"        "),__p.push("        "),card.configuration.cvcNumberEnabled&&__p.push("        ",h.input({name:"selectedCards["+cardIndex+"].cvcNumber",validation:"cvc",translate:"label.payc.details.cvc",type:"tel",autocomplete:"off"}),"        "),__p.push("    ")),__p.push("</div>"),config.billingAddressEnabled&&(__p.push('<div class="credit-card-billing-address">    <label data-translate="label.payc.details.billingAddress.title"></label>    '),card&&card.configuration&&card.configuration.billingData&&(__p.push("        "),card.configuration.billingData.street1Enabled&&__p.push("        ",h.input({name:"selectedCards["+cardIndex+"].billingData.street1",validation:"street",translate:"label.payc.details.street"}),"        "),__p.push("        "),card.configuration.billingData.street2Enabled&&__p.push("        ",h.input({name:"selectedCards["+cardIndex+"].billingData.street2",validation:"street2",translate:"label.payc.details.street2"}),"        "),__p.push("        "),card.configuration.billingData.cityEnabled&&__p.push("        ",h.input({name:"selectedCards["+cardIndex+"].billingData.city",validation:"city",translate:"label.payc.details.city"}),"        "),__p.push("        "),card.configuration.billingData.provinceEnabled&&__p.push("        ",h.select(config.province,{name:"selectedCards["+cardIndex+"].billingData.province",validation:"province",translate:"State."}),"        "),__p.push("        "),card.configuration.billingData.zipCodeEnabled&&__p.push("        ",h.input({name:"selectedCards["+cardIndex+"].billingData.zipCode",validation:"zipCode",translate:"label.payc.details.postalCode"}),"        "),__p.push("        "),card.configuration.billingData.countryEnabled&&__p.push("        ",h.select(config.country,{name:"selectedCards["+cardIndex+"].billingData.country",validation:"country",translate:"Country."}),"        "),__p.push("    ")),__p.push("</div>")),__p.push("");
return __p.join("")}}),define("countries",[],function(){window.Sabre.selectOptions=window.Sabre.selectOptions||{},window.Sabre.selectOptions.countriesOptions={"":"",AF:"Afghanistan",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Bolivia",BA:"Bosnia/Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",VG:"British Virgin Islands",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos Keeling Islands",CO:"Colombia",KM:"Comoros Islands",CD:"Congo",CG:"Congo Republic",CK:"Cook Islands",CR:"Costa Rica",HR:"Croatia",CU:"Cuba",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",TP:"East Timor",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GN:"Guinea",GW:"Guinea Bissau",GY:"Guyana",HT:"Haiti",HM:"Heard & McDonald Islands",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Iran",IQ:"Iraq",IE:"Ireland",IL:"Israel",IT:"Italy",CI:"Ivory Coast",JM:"Jamaica",JP:"Japan",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kirbati",KW:"Kuwait",KG:"Kyrgystan",LA:"Laos",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libyan Arab Jamahiriya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macau",MK:"Macedonia (F.Y.R.O.M)",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Micronesia",MD:"Moldova",MC:"Monaco",MN:"Mongolia",MS:"Montserrat",MA:"Morocco",ME:"Montengro",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",AN:"Netherlands Antilles",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",KP:"North Korea",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Reunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles Islands",SL:"Sierra Leone",SG:"Singapore",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Island",SO:"Somalia",ZA:"South Africa",KR:"South Korea",ES:"Spain",LK:"Sri Lanka",SH:"St. Helena",KN:"St. Kitts and Nevis",LC:"St. Lucia",PM:"St. Pierre and Miquelon",VC:"St. Vincent and Grenadines",SD:"Sudan",SR:"Suriname",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syria",TW:"Taiwan",TJ:"Tajikistan",TZ:"Tanzania",TH:"Thailand",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UM:"U.S. Minor Outlying Islands",VI:"U.S. Virgin Islands",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VA:"Vatican City State",VE:"Venezuela",VN:"Vietnam",WF:"Wallis and Futuna Islands",EH:"Western Sahara",WS:"Western Samoa",YE:"Yemen Republic",ZR:"Zaire",ZM:"Zambia",ZW:"Zimbabwe"}}),define("components/payc/payc_paymentMultiFop",["jquery","views/Component","models/Component","models/EventBus","views/controls/loyalty-payment","components/APPLICATION/fraudnet","components/APPLICATION/helpers","components/TRAVEL_BANK/main","models/Payment","logger","tpl!./tpl/_credit_cards.tpl","tpl!./tpl/_secure_images.tpl","tpl!./tpl/_payment_details.tpl","countries"],function(e,a,r,n,l,i,p,o,t,d,u,c,s){return a.extend({events:{"change input[name=payment-method]":"changePaymentMethod","change input[name=payment]":"togglePriceMethod","click .show-payc-price-details":"togglePrices",'change select[name="selectedCards[0].billingData.country"]':"changeCountry"},paypalSelected:!1,initialize:function(e){a.prototype.initialize.call(this,e),this.listenToOnce(Sabre.eventBus,n.PAGE_LOADED,this.pageLoadHandler.bind(this)),this.listenTo(Sabre.eventBus,n.LOCK_FARE_APPLIED,this.fareLockApplied.bind(this)),this.payc=this.components.get(r.PAYC)},render:function(){var e=this;return a.prototype.render.apply(this,arguments).then(function(){e.mapControls(),e.isRBESelected()&&(e.loyaltyPayment=new l(_.extend({},e.options,{el:e.controls.loyaltyPaymentContainer})),e.loyaltyPayment.render(),e.loyaltyPayment.on("applied",e.onLoyaltyApplied.bind(e)),e.controls.loyaltyPaymentContainer.removeClass("hidden"))})},onLoyaltyApplied:function(){Sabre.app.storage().set("loyalty-applied",!0)},pageLoadHandler:function(){this.fraudnet=new i({el:this.$el.find("#fraudnet")}),this.creditCards=this.$el.find("#credit-cards"),this.paymentDetails=this.$el.find("#payment-details"),this.secureImages=this.$el.find("#secure-images"),this.fillCreditCards(),this.getSecureImages(),this.fillForm(),this.showTabsIfNecessary(),this.showTravelBank(),this.isRBESelected()&&Sabre.app.storage().get("loyalty-applied")&&(Sabre.app.scrollTo(this.find("#purchase-form").offset().top),Sabre.app.storage().set("loyalty-applied",void 0))},fareLockApplied:function(){this.model=Sabre.getComponent("payc").model,this.fillCreditCards(),this.showTabsIfNecessary(),this.paymentDetails.html("")},fillCreditCards:function(){var e=this;e.creditCards.html(u({creditCards:e.model.sections.creditCardTypes,restrictedFops:e.model.restrictedFOPs})).translate()},showTravelBank:function(){var e=Sabre.getComponent("payc");e.model.sections.travelBankCardTypes&&(this.TravelBank=new o({el:this.$el.find(".payc-TRAVELBANK"),page:"PURCHASE_PAGE"}))},isRBESelected:function(){var e=this.components.get(r.PAYC);return e.isRBESelected()&&this.components.get(r.PAYMENT_SLIDER)},getData:function(){var e=Sabre.getComponent("payc");this.model=e.model,this.config=e.config;var t={};t[this.model.paymentAmount.currencyCode]=this.model.paymentAmount;var n=!1;return"object"==typeof this.model.amountToRefund&&null!==this.model.amountToRefund&&(n=!0),{id:this.getId(),totalPrice:[{pricesPerCurrency:t}],paypalLinks:this.config.paypalLinks,travelBankEnabled:null!==this.model.travelBankCard&&null!==this.config.travelBankSectionName,paymentRequired:this.model.paymentRequired,paymentAmount:this.model.paymentAmount,refund:n,checkboxConfirmationEnabled:e.config.checkboxConfirmationEnabled,isRBESelected:this.isRBESelected()}},getSecureImages:function(){this.secureImages.html(c({secureImages:this.config.secureImages})).translate()},fillForm:function(){var t=_.flattenKeys(this.model.selectedCards,"selectedCards"),n=this;if(0!==this.model.selectedCards.length){var e=this.model.selectedCards[0].cardType.code;if("BT"===e){if(this.savedTravelBank=!0,!(this.model.selectedCards.length>1))return;e=this.model.selectedCards[1].cardType.code}this.$el.find("#credit-card-"+e).attr("checked",!0),this.changePaymentMethod(e,function(){_.each(t,function(t,e){null!==t&&""!==t&&0!==t&&-1===e.indexOf(".cardNumber")&&-1===e.indexOf(".cvcNumber")&&-1===e.indexOf(".paymentAmount")&&n.$el.find("input[name='"+e+"'], select[name='"+e+"']").val(t)})})}},showTabsIfNecessary:function(){if(this.model.sections.paypal){var e,t=!0;if(this.model.restrictedFOPs)for(e in this.model.restrictedFOPs)"PP"===this.model.restrictedFOPs[e]&&(t=!1);if(t){var n=this.$el.find("#payc-tabs");n.removeClass("hidden")}}},togglePriceMethod:function(n){var t=e(n.currentTarget).val();this.$el.find(".payc-type:not(.payc-TRAVELBANK)").addClass("hidden"),this.$el.find(".payc-"+t).removeClass("hidden"),this.updateDynamicInfo(t)},changePaymentMethod:function(a,n){var t=this,i=!1,r=_.isObject(a)?e(a.currentTarget).val():a,o=!1,l={h:p,selectedCode:r,card:t.getSelectedCardConfig(r),config:t.config,amount:parseFloat(t.$el.find(".amount-left-to-pay .amount").attr("data-amount")),currency:t.model.paymentAmount.currency,currencyCode:t.model.paymentAmount.currencyCode,cardIndex:this.savedTravelBank?1:0};e.each(Sabre._config.sat.formsOfPaymentConfiguration.cardsConfig,function(e,t){return r===e?(i=t.configuration.fraudCheckEnabled,!1):void 0}),i&&Sabre.getComponent("payc").config.fraudMessagePresented&&t.$el.find("#fraudmsg").removeClass("hidden"),e.each(t.$el.find("#payment-details input:not([type=hidden])"),function(n,t){""!==e(t).val()&&(o=!0)}),o?Sabre.app.modal.show('<p class="element-container" data-translate="label.payc.fopChangePopup.message"></p>',{buttons:[{name:"label.popup.sessionTimeoutWarning.cancel",handler:function(){t.$el.find("#credit-card-"+t.previousPaymentMethod).prop("checked",!0),Sabre.app.modal.close()}},{name:"label.popup.sessionTimeout.okBtn",handler:function(){t.paymentDetails.html(s(l)).translate(),n&&n(),Sabre.app.modal.close()}}]}):(t.previousPaymentMethod=r,t.paymentDetails.html(s(l)).translate(),n&&n()),Sabre.app.scrollTo(this.$el.find('*[data-translate="label.payc.tapCard"]').offset().top)},changeCountry:function(n){var t=this.$el.find('select[name="selectedCards[0].billingData.province"]');t&&(Sabre.getComponent("payc").config.country.defaultValue===e(n.currentTarget).val()?t.attr("disabled",!1):(t.val(t.find("option[value=NA]").length?"NA":t.find("option:first").val()),t.attr("disabled",!0)))},getSelectedCardConfig:function(n){var e,t;for(e=0,t=this.model.sections.creditCardTypes.length;t>e;e++)if(this.model.sections.creditCardTypes[e].code===n)return this.model.sections.creditCardTypes[e];return null},getNextPageData:function(n){var r=this,l=Sabre.getComponent("payc").model,a=!1;if(l.paymentRequired){if(this.paypalSelected)return this.getPayPalData(n);if(this.$el.find("#purchase-form .payc-info").hasClass("hidden"))return n["travelBankCard.cardType.code"]="BT",n["travelBankCard.selected"]=!0,!0;if(!this.$el.find("input[name=payment-method]").is(":checked"))return Sabre.app.modal.simple("flow.message.validation.payment.required.message","flow.message.validation.payment.required.title"),!1;var o=this.$el.find("input[name=payment-method]:checked").val(),u=this.getSelectedCardConfig(o).configuration,c=this.$el.toJSON("data-validation");this.updateValidation(u),e.each(Sabre._config.sat.formsOfPaymentConfiguration.cardsConfig,function(e,t){return o===e?(a=t.configuration.fraudCheckEnabled,!1):void 0}),a&&(new i).collectJSCData();var s=new t;return s.set(c),s.validate(),s.isValid()?(_.extend(n,this.$el.toJSON()),a&&(n.componentTypes=["payc","fraudnet"]),parseFloat(r.$el.find(".amount-left-to-pay .amount").attr("data-amount"))===parseFloat(r.model.paymentAmount.amount)||r.model.bnplchosen||(n["travelBankCard.cardType.code"]="BT",n["travelBankCard.selected"]=!0),!0):(Sabre.app.modal.simple("validation.overlay.message"),this.$el.find('*[name="selectedCards[0].cardNumber"]').val(""),this.$el.find('*[name="selectedCards[0].cvcNumber"]').val(""),this.$el.find('*[name="selectedCards[1].cardNumber"]').val(""),this.$el.find('*[name="selectedCards[1].cvcNumber"]').val(""),!1)}return _.extend(n,this.$el.toJSON()),!0},getPayPalData:function(e){return e.payment_method="",e["selectedCards[0].selected"]=!0,e["selectedCards[0].remote"]=!1,e["selectedCards[0].paymentAmount.amount"]=parseFloat(this.$el.find(".amount-left-to-pay .amount").attr("data-amount")),e["selectedCards[0].paymentAmount.value"]=parseFloat(this.model.paymentAmount.amount),e["selectedCards[0].paymentAmount.currency"]=this.model.paymentAmount.currency,e["selectedCards[0].paymentAmount.currencyCode"]=this.model.paymentAmount.currencyCode,e["selectedCards[0].cardType.code"]="PP",e["selectedCards[0].cardType.name"]="PayPal",e["selectedCards[0].sectionName"]="paypal",!0},updateValidation:function(e){var n,a,r,i={street:"street1",cvc:"cvcNumber",creditCardExpiry:"expDate"};t.prototype.validation=e.validation;for(n in t.prototype.validation)t.prototype.validation.hasOwnProperty(n)&&(r=(void 0===i[n]?n:i[n])+"Required",a=void 0===e[r]?e.billingData[r]:e[r],void 0!==a&&(t.prototype.validation[n].required=a));t.prototype.validation.country={required:e.billingData.countryRequired},t.prototype.validation.street2={required:e.billingData.street2Required}},updateDynamicInfo:function(r){var e,t;switch(r){case"CARD":e="label.payc.fareText",t="label.sbmt.submitPayment",this.paypalSelected=!1;break;case"PAYPAL":e="label.payc.fareText.paypal",t="label.sbmt.submitPayment.paypal",this.paypalSelected=!0}Sabre.eventBus.trigger(n.UPDATE_FARE_RULES_TEXT,e),Sabre.eventBus.trigger(n.UPDATE_SUBMIT_TEXT,t)}})}),define("tpl!components/payc/tpl/payc_paymentMultiFop.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push(""),isRBESelected?__p.push('<div class="element-container payc-info loyalty clearfix hidden" id="',id,'-loyalty-payment-container"></div>'):paymentRequired&&(__p.push('<div class="element-container payc-info travel-bank clearfix '),travelBankEnabled||__p.push(" hidden "),__p.push('">    <h1 data-translate="label.payc.AddPaymentInformation" class="payment-title"></h1>    <div class="options">        <div class="payc-type payc-TRAVELBANK"></div>    </div></div>')),__p.push('<form id="purchase-form">    <div class="element-container payc-info clearfix">        '),paymentRequired&&(__p.push('        <h1 data-translate="label.payc.PaymentMethod" class="payment-title"></h1>        <div class="amount-left-to-pay">            <span data-translate="label.payc.AmountLeftToPay"></span> <span data-amount="',paymentAmount.amount,'"                                                                            class="amount">',Sabre.app.getFormattedPrice(paymentAmount.amount,paymentAmount.currency),'</span>        </div>        <div id="payc-tabs" class="r-s clearfix hidden">            <div class="radio-switch clearfix">                <div>                    <input type="radio" name="payment" id="payment-type-card" value="CARD" checked="checked"/>                    <label for="payment-type-card" class="gradient-info"                           data-translate="label.confc.paymenttype.creditcard"></label>                </div>                <div>                    <input type="radio" name="payment" id="payment-type-paypal" value="PAYPAL"/>                    <label for="payment-type-paypal" class="gradient-info"                           data-translate="label.confc.paymenttype.paypal"></label>                </div>            </div>        </div>        <div class="payc-CARD payc-type">            <div class="amount-to-be-charged"></div>            <p data-translate="label.payc.tapCard"></p>            <ul id="credit-cards"></ul>            <div id="fraudmsg" class="hidden"><span data-translate="label.payc.fraudMessage"></span></div>            <div id="payment-details" class="element-container"></div>        </div>        <div class="payc-type payc-PAYPAL hidden">            <div class="paypal-content">                <div class="paypal-card"/>                <div>                    <span data-translate="label.payc.paypal.marketingText"></span>                </div>                '),paypalLinks&&(__p.push('                <div class="fop-paypal-links">                    '),_.each(paypalLinks,function(e){__p.push("                    "),e.hidden||(__p.push('                    <i class="fa fa-question"></i>                    <a data-translate="',e.name,'" href="',e.href,'"                            '),e.openInNewWindow&&__p.push('                       target="_blank"                            '),__p.push("                            ></a>                    ")),__p.push("                    ")}),__p.push("                </div>                ")),__p.push("            </div>            <hr/>        </div>        ")),__p.push('    </div>    <div id="secure-images" class="element-container '),paymentRequired||__p.push(" hidden "),__p.push('"></div></form><div id="fraudnet"></div>');return __p.join("")}}),define("components/paymentsummary/paymentsummary",["views/Component","jquery","models/Price"],function(e,t,n){return e.extend({getData:function(){var e,r=this,t=Sabre.getComponent("simplepayment")?Sabre.getComponent("simplepayment").model:null,a=null!==t&&null!==t.amountToRefund&&t.amountToRefund.notZero;return e={reloc:Sabre.getComponent("pnrinfo").model.reloc,totalPaid:this.model.totalPrice?this.model.totalPrice.priceAlternatives:null,favoritesEnabled:Sabre._config.sat.favoritesEnabled,payments:null,confirmationInfoLabel:"flightExchangeSearch"===Sabre.router.flow?"label.pnrinfo.exchangeconfirmation.Info":"label.pnrinfo.confirmationInfo.info",refund:null,onHold:this.model.onHold,P:n},"EVEN_EXCHANGE"!==this.model.reissueType&&null!==this.model.payments&&this.model.payments.length>0&&_.extend(e,{payments:this.model.payments}),a&&null!==t&&_.extend(e,{refund:t}),this.model.onHold&&_.extend(e,{lockTime:r.getLockedTime(),amountDue:Sabre.app.getPrice(this.model.totalDue.priceAlternatives)}),e},getLockedTime:function(){var n=Sabre.getComponent("flomes"),e={fieldTypes:["weeks","days","hours","minutes"],values:[]};return t.each(n.model.messages,function(n,t){return"bnplConfirmationSuccess"===t.id&&t.additionalInfo[0]?(e.values=t.additionalInfo[0],e):void 0}),e}})}),define("components/paymentsummary/paymentsummary_confirmation",["components/paymentsummary/paymentsummary"],function(e){return e.extend({})}),define("tpl!components/paymentsummary/tpl/paymentsummary_confirmation.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="element-container">    <p class="confirmation" data-translate="',confirmationInfoLabel,'"></p></div>');return __p.join("")}}),define("components/paymentsummary/paymentsummary_details",["components/paymentsummary/paymentsummary"],function(e){return e.extend({})}),define("tpl!components/paymentsummary/tpl/paymentsummary_details.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="element-container">    <h1 class="trip-details" data-translate="'),__p.push(onHold?"label.payc.LockedTripDetails":"label.payc.TripDetails"),__p.push('"></h1></div>');return __p.join("")}}),define("components/paymentsummary/paymentsummary_empty",["components/paymentsummary/paymentsummary"],function(e){return e.extend({})}),define("tpl!components/paymentsummary/tpl/paymentsummary_empty.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push("<!-- added empty file to avoid error on paymentsummary component -->");return __p.join("")}}),define("components/paymentsummary/paymentsummary_lock",["components/paymentsummary/paymentsummary"],function(e){return e.extend({})}),define("tpl!components/paymentsummary/tpl/paymentsummary_lock.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push(""),onHold&&__p.push('    <div class="myb-link element-container">        <h1 data-translate="label.pnrinfo.myb"></h1>        <a href="#myb">            <span class="block">                <i class="fa fa-briefcase"></i>            </span> - <span data-translate="label.pnrinfo.myb"></span>        </a>    </div>'),__p.push("");return __p.join("")}}),define("components/paymentsummary/paymentsummary_myb",["views/Component","jquery"],function(e,t){var n=function(n){var i,e,o,r,l,s=[],u=[],a=[];for(e=0,o=n.length;o>e;e++)if("CREDIT_CARD"===n[e].paymentType){for(i=!1,r=0,l=a.length;l>r;r++)if(n[e].cardType===a[r].cardType&&n[e].cardNumber===a[r].cardNumber){i=!0;break}i||(s.push(n[e]),a.push({cardType:n[e].cardType,cardNumber:n[e].cardNumber}))}else-1===t.inArray(n[e].paymentType,u)&&(s.push(n[e]),u.push(n[e].paymentType));return s};return e.extend({events:{"click #continueWithBooking":"continueOnHold"},getData:function(){var e=Sabre.getComponent("pnrinfo");return{totalPrice:this.model.totalPrice.priceAlternatives,payments:n(this.model.payments),pnr:e.model.reloc,lockedFareTime:e.model.expiryTime,isOnHold:this.model.onHold}},continueOnHold:function(e){e.preventDefault(),Sabre.router.flow="onhold",Sabre.router.loadPage({viewReloc:Sabre.getComponent("pnrinfo").model.reloc,sourcePage:Sabre.router.baseUrl+"viewitinerary.html?reloc="+Sabre.getComponent("pnrinfo").model.reloc},void 0,!0)}})}),define("tpl!components/paymentsummary/tpl/paymentsummary_myb.tpl",function(){return function(obj){var __p=[];with(obj||{}){if(__p.push(""),isOnHold&&!$.isEmptyObject(lockedFareTime))__p.push('    <h1 class="lock-header" data-translate="label.bnpl.reviewLockedHeader"></h1>    <i class="fa fa-exclamation"></i><h4 class="lock-header-info" data-translate="label.bnpl.reviewLockedHeaderInfo"></h4>    <div class="clearfix">&nbsp;</div>    <div class="sp12">        <div class="pnr-info">            <div class="confirmation-code">                <div data-translate="label.pnrinfo.confirmationInfo.code"></div>                <span class="code-container"><strong>',pnr,'</strong></span>            </div>            <div class="lock-time">                <div class="icon">                    <i class="fa fa-clock-o"></i>                </div>                <div class="text">                    <div data-translate="label.pnrinfo.confirmationInfo.lockTime"></div>                    <span class="lock-time-container">                        '),$.each(lockedFareTime,function(t,e){__p.push("                            "),e&&0!==e&&(__p.push("                                "),parseInt(lockedFareTime.days,10)>0||parseInt(lockedFareTime.hours,10)>0?(__p.push("                                    "),"seconds"!==t&&__p.push("                                        ",e,' <span data-translate="label.bnpl.common.',t,'"></span>                                    '),__p.push("                                ")):__p.push("                                        ",e,' <span data-translate="label.bnpl.common.',t,'"></span>                                '),__p.push("                            ")),__p.push("                        ")}),__p.push('                    </span>                </div>            </div>            <div class="amount-due">                <div class="icon">                    <i class="fa fa-usd"></i>                </div>                <div class="text">                    <div data-translate="label.pnrinfo.confirmationInfo.amountDue"></div>                    <span class="amount-due-container">',Sabre.app.getPrice(totalPrice),'</span>                </div>            </div>            <div class="lock-info">                <span data-translate="label.pnrinfo.confirmationInfo.lockInfo"></span>            </div>            <div class="pull-right">                <span class="book-info">Ready to book?</span>                <button id="continueWithBooking" class="btn-primary btn-large"><span class="save" data-translate="label.bnpl.button.continueToBooking" ></span></button>            </div>            <div class="clearfix"></div>        </div>    </div>');else{if(__p.push('<h1 class="element-container" data-translate="label.flightsdetails.tripDetails"></h1><div class="trip-details element-container">    <div class="row-fluid">        <div class="span6">            <span data-translate="label.mytrips.reservation.title"></span>            <strong>',pnr,'</strong>        </div>        <div class="span6">            '),totalPrice.length){if(__p.push('                <span>                    <span data-translate="label.flightsdetails.amountCharged"></span>                    '),payments.length>0){__p.push("                    ");var paymentsInfo="";__p.push("                    "),_.each(payments,function(e){__p.push("                        "),"CREDIT_CARD"===e.paymentType?(__p.push("                            "),paymentsInfo+='<span data-translate="creditCard.'+e.cardType+'"></span> '+e.cardNumber.substr(-4)+", ",__p.push("                        ")):(__p.push("                            "),paymentsInfo+='<span data-translate="FormOfPayment.'+e.paymentType+'"></span>, ',__p.push("                        ")),__p.push("                    ")}),__p.push("                    (",paymentsInfo.slice(0,-2),")                    ")}__p.push("                </span>                <strong>",Sabre.app.getPrice(totalPrice),"</strong>            ")}__p.push("        </div>    </div></div>")}__p.push("")}return __p.join("")}}),define("components/paymentsummary/paymentsummary_paid",["components/paymentsummary/paymentsummary"],function(e){return e.extend({})}),define("tpl!components/paymentsummary/tpl/paymentsummary_paid.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="element-container">    '),payments&&payments.length&&(__p.push('    <div id="total-paid" class="clearfix">        <div id="total-amount">            '),$.each(payments,function(t,e){__p.push('            <div class="row-fluid">                <div class="span12">                    <p class="charge-info">                        ',P.format(e.prices.priceAlternatives),'                        <span data-translate="label.paymentsummary.confirmationInfo.charge"></span>                        '),"CREDIT_CARD"===e.paymentType?__p.push('                        <span data-translate="creditCard.',e.cardType,'"></span>                        *',e.cardNumber.substr(-4),"                        "):(__p.push('                        <span data-translate="FormOfPayment.',e.paymentType,'"></span>                        '),e.cardNumber&&__p.push("                        *",e.cardNumber.substr(-4),"                        "),__p.push("                        ")),__p.push("                    </p>                </div>            </div>            ")}),__p.push("        </div>    </div>    ")),__p.push("    "),refund&&__p.push('    <div id="total-paid" class="clearfix">        <div id="total-amount" class="row-fluid">            <div class="span6">                <span data-translate="label.cancel.RefundAmount"></span>            </div>            <div class="span6 text-right">                ',P.formatSimple(refund.amountToRefund.amount,refund.amountToRefund.currency.code),"            </div>        </div>    </div>    "),__p.push("</div>");return __p.join("")}}),define("components/paymentsummary/paymentsummary_paymentBNPL",["components/paymentsummary/paymentsummary"],function(e){return e.extend({})}),define("tpl!components/paymentsummary/tpl/paymentsummary_paymentBNPL.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="element-container">    <h1 class="lock-header" data-translate="label.pnrinfo.fareLockedHeader"></h1>    <div class="lock-rules">        <i class="fa fa-lock"></i>        <span data-translate="label.pnrinfo.lockConfirmation"></span>    </div>    <div class="sp12">        <div class="pnr-info">            <div class="confirmation-code">                <div data-translate="label.pnrinfo.confirmationInfo.code"></div>                <span class="code-container">',reloc,'</span>            </div>            <div class="lock-time">                <div class="icon">                    <i class="fa fa-clock-o"></i>                </div>                <div class="text">                    <div data-translate="label.pnrinfo.confirmationInfo.lockTime"></div>                    <span class="lock-time-container">                        '),$.each(lockTime.fieldTypes,function(t,e){__p.push("                            "),lockTime.values[e]&&0!==lockTime.values[e]&&__p.push("                                ",lockTime.values[e],' <span data-translate="label.bnpl.common.',e,'"></span>                            '),__p.push("                        ")}),__p.push('                    </span>                </div>            </div>            <div class="amount-due">                <div class="icon">                    <i class="fa fa-usd"></i>                </div>                <div class="text">                    <div data-translate="label.pnrinfo.confirmationInfo.amountDue"></div>                    <span class="amount-due-container">',amountDue,'</span>                </div>            </div>            <div class="lock-info">                <span data-translate="label.pnrinfo.confirmationInfo.lockInfo"></span>            </div>        </div>    </div></div>');return __p.join("")}}),define("models/Flight",["require","./Price","./Model"],function(t){var r=t("./Price"),n=t("./Model"),e=n.extend();return e.prototype.initialize=function(){n.prototype.initialize.apply(this,arguments),this.id||_.isEmpty(this.get("itineraryPartData"))||(this.id=e.formUniqueId(this.get("itineraryPartData")))},e.formUniqueId=function(e){var t=[];return _.isEmpty(e.aircraftType)||t.push(e.aircraftType.join("")),_.isEmpty(e.airlineCodes)||t.push(e.airlineCodes.join("")),_.isEmpty(e.operatingCarrier)||t.push(e.operatingCarrier.join("")),_.isEmpty(e.departureCodes)||t.push(e.departureCodes.join("")),_.isEmpty(e.arrivalCodes)||t.push(e.arrivalCodes.join("")),_.isEmpty(e.departureDate)||t.push(Date.parse(e.departureDate).valueOf()),_.isEmpty(e.arrivalDate)||t.push(Date.parse(e.arrivalDate).valueOf()),_.isEmpty(e.flightNumber)||t.push(e.flightNumber.join("")),_.isEmpty(e.numberOfStops)||t.push(e.numberOfStops),_.isEmpty(e.bookingClass)||t.push(e.bookingClass),_.isEmpty(e.brandId)||t.push(e.brandId),_.isEmpty(e.classOfService)||t.push(e.classOfService.join("")),t.join("").replace(/[^\w]/g,"")},e.prototype.getPrice=function(r){var t,e=this,n=0;if(e&&e.attributes&&e.attributes._price){if(r&&_.isObject(e.attributes._price)&&e.attributes._price[1]&&e.attributes._price[1].pricesPerCurrency&&(t=_.keys(e.attributes._price[1].pricesPerCurrency)[0],t&&e.attributes._price[1].pricesPerCurrency[t]&&e.attributes._price[1].pricesPerCurrency[t].amount&&(n+=1e6*parseFloat(e.attributes._price[1].pricesPerCurrency[t].amount)),t=_.keys(e.attributes._price[1].pricesPerCurrency)[1],t&&e.attributes._price[1].pricesPerCurrency[t]&&e.attributes._price[1].pricesPerCurrency[t].amount))return n+=parseFloat(e.attributes._price[1].pricesPerCurrency[t].amount);if(!(_.isObject(e.attributes._price)&&e.attributes._price[0]&&e.attributes._price[0].pricesPerCurrency))return parseFloat(e.attributes._price);if(t=_.keys(e.attributes._price[0].pricesPerCurrency)[0],t&&e.attributes._price[0].pricesPerCurrency[t]&&e.attributes._price[0].pricesPerCurrency[t].amount)return parseFloat(e.attributes._price[0].pricesPerCurrency[t].amount)}return 0},e.prototype.getArrivalDate=function(){return new Date(this.attributes.itineraryPartData.arrivalDate)},e.prototype.getDepartureDate=function(){return new Date(this.attributes.itineraryPartData.departureDate)},e.prototype.getNumberOfStops=function(){return this.attributes.segments.length},e.prototype.getDuration=function(){return this.attributes._duration||this.attributes.itineraryPartData.totalTripDuration},e.prototype.getFormattedPrice=function(e){return r.format(e||(this.get("prices")||{}).priceAlternatives)},e.getMinimumMiles=function(t){var e=1/0;return _.forEach(t,function(t){t.prices&&t.prices.priceAlternatives&&_.forEach(t.prices.priceAlternatives,function(t){_.forEach(t.pricesPerCurrency,function(t){t.currency.ffcurrency===!0&&parseFloat(t.amount)<e&&(e=parseFloat(t.amount))})})}),e},e.getRequiredMileOfABasketRef=function(e){var t;return e.prices&&e.prices.priceAlternatives&&_.every(e.prices.priceAlternatives,function(e){return _.every(e.pricesPerCurrency,function(e){return e.currency.ffcurrency===!0?(t=parseFloat(e.amount),!1):!0})}),t},e.isMoreMilesRequired=function(e){return _.every(e,function(e){return e.moreMilesRequired})},e.getHostAirline=function(e){return e.nativeAirlineCode?e.nativeAirlineCode:void 0},e.getOperatingAirline=function(e){return e.segment&&e.segment.flightDetail?e.segment.flightDetail.operatingAirline:void 0
},e}),define("models/PassengerType",["require","./Model"],function(t){var n=t("./Model"),e=n.extend();return e.ADT="ADT",e.CHD="CHD",e.INF="INF",e.ALL_TYPES=[e.ADT,e.CHD,e.INF],e}),define("models/ImageLoader",["require","rsvp"],function(t){var n=t("rsvp"),e={};return e.load=function(e,t){return new n.Promise(function(r){var n=new Image;n.onload=function(){return r(e)},n.onerror=function(){return r(t)},n.src=e})},e.getRouteImagePath=function(t){var n=Sabre.getPath()+"images/routes/"+t+".jpg",r=Sabre.getPath()+"images/landing_bg_mobile.jpg";return e.load(n,r)},e}),define("collections/Collection",["require","backbone","models/Model"],function(e){var t=e("backbone"),n=t.Collection,r=e("models/Model"),a=n.extend({model:r});return a}),define("collections/BookingPathTypes",["require","./Collection","models/BookingPathType"],function(t){var n=t("./Collection"),e=t("models/BookingPathType"),r=n.extend({model:e});return r.prototype.initialize=function(t){n.prototype.initialize.call(this,t),this.add([{id:e.REDEMPTION,label:"label.fsc.points"},{id:e.REVENUE,label:"label.fsc.currency"}],{silent:!0})},r}),define("collections/Flights",["require","backbone","models/Flight"],function(e){var t=e("backbone"),n=t.Collection,r=e("models/Flight"),a=n.extend({model:r});return a}),define("views/Page",["require","views/View","models/EventBus","models/Component","backbone","rsvp"],function(t){var n=t("views/View"),r=t("models/EventBus"),a=t("models/Component"),i=t("backbone"),s=t("rsvp"),e=n.extend();return e.prototype.initialize=function(e){n.prototype.initialize.call(this,e),this.Sabre=e.Sabre||Sabre||{},this.router=this.Sabre.router,this.socket=this.Sabre.socket,this.app=this.Sabre.app,this.components=this.router.ComponentsCollection,this.listenTo(Sabre.eventBus,r.PAGE_LOADED,this.addHistory)},e.prototype.render=function(){return this.app.loading(!0),n.prototype.render.apply(this,arguments).then(function(e){return this.app.loading(!1),s.resolve(e)}.bind(this))},e.prototype.renderCustomComponents=function(){return this.children=this.getCustomComponentsViews(),this.draw()},e.prototype.addHistory=function(){var e={fragment:i.history.fragment,page:Sabre.router.currentPage};Sabre.router.previousPage=Sabre.router.history[Sabre.router.history.length-1]||{},Sabre.router.history.push(e),"AIR_SEARCH_PAGE"!==Sabre.router.currentPage&&"AIR_SELECT_PAGE"===Sabre.router.previousPage.page&&this.clearStorage(a.FLIGHT_SEARCH)},e.prototype.getComponentsViews=function(){return this.getComponentsPromises(this.options.components,"getComponentView")},e.prototype.getCustomComponentsViews=function(){return this.getComponentsPromises(this.options.customComponents,"getCustomComponentView")},e.prototype.getComponentsPromises=function(t,r){var e,a=t?t.length:0,n=[];for(e=0;a>e;e++)"hidden"!==t[e].state&&n.push(this[r](t[e]));return n},e.prototype.getComponent=function(e){return this.Sabre.router.ComponentsCollection.get(e)},e.prototype.serialize=function(){return{execution:this.executionKey,pageCode:this.pageCode}},e.prototype.saveToStorage=function(e,t){var n=this;return e=e||this.pageCode,this.storage.set(e,JSON.stringify(t||this.serialize())),n},e.prototype.loadFromStorage=function(t){t=t||this.pageCode;var e=this.storage.get(t);if(!_.isUndefined(e)&&_.isString(e)&&e.length>0)try{return JSON.parse(e)}catch(n){}return void 0},e.prototype.clearStorage=function(e){e=e||this.pageCode,this.storage.set(e,void 0)},e.prototype.getNextPageData=function(t){t._eventId_next="";var e;for(e in this.views)if(this.views.hasOwnProperty(e)&&!this.views[e].getNextPageData(t))return!1;return!0},e}),define("tpl!views/controls/upcoming_trips/tpl/upcoming_trips.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push('<div class="upcoming-trips">    <div id="',id,'-message" class="hidden"></div>    <div id="',id,'-trips-container" class="trips-container hidden">        <p id="',id,'-label" class="label"           data-translate="label.upcomingTrips.name">',T.translate("label.upcomingTrips.name"),'</p>        <div class="trips" id="',id,'-trips">        </div>    </div>    <p id="',id,'-manage-your-trips" class="label manage-your-trips"><i                class="fa fa-angle-double-right icon"></i><span                data-translate="label.upcomingTrips.manageMyTrips">',T.translate("label.upcomingTrips.manageMyTrips"),"</span>    </p></div>");return __p.join("")}}),define("tpl!views/controls/upcoming_trips/tpl/trips.tpl",function(){return function(obj){var __p=[];with(obj||{})__p.push(""),_.forEach(trips,function(e){__p.push('<div class="clearfix trip">    <div class="info">        <div class="datetime pull-right">            <span class="month">',e.month,'</span><span class="dates"><span                        class="from">',e.from,'</span></span>        </div>        <div class="airports">            <span class="airport departure">',e.departureAirport,"</span>            "),e.isArrivalAirportAvailable&&__p.push('            <i class="fa fa-long-arrow-right"></i><span                    class="airport arrival">',e.arrivalAirport,"</span>            "),__p.push('        </div>    </div>    <div class="actions">        <a href="',e.viewTripUrl,'" class="btn btn-secondary view-trip" data-translate="label.upcomingTrips.viewTrip">',T.translate("label.upcomingTrips.viewTrip"),"</a>        "),e.isEligibleForCheckin&&__p.push('        <a href="',e.checkInUrl,'" class="btn btn-primary check-in" data-translate="label.upcomingTrips.checkin">',T.translate("label.upcomingTrips.checkin"),"</a>        "),__p.push("    </div></div>")}),__p.push("");return __p.join("")}}),define("views/controls/upcoming_trips/upcoming_trips",["require","views/Component","dateFormat","models/Component","logger","tpl!./tpl/trips.tpl","models/EventBus"],function(t){var r=t("views/Component"),a=t("dateFormat"),n=t("models/Component"),s=t("logger"),o=t("tpl!./tpl/trips.tpl"),i=t("models/EventBus"),e=r.extend({id:"upcoming_trips"});return e.STATUS={NOT_FETCHED:-1,FETCHED:0,FETCHING:1},e.prototype.initialize=function(){r.prototype.initialize.apply(this,arguments),this.listenToOnce(Sabre.eventBus,i.PAGE_LOADED,this.onPageLoaded.bind(this)),this.listenTo(Sabre.eventBus,i.BOOKING_COMPLETED,this.onBookingCompleted.bind(this)),this.on("status-changed",this.onStatusChanged.bind(this))},e.prototype.onStatusChanged=function(t){switch(t.to){case e.STATUS.FETCHED:this.renderTrips(),this.controls.message.addClass("hidden");break;case e.STATUS.FETCHING:this.controls.tripsContainer.addClass("hidden"),this.controls.message.html(Sabre.translator.get("label.upcomingTrips.loading")).removeClass("hidden");break;case e.STATUS.NOT_FETCHED:this.controls.tripsContainer.addClass("hidden"),this.controls.message.addClass("hidden")}},e.prototype.onBookingCompleted=function(){this.status=e.STATUS.NOT_FETCHED,this.fetch()},e.prototype.render=function(){var e=this;return r.prototype.render.apply(this,arguments).then(function(){e.mapControls();var t={};t["click "+e.toId("manage-your-trips")]="onManageYourTripClick",e.delegateEvents(t),e.onStatusChanged({to:e.status})})},e.prototype.onPageLoaded=function(){this.Sabre.upcomingTrips&&this.Sabre.upcomingTrips.length>0?this.status=e.STATUS.FETCHED:(this.status=e.STATUS.NOT_FETCHED,this.fetch())},e.prototype.onManageYourTripClick=function(e){e.preventDefault(),Sabre.router.navigate("#myb",{trigger:!0})},e.prototype.show=function(){var t=this;t.status===e.STATUS.NOT_FETCHED&&t.fetch()},e.prototype.renderTrips=function(){var e=this;e.Sabre.upcomingTrips&&e.Sabre.upcomingTrips.length>0?(e.controls.trips.html(o({T:Sabre.translator,trips:e.Sabre.upcomingTrips.map(function(e){var t=e.getDepartureDate();return{month:a.format(t,{format:"%b"}),from:a.format(t,{format:"%d"}),departureAirport:e.getDepartureAirport(),isArrivalAirportAvailable:e.isReturnAirportAvailable(),arrivalAirport:e.getReturnAirport(),isEligibleForCheckin:e.isEligibleForCheckin(),checkInUrl:e.isEligibleForCheckin()?"#checkin?pnr="+encodeURIComponent(e.getPNR()):"",viewTripUrl:"#mytrips?viewReloc="+encodeURIComponent(e.getPNR())}})})),e.controls.tripsContainer.removeClass("hidden")):e.controls.tripsContainer.addClass("hidden")},e.prototype.fetch=function(){var t=this;return t.status!==e.STATUS.FETCHING?(t.status=e.STATUS.FETCHING,t.socket.send({url:t.router.baseUrl+"myb.html",type:"POST",headers:{JsonResponse:"JsonResponse"},cache:!1}).then(function(r){var e=t.components.get(n.MY_TRIPS);e?e.set("data",r.components[n.MY_TRIPS],{silent:!0}):(t.components.add({id:n.MY_TRIPS,data:r.components[n.MY_TRIPS]}),e=t.components.get(n.MY_TRIPS),t.Sabre.upcomingTrips=e.getTrips().upcoming(t.components.get(n.LOGIN).getUpcomingTripSettings()||{}))}).finally(function(){t.status=e.STATUS.FETCHED,s.groupEnd("upcoming_trips::fetch()")})):void 0},Object.defineProperty(e.prototype,"status",{get:function(){var e=this.loadFromStorage(this.componentCode)||{};return e.status},set:function(t){var e=this.loadFromStorage(this.componentCode)||{};t!==e.status&&(this.trigger("status-changed",{from:e.status,to:t}),e.status=t,this.saveToStorage(this.componentCode,e))}}),e})}();