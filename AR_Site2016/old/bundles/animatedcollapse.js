var animatedcollapse={divholders:{},divgroups:{},lastactiveingroup:{},preloadimages:[],show:function(n){if(typeof n=="object")for(var t=0;t<n.length;t++)this.showhide(n[t],"show");else this.showhide(n,"show")},hide:function(n){if(typeof n=="object")for(var t=0;t<n.length;t++)this.showhide(n[t],"hide");else this.showhide(n,"hide")},toggle:function(n){typeof n=="object"&&(n=n[0]),this.showhide(n,"toggle")},addDiv:function(n,t){return this.divholders[n]={id:n,$divref:null,attrs:t},this.divholders[n].getAttr=function(n){var t=new RegExp(n+"=([^,]+)","i");return t.test(this.attrs)&&parseInt(RegExp.$1)!=0?RegExp.$1:null},this.currentid=n,this},showhide:function(n,t){var r=this.divholders[n].$divref,i;this.divholders[n]&&r.length==1&&(i=this.divgroups[r.attr("groupname")],r.attr("groupname")&&i.count>1&&(t=="show"||t=="toggle"&&r.css("display")=="none")?(i.lastactivedivid&&i.lastactivedivid!=n&&this.slideengine(i.lastactivedivid,"hide"),this.slideengine(n,"show"),i.lastactivedivid=n):this.slideengine(n,t))},slideengine:function(n,t){var i=this.divholders[n].$divref,r=this.divholders[n].$togglerimage,u;if(this.divholders[n]&&i.length==1)return u={height:t},i.attr("fade")&&(u.opacity=t),i.animate(u,i.attr("speed")?parseInt(i.attr("speed")):500,function(){if(r&&r.attr("src",i.css("display")=="none"?r.data("srcs").closed:r.data("srcs").open),animatedcollapse.ontoggle)try{animatedcollapse.ontoggle(jQuery,i.get(0),i.css("display"))}catch(n){alert('An error exists inside your "ontoggle" function:\n\n'+n+"\n\nAborting execution of function.")}}),!1},generatemap:function(){for(var t={},n=0;n<arguments.length;n++)arguments[n][1]!=null&&(t[arguments[n][0]]=arguments[n][1]);return t},init:function(){var n=this;jQuery(document).ready(function(t){var f;animatedcollapse.ontoggle=animatedcollapse.ontoggle||null;var u=animatedcollapse.urlparamselect(),i=n.getCookie("acopendivids"),r=n.getCookie("acgroupswithpersist");i!=null&&(i=i=="nada"?[]:i.split(",")),r=r==null||r=="nada"?[]:r.split(","),jQuery.each(n.divholders,function(){var e,f;this.$divref=t("#"+this.id),e=(this.getAttr("persist")||jQuery.inArray(this.getAttr("group"),r)!=-1)&&i!=null?jQuery.inArray(this.id,i)!=-1?"block":"none":this.getAttr("hide")?"none":null,u[0]=="all"||jQuery.inArray(this.id,u)!=-1?e="block":u[0]=="none"&&(e="none"),this.$divref.css(n.generatemap(["height",this.getAttr("height")],["display",e])),this.$divref.attr(n.generatemap(["groupname",this.getAttr("group")],["fade",this.getAttr("fade")],["speed",this.getAttr("speed")])),this.getAttr("group")&&(f=n.divgroups[this.getAttr("group")]||(n.divgroups[this.getAttr("group")]={}),f.count=(f.count||0)+1,jQuery.inArray(this.id,u)!=-1&&(f.lastactivedivid=this.id,f.overridepersist=1),(f.lastactivedivid||this.$divref.css("display")=="none")&&(e!="block"||typeof f.overridepersist!="undefined")||(f.lastactivedivid=this.id),this.$divref.css({display:"none"}))}),jQuery.each(n.divgroups,function(){this.lastactivedivid&&u[0]!="none"&&n.divholders[this.lastactivedivid].$divref.show()}),animatedcollapse.ontoggle&&jQuery.each(n.divholders,function(){animatedcollapse.ontoggle(jQuery,this.$divref.get(0),this.$divref.css("display"))}),f=t("a[rel]").filter('[rel^="collapse["], [rel^="expand["], [rel^="toggle["]'),f.each(function(){this._divids=this.getAttribute("rel").replace(/(^\w+)|(\s+)/g,"").replace(/[\[\]']/g,""),this.getElementsByTagName("img").length==1&&n.divholders[this._divids]&&(animatedcollapse.preloadimage(this.getAttribute("data-openimage"),this.getAttribute("data-closedimage")),$togglerimage=t(this).find("img").eq(0).data("srcs",{open:this.getAttribute("data-openimage"),closed:this.getAttribute("data-closedimage")}),n.divholders[this._divids].$togglerimage=t(this).find("img").eq(0),n.divholders[this._divids].$togglerimage.attr("src",n.divholders[this._divids].$divref.css("display")=="none"?$togglerimage.data("srcs").closed:$togglerimage.data("srcs").open)),t(this).click(function(){var t=this.getAttribute("rel"),n=this._divids==""?[]:this._divids.split(",");if(n.length>0)return animatedcollapse[/expand/i.test(t)?"show":/collapse/i.test(t)?"hide":"toggle"](n),!1})}),t(window).bind("unload",function(){n.uninit()})})},uninit:function(){var t="",n="";jQuery.each(this.divholders,function(){this.$divref.css("display")!="none"&&(t+=this.id+","),this.getAttr("group")&&this.getAttr("persist")&&(n+=this.getAttr("group")+",")}),t=t==""?"nada":t.replace(/,$/,""),n=n==""?"nada":n.replace(/,$/,""),this.setCookie("acopendivids",t),this.setCookie("acgroupswithpersist",n)},getCookie:function(n){var t=new RegExp(n+"=[^;]*","i");return document.cookie.match(t)?document.cookie.match(t)[0].split("=")[1]:null},setCookie:function(n,t,i){if(typeof i!="undefined"){var r=new Date;r.setDate(r.getDate()+i),document.cookie=n+"="+t+"; path=/; expires="+r.toGMTString()}else document.cookie=n+"="+t+"; path=/"},urlparamselect:function(){return window.location.search.match(/expanddiv=([\w\-_,]+)/i),RegExp.$1!=""?RegExp.$1.split(","):[]},preloadimage:function(){for(var t=this.preloadimages,n=0;n<arguments.length;n++)arguments[n]&&arguments[n].length>0&&(t[t.length]=new Image,t[t.length-1].src=arguments[n])}}